(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+7AZ":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return S});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},0:function(t,e,n){t.exports=n("zUnb")},"4ftG":function(t,e,n){var r=n("rSCU"),i=n("GMxU").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(e){return a.slice()}}(t):i(r(t))}},"61rj":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"6CFf":function(t,e,n){var r=n("L97z");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("os0x"),s=n("x7I3"),u=n("zVF4"),c=i.SDK_VERSION,l=new o.Logger("@firebase/firestore"),h=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function f(){return l.logLevel===o.LogLevel.DEBUG?h.DEBUG:l.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function p(t){switch(t){case h.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:l.logLevel=o.LogLevel.ERROR;break;case h.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,["Firestore ("+c+") ["+t+"]: "+e].concat(i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=e.map(m);l.error.apply(l,["Firestore ("+c+"): "+t].concat(r))}}function m(t){if("string"==typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function g(t){var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function v(t,e){t||g(e)}var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||g("Platform not set"),t.platform},t}();function w(){return b.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},S=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(e,t),e}(Error);function E(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new S(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){return void 0!==t?t:e}function I(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x(t,e,n){if(e.length!==n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function N(t,e,n){if(e.length<n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function D(t,e,n,r){if(e.length<n||e.length>r)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+H(e.length,"argument")+".")}function O(t,e,n,r){F(t,e,K(n)+" argument",r)}function P(t,e,n,r){void 0!==r&&O(t,e,n,r)}function R(t,e,n,r){F(t,e,n+" option",r)}function M(t,e,n,r){void 0!==r&&R(t,e,n,r)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(j(u))}var c=j(r);throw new S(_.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function F(t,e,n,r){if(!("object"===e?U(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=j(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function U(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function j(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g("Unknown wrong type: "+typeof t)}function V(t,e,n){if(void 0===n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+K(e)+" argument, but it was undefined.")}function q(t,e,n){A(e,function(e,r){if(n.indexOf(e)<0)throw new S(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function B(t,e,n,r){var i=j(r);return new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+K(n)+" argument to be a "+e+", but it was: "+i)}function K(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function H(t,e){return t+" "+e+(1===t?"":"s")}var z=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function Q(t,e){return t<e?-1:t>e?1:0}function W(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function G(){if("undefined"==typeof Uint8Array)throw new S(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Y(){if(!b.getPlatform().base64Available)throw new S(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var X=function(){function t(t){Y(),this._binaryString=t}return t.fromBase64String=function(e){x("Blob.fromBase64String",arguments,1),O("Blob.fromBase64String","string",1,e),Y();try{return new t(b.getPlatform().atob(e))}catch(n){throw new S(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},t.fromUint8Array=function(e){if(x("Blob.fromUint8Array",arguments,1),G(),!(e instanceof Uint8Array))throw B("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),Y(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),G();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Q(this._binaryString,t._binaryString)},t}(),Z=E(X,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),J=function(){function t(t,e){if(x("GeoPoint",arguments,2),O("GeoPoint","number",1,t),O("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new S(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new S(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Q(this._lat,t._lat)||Q(this._long,t._long)},t}(),$=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Q(this.nanoseconds,t.nanoseconds):Q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),tt=function(){return function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}}(),et="(default)",nt=function(){function t(t,e){this.projectId=t,this.database=e||et}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===et},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Q(this.projectId,t.projectId)||Q(this.database,t.database)},t}(),rt=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):g("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return v(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return v(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new S(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(rt),ot=/^[_a-zA-Z][_a-zA-Z0-9]*$/,at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.isValidIdentifier=function(t){return ot.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new S(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new S(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new S(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(rt),st=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===it.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return it.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new it(e.slice()))},t.fromPathString=function(e){return new t(it.fromString(e))},t.EMPTY=new t(new it([])),t}(),ut=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return st.comparator(t.key,e.key)},t}(),ct=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return a.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},e}(ut),lt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ut),ht=function(t){function e(e,n){return t.call(this,e,n)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ut),ft=function(){function t(t,e){this.comparator=t,this.root=e||dt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pt(this.root,t,this.comparator,!0)},t}(),pt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),dt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw g("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),yt=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new dt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();dt.EMPTY=new yt;var mt=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),gt=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),vt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(gt.Estimate,n);case"previous":return new t(gt.Previous,n);case"none":case void 0:return new t(gt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),bt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,t.typeOrder)},t}(),wt=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=mt.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(bt),_t=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(bt),St=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(bt);function Et(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Tt=function(t){function e(e){return t.call(this,e)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Et(this.internalValue,t.internalValue)},e}(St),Ct=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Et(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(St),It=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(bt),At=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof kt?-1:this.defaultCompareTo(t)},e}(bt),kt=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=mt.TimestampValue,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===gt.Estimate?new At(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===gt.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof At?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(bt),xt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),Nt=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=mt.RefValue,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:st.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(bt),Dt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),Ot=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Q(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new ft(Q)),e}(bt),Pt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mt.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Q(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(bt),Rt=Number,Mt=Rt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Lt=Rt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ft=Rt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Ut(t){return null==t}function jt(t){return Ft(t)&&t<=Lt&&t>=Mt}var Vt=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Yt]:[new Gt(t),Yt];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Qt.ASCENDING)===Qt.ASCENDING?Yt:Xt)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof Kt)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!st.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!st.isDocumentKey(this.path),"No ordering allowed for document query"),v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";Ut(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Ut(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Ut(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Kt&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Kt&&t.op===Bt.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return st.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return st.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),qt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(wt.INSTANCE)){if(e!==Bt.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Ht(t)}if(n.isEqual(Ct.NAN)){if(e!==Bt.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new zt(t)}return new Kt(t,e,n)},t}(),Bt=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return g("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),Kt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){v(this.value instanceof Nt,"Comparing on key, but filter value not a RefValue"),v(this.op!==Bt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=st.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},e.prototype.matchesValue=function(t){var e=this;return this.op===Bt.ARRAY_CONTAINS?t instanceof Pt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Bt.LESS_THAN:return t<0;case Bt.LESS_THAN_OR_EQUAL:return t<=0;case Bt.EQUAL:return 0===t;case Bt.GREATER_THAN:return t>0;case Bt.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Bt.EQUAL&&this.op!==Bt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(qt),Ht=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(qt),zt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(qt),Qt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Wt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Nt,"Bound has a non-key value where the key path is being used."),n=st.comparator(o.key,e.key);else{var a=e.field(i.field);v(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Qt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Gt=function(){function t(t,e){this.field=t,void 0===e&&(e=Qt.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?ct.compareByKey(t,e):ct.compareByField(this.field,t,e);switch(this.dir){case Qt.ASCENDING:return n;case Qt.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Yt=new Gt(at.keyField(),Qt.ASCENDING),Xt=new Gt(at.keyField(),Qt.DESCENDING),Zt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new $(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new $(0,0)),t}(),Jt=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),$t=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Zt.MIN),void 0===o&&(o=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),te=function(){function t(t){this.comparator=t,this.data=new ft(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ee(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ee(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ee=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ne=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new te(at.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),re=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ie=function(){return function(t,e){this.version=t,this.transformResults=e}}(),oe=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),ae=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof ct&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof ct:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),se=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof ct?t.version:Zt.MIN},t}(),ue=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=oe.Set,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation."),new ct(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=se.getPostMutationVersion(t);return new ct(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(se),ce=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=oe.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new ht(this.key,e.version);var n=this.patchDocument(t);return new ct(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=se.getPostMutationVersion(t),i=this.patchDocument(t);return new ct(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof ct?t.data:Ot.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(se),le=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=oe.Transform,r.precondition=ae.exists(!0),r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new ht(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new ct(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new ct(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&W(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof ct,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof ct&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof ct&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(se),he=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=oe.Delete,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new lt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new lt(this.key,Zt.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(se),fe=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new kt(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),pe=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ye(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Pt(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}(),de=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ye(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Pt(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}();function ye(t){return t instanceof Pt?t.internalValue.slice():[]}var me=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),ge=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function ve(t){switch(t){case _.OK:return g("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function be(t){if(void 0===t)return y("GRPC error has no .code"),_.UNKNOWN;switch(t){case ge.OK:return _.OK;case ge.CANCELLED:return _.CANCELLED;case ge.UNKNOWN:return _.UNKNOWN;case ge.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case ge.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case ge.INTERNAL:return _.INTERNAL;case ge.UNAVAILABLE:return _.UNAVAILABLE;case ge.UNAUTHENTICATED:return _.UNAUTHENTICATED;case ge.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case ge.NOT_FOUND:return _.NOT_FOUND;case ge.ALREADY_EXISTS:return _.ALREADY_EXISTS;case ge.PERMISSION_DENIED:return _.PERMISSION_DENIED;case ge.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case ge.ABORTED:return _.ABORTED;case ge.OUT_OF_RANGE:return _.OUT_OF_RANGE;case ge.UNIMPLEMENTED:return _.UNIMPLEMENTED;case ge.DATA_LOSS:return _.DATA_LOSS;default:return g("Unknown status code: "+t)}}function we(t){if(void 0===t)return ge.OK;switch(t){case _.OK:return ge.OK;case _.CANCELLED:return ge.CANCELLED;case _.UNKNOWN:return ge.UNKNOWN;case _.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case _.INTERNAL:return ge.INTERNAL;case _.UNAVAILABLE:return ge.UNAVAILABLE;case _.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case _.NOT_FOUND:return ge.NOT_FOUND;case _.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case _.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case _.ABORTED:return ge.ABORTED;case _.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case _.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case _.DATA_LOSS:return ge.DATA_LOSS;default:return g("Unknown status code: "+t)}}var _e=new ft(st.comparator);function Se(){return _e}function Ee(){return Se()}var Te=new ft(st.comparator);function Ce(){return Te}var Ie=new ft(st.comparator);function Ae(){return Ie}var ke=new te(st.comparator);function xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ke,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Ne=new te(Q);function De(){return Ne}var Oe=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||st.comparator(e.key,n.key)}:function(t,e){return st.comparator(t.key,e.key)},this.keyedMap=Ce(),this.sortedSet=new ft(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Pe=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Re=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Me=function(){function t(){this.changeMap=new ft(st.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Pe.Added&&n.type===Pe.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Pe.Metadata&&n.type!==Pe.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Pe.Modified&&n.type===Pe.Modified?this.changeMap=this.changeMap.insert(e,{type:Pe.Modified,doc:t.doc}):t.type===Pe.Modified&&n.type===Pe.Added?this.changeMap=this.changeMap.insert(e,{type:Pe.Added,doc:t.doc}):t.type===Pe.Removed&&n.type===Pe.Added?this.changeMap=this.changeMap.remove(e):t.type===Pe.Removed&&n.type===Pe.Modified?this.changeMap=this.changeMap.insert(e,{type:Pe.Removed,doc:n.doc}):t.type===Pe.Added&&n.type===Pe.Removed?this.changeMap=this.changeMap.insert(e,{type:Pe.Modified,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Le=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Pe.Added,doc:t})}),new t(e,n,Oe.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Fe=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Ue.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Zt.MIN,i,De(),Se(),xe())},t}(),Ue=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,xe(),xe(),xe())},t}(),je=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),Ve=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),qe=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Be=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Ke=function(){function t(){this.pendingResponses=0,this.documentChanges=Qe(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=xe(),e=xe(),n=xe();return this.documentChanges.forEach(function(r,i){switch(i){case Pe.Added:t=t.add(r);break;case Pe.Modified:e=e.add(r);break;case Pe.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new Ue(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Qe()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),He=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Se(),this.pendingDocumentTargetMapping=ze(),this.pendingTargetResets=new te(Q)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof ct?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof lt&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case qe.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case qe.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case qe.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case qe.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case qe.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):I(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new st(i.path);this.removeDocumentFromTarget(e,o,new lt(o,Zt.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};I(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new st(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new lt(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=xe();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Jt.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Fe(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Se(),this.pendingDocumentTargetMapping=ze(),this.pendingTargetResets=new te(Q),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Pe.Modified:Pe.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Pe.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Ke),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new te(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Ke,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function ze(){return new ft(st.comparator)}function Qe(){return new ft(st.comparator)}var We,Ge,Ye=((We={})[Qt.ASCENDING.name]="ASCENDING",We[Qt.DESCENDING.name]="DESCENDING",We),Xe=((Ge={})[Bt.LESS_THAN.name]="LESS_THAN",Ge[Bt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ge[Bt.GREATER_THAN.name]="GREATER_THAN",Ge[Bt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ge[Bt.EQUAL.name]="EQUAL",Ge[Bt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ge),Ze=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Je(t,e){v(!Ut(t),e+" is missing")}function $e(t){return"number"==typeof t?t:"string"==typeof t?Number(t):g("can't parse "+t)}var tn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:be(t.code);return new S(e,t.message||"")},t.prototype.toInt32Value=function(t){return Ut(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Ut(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=$e(t.seconds||"0");return new $(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=Ze.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new $(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),X.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),Zt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=it.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new st(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?it.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new it(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new it(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof wt)return{nullValue:"NULL_VALUE"};if(t instanceof _t)return{booleanValue:t.value()};if(t instanceof Tt)return{integerValue:""+t.value()};if(t instanceof Ct){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof It?{stringValue:t.value()}:t instanceof Ot?{mapValue:this.toMapValue(t)}:t instanceof Pt?{arrayValue:this.toArrayValue(t)}:t instanceof At?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Dt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof xt?{bytesValue:this.toBytes(t.value())}:t instanceof Nt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(en(t,n,"nullValue"))return wt.INSTANCE;if(en(t,n,"booleanValue"))return _t.of(t.booleanValue);if(en(t,n,"integerValue"))return new Tt($e(t.integerValue));if(en(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ct.NAN;if("Infinity"===t.doubleValue)return Ct.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ct.NEGATIVE_INFINITY}return new Ct(t.doubleValue)}if(en(t,n,"stringValue"))return new It(t.stringValue);if(en(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(en(t,n,"arrayValue"))return Je(t.arrayValue,"arrayValue"),new Pt((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(en(t,n,"timestampValue"))return Je(t.timestampValue,"timestampValue"),new At(this.fromTimestamp(t.timestampValue));if(en(t,n,"geoPointValue"))return Je(t.geoPointValue,"geoPointValue"),new Dt(new J(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(en(t,n,"bytesValue")){Je(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new xt(r)}if(en(t,n,"referenceValue")){Je(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new nt(i.get(1),i.get(3)),a=new st(this.extractLocalPathFromResourceName(i));return new Nt(o,a)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new ct(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=Ot.EMPTY;return A(t,function(t,r){n=n.set(new at([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),Je(t.found.name,"doc.found.name"),Je(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new ct(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new lt(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return en(t,e,"found")?this.fromFound(t):en(t,e,"missing")?this.fromMissing(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case qe.Added:return"ADD";case qe.Current:return"CURRENT";case qe.NoChange:return"NO_CHANGE";case qe.Removed:return"REMOVE";case qe.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Ve)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof je){var e;if(t.newDoc instanceof ct)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof lt)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Be){var n=void 0;return t.cause&&(n={code:we(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(en(t,n,"targetChange")){Je(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Be(r,i,o,s||null)}else if(en(t,n,"documentChange")){Je(t.documentChange,"documentChange"),Je(t.documentChange.document,"documentChange.name"),Je(t.documentChange.document.name,"documentChange.document.name"),Je(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new ct(c,l,h,{},u.document);e=new je(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if(en(t,n,"documentDelete")){Je(t.documentDelete,"documentDelete"),Je(t.documentDelete.document,"documentDelete.document");var p=t.documentDelete;c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):Zt.forDeletedDoc(),f=new lt(c,l),e=new je([],p.removedTargetIds||[],f.key,f)}else if(en(t,n,"documentRemove")){Je(t.documentRemove,"documentRemove"),Je(t.documentRemove.document,"documentRemove");var d=t.documentRemove;c=this.fromName(d.document),e=new je([],d.removedTargetIds||[],c,null)}else{if(!en(t,n,"filter"))return g("Unknown change type "+JSON.stringify(t));Je(t.filter,"filter"),Je(t.filter.targetId,"filter.targetId");var y=t.filter,m=new me(y.count||0);e=new Ve(y.targetId,m)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?qe.NoChange:"ADD"===t?qe.Added:"REMOVE"===t?qe.Removed:"CURRENT"===t?qe.Current:"RESET"===t?qe.Reset:g("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!en(t,t.response_type,"targetChange"))return Zt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Zt.MIN:e.readTime?this.fromVersion(e.readTime):Zt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ue)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof he)e={delete:this.toName(t.key)};else if(t instanceof ce)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof le))return g("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ae.NONE;if(t.update){Je(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new ce(r,i,o,n)}return new ue(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new he(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new le(r,a)}return g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ae.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ae.exists(t.exists):ae.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new ie(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof fe)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pe)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof de)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw g("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;en(t,n,"setToServerValue")?(v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=fe.instance):en(t,n,"appendMissingElements")?r=new pe((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)})):en(t,n,"removeAllFromArray")?r=new de((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)})):g("Unknown transform proto: "+JSON.stringify(t));var i=at.fromServerFormat(t.fieldPath);return new re(i,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return v(1===e,"DocumentsTarget contained other than 1 document: "+e),Vt.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(it.EMPTY_PATH);else{var n=t.path;v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(v(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var s=null;n.startAt&&(s=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new Vt(e,o,i,a,s,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Jt.Listen:return null;case Jt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Jt.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Kt?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Wt(r,n)},t.prototype.toDirection=function(t){return Ye[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Qt.ASCENDING;case"DESCENDING":return Qt.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Xe[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Bt.EQUAL;case"GREATER_THAN":return Bt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Bt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Bt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Bt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Bt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return g("Unspecified relation");default:return g("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return at.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Gt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Kt?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Kt(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof zt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Ht?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new zt(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Ht(n);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return at.fromServerFormat(t)});return ne.fromArray(e)},t}();function en(t,e,n){return e===n||!e&&n in t}var nn=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),rn="Connection",on={BatchGetDocuments:"batchGet",Commit:"commit"},an="gl-js/ fire/"+c,sn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new s.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=an},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){r.pool.getObject(function(u){u.listenOnce(s.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=u.getResponseJson();d(rn,"XHR received:",JSON.stringify(e)),o(e);break;case s.ErrorCode.TIMEOUT:d(rn,'RPC "'+t+'" timed out'),a(new S(_.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=u.getStatus();d(rn,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0?a(new S(function(t){switch(t){case 200:return _.OK;case 400:return _.INVALID_ARGUMENT;case 401:return _.UNAUTHENTICATED;case 403:return _.PERMISSION_DENIED;case 404:return _.NOT_FOUND;case 409:return _.ABORTED;case 416:return _.OUT_OF_RANGE;case 429:return _.RESOURCE_EXHAUSTED;case 499:return _.CANCELLED;case 500:return _.UNKNOWN;case 501:return _.UNIMPLEMENTED;case 503:return _.UNAVAILABLE;case 504:return _.DEADLINE_EXCEEDED;default:return t>=200&&t<300?_.OK:t>=400&&t<500?_.FAILED_PRECONDITION:t>=500&&t<600?_.INTERNAL:_.UNKNOWN}}(n),"Server responded with status "+u.getStatusText())):(d(rn,'RPC "'+t+'" failed'),a(new S(_.UNAVAILABLE,"Connection failed.")));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{d(rn,'RPC "'+t+'" completed.'),r.pool.releaseObject(u)}});var c=JSON.stringify(e);d(rn,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),u.send(i,"POST",c,l,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d(rn,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),c=!1,l=!1,h=new nn({sendFn:function(t){l?d(rn,"Not sending because WebChannel is closed:",t):(c||(d(rn,"Opening WebChannel transport."),a.open(),c=!0),d(rn,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),f=function(t,e){a.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return f(s.WebChannel.EventType.OPEN,function(){l||d(rn,"WebChannel transport opened.")}),f(s.WebChannel.EventType.CLOSE,function(){l||(l=!0,d(rn,"WebChannel transport closed"),h.callOnClose())}),f(s.WebChannel.EventType.ERROR,function(t){l||(l=!0,d(rn,"WebChannel transport errored:",t),h.callOnClose(new S(_.UNAVAILABLE,"The operation could not be completed")))}),f(s.WebChannel.EventType.MESSAGE,function(t){if(!l){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){d(rn,"WebChannel received error:",n);var r=n.status,i=function(t){var e=ge[r];if(void 0!==e)return be(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),l=!0,h.callOnClose(new S(i,o)),a.close()}else d(rn,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=on[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();b.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new sn(t))},t.prototype.newSerializer=function(t){return new tn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var un,cn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),ln=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(un||(un={}));var hn=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),fn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw y("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),v(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=hn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===un.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==un.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),pn="\x01",dn="\x01",yn="\x10",mn="\x11";function gn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bn(e)),e=vn(t.get(n),e);return bn(e)}function vn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=pn+yn;break;case pn:n+=pn+mn;break;default:n+=o}}return n}function bn(t){return t+pn+dn}function wn(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===pn&&t.charAt(1)===dn,"Non-empty path "+t+" had length 2"),it.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(pn,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case dn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case yn:i+=t.substring(o,a),i+="\0";break;case mn:i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new it(r)}var _n=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n,v(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=xe(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&W(this.mutations,t.mutations)},t}(),Sn=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Ae(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),En=1,Tn=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),Cn=function(){function t(t,e){this.generatorId=t,v((t&En)===t,"Generator ID "+t+" contains more than "+En+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<En,t},t.prototype.after=function(t){return this.seek(t+(1<<En)),this.next()},t.prototype.seek=function(t){v((t&En)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Tn.QueryCache,2)},t.forSyncEngine=function(){return new t(Tn.SyncEngine)},t}(),In=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),An=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",e),new In(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new S(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new S(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},a.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new xn(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,Wn).next(function(){d("SimpleDb","Database upgrade to version "+Wn+" complete")})}}).toPromise()},t.delete=function(t){return d("SimpleDb","Removing database:",t),Dn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=xn.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),In.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),kn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Dn(this.dbCursor.delete())},t}(),xn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new ln,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new Nn(e)},t}(),Nn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Dn(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Dn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Dn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new In(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new In(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new kn(i),a=e(i.primaryKey,i.value,o);if(a instanceof In){var s=a.catch(function(t){return o.done(),In.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return In.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dn(t){return new In(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var On=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Cn.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Zt.fromTimestamp(new $(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Mn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Pn(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Pn(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return In.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return Pn(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Rn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Nr.getStore(n,ar.store)).put(ar.key,e);var n},t.prototype.saveQueryData=function(t,e){return Pn(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Pn(t).iterate({range:i,index:ir.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ln(t);return e.forEach(function(e){var a=gn(e.path);i.push(o.put(new or(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),In.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ln(t);return In.forEach(e,function(e){var o=gn(e.path);return In.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ln(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ln(t),i=xe();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=wn(t[1]),o=new st(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n,r=gn(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Ln(t).iterate({index:or.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){0!==t[0]&&(o++,n.done())}).next(function(){return o>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Pn(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Pn(t){return Nr.getStore(t,ir.store)}function Rn(t){return An.getStore(t,ar.store).get(ar.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function Mn(t){return Rn(t).next(function(t){return t.highestListenSequenceNumber})}function Ln(t){return Nr.getStore(t,or.store)}var Fn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){A(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return k(this.inner)},t}(),Un=function(){function t(){this.changes=Se(),this.documentSizes=new Fn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?In.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return v(null!==this.changes,"Changes have already been applied."),this.changes},t}(),jn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Vn=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=An.getStore(t,ur.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=Kn(t),o=xe(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(zn(c),l)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(Hn(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return In.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Kn(t),r=zn(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return Qn(t)}):In.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Kn(t).get(zn(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Kn(t).get(zn(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Qn(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ee();return this.forEachDbEntry(t,e,function(t,e){r=r.insert(t,e?n.serializer.fromDbRemoteDocument(e):null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ee(),i=new ft(st.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Qn(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return In.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Kn(t).iterate({range:r},function(t,e,r){for(var a=st.fromSegments(t);o&&st.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=Ce(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return Kn(t).iterate({range:o},function(t,i,o){var a=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(a.key.path)?a instanceof ct&&e.matches(a)&&(r=r.insert(a.key,a)):o.done()}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=xe(),r=Se(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Hn(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return In.reject(new S(_.DATA_LOSS,jn))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new lt(n,Zt.forDeletedDoc());r=r.insert(n,e)}))}),In.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Hn(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new Bn(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return qn(t).get(rr.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return qn(t).put(rr.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function qn(t){return Nr.getStore(t,rr.store)}var Bn=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),a=e.documentSizes.get(t);v(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=Qn(o);r+=s-a,i.push({key:t,doc:o})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Un);function Kn(t){return Nr.getStore(t,nr.store)}function Hn(t){return Nr.getStore(t,ur.store)}function zn(t){return t.path.toArray()}function Qn(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Wn=7,Gn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=Wn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(Xn.store)}(t),function(t){t.createObjectStore(Zn.store,{keyPath:Zn.keyPath}),t.createObjectStore(Jn.store,{keyPath:Jn.keyPath,autoIncrement:!0}).createIndex(Jn.userMutationsIndex,Jn.userMutationsKeyPath,{unique:!0}),t.createObjectStore($n.store)}(t),sr(t),function(t){t.createObjectStore(nr.store)}(t));var o=In.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(or.store),t.deleteObjectStore(ir.store),t.deleteObjectStore(ar.store)}(t),sr(t)),o=o.next(function(){return function(t){var e=t.store(ar.store),n=new ar(0,0,Zt.MIN.toTimestamp(),0);return e.put(ar.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Jn.store).loadAll().next(function(n){t.deleteObjectStore(Jn.store),t.createObjectStore(Jn.store,{keyPath:Jn.keyPath,autoIncrement:!0}).createIndex(Jn.userMutationsIndex,Jn.userMutationsKeyPath,{unique:!0});var r=e.store(Jn.store),i=n.map(function(t){return r.put(t)});return In.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(cr.store,{keyPath:cr.keyPath})}(t),function(t){t.createObjectStore(ur.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(rr.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(nr.store).iterate(function(t,n){e+=Qn(n)}).next(function(){var n=new rr(e);return t.store(rr.store).put(rr.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Zn.store),r=t.store(Jn.store);return n.loadAll().next(function(n){return In.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Jn.userMutationsIndex,i).next(function(r){return In.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return pr(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(or.store),n=t.store(nr.store);return Mn(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new it(n),a=function(t){return[0,gn(t)]}(o);r.push(e.get(a).next(function(n){return n?In.resolve():function(n){return e.put(new or(0,gn(n),t))}(o)}))}).next(function(){return In.waitFor(r)})})},t}(),Yn=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),Xn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Zn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Jn=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),$n=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gn(e)]},t.key=function(t,e,n){return[t,gn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),tr=function(){return function(t,e){this.path=t,this.readTime=e}}(),er=function(){return function(t,e){this.path=t,this.version=e}}(),nr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),rr=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),ir=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),or=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),ar=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function sr(t){t.createObjectStore(or.store,{keyPath:or.keyPath}).createIndex(or.documentTargetsIndex,or.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ir.store,{keyPath:ir.keyPath}).createIndex(ir.queryTargetsIndexName,ir.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ar.store)}var ur=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),cr=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),lr=[Zn.store,Jn.store,$n.store,nr.store,ir.store,Xn.store,ar.store,or.store].concat([cr.store,ur.store]).concat([rr.store]),hr=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yr(t).iterate({index:Jn.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=dr(n),gr(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=dr(e),gr(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=mr(t),o=yr(t);return o.add({}).next(function(t){v("number"==typeof t,"Auto-generated key is not a number");var a=new _n(t,e,n),s=r.serializer.toDbMutationBatch(r.userId,a);r.documentKeysByBatchId[t]=a.keys();for(var u=[],c=0,l=n;c<l.length;c++){var h=$n.key(r.userId,l[c].key.path,t);u.push(o.put(s)),u.push(i.put(h,$n.PLACEHOLDER))}return In.waitFor(u).next(function(){return a})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return yr(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?In.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=e+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return yr(t).iterate({index:Jn.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(v(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yr(t).loadAll(Jn.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=$n.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mr(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[2],c=wn(r[1]);if(s===n.userId&&e.path.isEqual(c))return yr(t).get(u).next(function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new te(Q),i=[];return e.forEach(function(e){var o=$n.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=mr(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[2],u=wn(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),In.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=$n.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new te(Q);return mr(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[2],c=wn(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(yr(t).get(e).next(function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),In.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return pr(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),In.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return In.resolve();var r=IDBKeyRange.lowerBound($n.prefixForUser(e.userId)),i=[];return mr(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=wn(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return fr(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return gr(t).get(this.userId).next(function(t){return t||new Zn(e.userId,-1,"")})},t}();function fr(t,e,n){var r=$n.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return mr(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function pr(t,e,n){var r=t.store(Jn.store),i=t.store($n.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=$n.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return In.waitFor(o).next(function(){return c})}function dr(t){return t instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function yr(t){return Nr.getStore(t,Jn.store)}function mr(t){return Nr.getStore(t,$n.store)}function gr(t){return Nr.getStore(t,Zn.store)}var vr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=st.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new lt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=st.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new ht(e,n)):g("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof ct){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new nr(null,null,e,i=t.hasCommittedMutations)}if(t instanceof lt){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new nr(null,new tr(n,r),null,i)}return t instanceof ht?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new nr(new er(n,r),null,null,!0)):g("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new Yn(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new $(t.seconds,t.nanoseconds);return Zt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Jn(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=$.fromMillis(t.localWriteTimeMs);return new _n(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(gn(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=xe(),n=0,r=t;n<r.length;n++)e=e.add(new st(wn(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new $t(e,t.targetId,Jt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v(Jt.Listen===t.purpose,"Only queries with purpose "+Jt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new ir(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function br(t,e){var n=t[1],r=e[1],i=Q(t[0],e[0]);return 0===i?Q(n,r):i}var wr=function(){function t(t){this.maxElements=t,this.buffer=new te(br),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();br(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),_r={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Er=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Sr.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(un.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Dr)})},t}(),Tr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return In.resolve(cn.INVALID);var r=new wr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Sr.COLLECTION_DISABLED?(d("LruGarbageCollector","Garbage collection skipped; disabled"),In.resolve(_r)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),_r):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,a,s,u,c,l=this;return o=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>l.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)}).next(function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)}).next(function(t){return c=Date.now(),f()<=h.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-o)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-o)+"ms"),In.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Cr="IndexedDbPersistence",Ir="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ar="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",kr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",xr=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return a.__extends(e,t),e}(function(){return function(){}}()),Nr=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new S(_.UNIMPLEMENTED,kr);if(this.referenceDelegate=new Rr(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new vr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new On(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new Vn(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof xr)return An.getStore(t.simpleDbTransaction,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,s){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(u=new t(e,n,r,i,o,s)).start()];case 1:return a.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,s,u){return a.__awaiter(this,void 0,void 0,function(){var c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(c=new t(e,n,r,i,o,s,u)).start()];case 1:return a.sent(),[2,c]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),An.openOrCreate(this.dbName,Wn,new Gn(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[ar.store],function(e){return Mn(e).next(function(e){t.listenSequence=new cn(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",lr,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",lr,function(e){return Pr(e).put(new cr(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return Or(t).get(Xn.key).next(function(t){return In.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return Pr(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,cr.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return In.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(un.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Or(t).get(Xn.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,Ar);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pr(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&d(Cr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Xn.store,cr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,An.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[cr.store],function(e){return Pr(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),hr.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;return d(Cr,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",lr,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw y("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new S(_.FAILED_PRECONDITION,Ir);return n(new xr(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new xr(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Or(t).get(Xn.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,Ar)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new Xn(this.clientId,this.allowTabSynchronization,Date.now());return Or(t).put(Xn.key,e)},t.isAvailable=function(){return An.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Or(t);return n.get(Xn.key).next(function(t){return e.isLocalClient(t)?(d(Cr,"Releasing primary lease."),n.delete(Xn.key)):In.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(y("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return d(Cr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return y(Cr,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){y("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Dr(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===Ir}(t))throw t;return d(Cr,"Unexpectedly lost primary lease"),[2]})})}function Or(t){return t.store(Xn.store)}function Pr(t){return t.store(cr.store)}var Rr=function(){function t(t,e){this.db=t,this.garbageCollector=new Tr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Mr(t,e)},t.prototype.removeReference=function(t,e){return Mr(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Mr(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?In.resolve(!0):function(t,e){var n=!1;return gr(t).iterateSerial(function(r){return fr(t,r,e).next(function(t){return t&&(n=!0),In.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return In.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return In.waitFor([Ln(t).delete((n=e,[0,gn(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Mr(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Ln(t),i=cn.INVALID;return r.iterate({index:or.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==cn.INVALID&&e(new st(wn(n)),i),i=a,n=o):i=cn.INVALID}).next(function(){i!==cn.INVALID&&e(new st(wn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Mr(t,e){return Ln(t).put(function(t,e){return new or(0,gn(t.path),e)}(e,t.currentSequenceNumber))}var Lr=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Ee();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Se();return i.forEach(function(t,e){e||(e=new lt(t,Zt.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return st.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new st(e)).next(function(t){var e=Ce();return t instanceof ct&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(e.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof ct?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Fr=function(){function t(){this.refsByKey=new te(Ur.compareByKey),this.refsByTarget=new te(Ur.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ur(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Ur(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=st.EMPTY,r=new Ur(n,t),i=new Ur(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=st.EMPTY,n=new Ur(e,t),r=new Ur(e,t+1),i=xe();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ur(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ur=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return st.comparator(t.key,e.key)||Q(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Q(t.targetOrBatchId,e.targetOrBatchId)||st.comparator(t.key,e.key)},t}(),jr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Fr,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Lr(this.remoteDocuments,this.mutationQueue)}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Lr(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=xe(),s=0,u=r;s<u.length;s++){i.push((p=u[s]).batchId);for(var c=0,l=p.mutations;c<l.length;c++)a=a.add(l[c].key)}for(var h=0,f=t;h<f.length;h++){var p;o.push((p=f[h]).batchId);for(var d=0,y=p.mutations;d<y.length;d++)a=a.add(y[d].key)}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=$.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):In.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=xe();I(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var c=s.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=Se(),u=xe();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(r.getEntries(i,u).next(function(t){e.documentUpdates.forEach(function(u,c){var l=t.get(u);null==l||c.version.isEqual(Zt.MIN)||a.has(c.key)&&!l.hasPendingWrites||c.version.compareTo(l.version)>=0?(r.addEntry(c),s=s.insert(u,c)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var c=e.snapshotVersion;if(!c.isEqual(Zt.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return v(c.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+c+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)});o.push(l)}return In.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return In.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),In.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,In.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new $t(t,i,Jt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?In.resolve():In.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=In.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Vr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new te(Ur.compareByKey)}return t.prototype.checkEmpty=function(t){return In.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,In.resolve()},t.prototype.getLastStreamToken=function(t){return In.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,In.resolve()},t.prototype.addMutationBatch=function(t,e,n){v(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new _n(r,e,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ur(a[o].key,r));return In.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return In.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),In.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return In.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getAllMutationBatches=function(t){return In.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ur(e,0),i=new Ur(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),In.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new te(Q);return e.forEach(function(t){var e=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),In.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;st.isDocumentKey(i)||(i=i.child(""));var o=new Ur(new st(i),0),a=new te(Q);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),In.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return In.forEach(e.mutations,function(i){var o=new Ur(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Ur(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return In.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),In.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),qr=function(){function t(t){this.persistence=t,this.queries=new Fn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Zt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Fr,this.targetCount=0,this.targetIdGenerator=Cn.forQueryCache()}return t.prototype.getTargetCount=function(t){return In.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),In.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return In.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return In.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,In.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),In.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,In.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),In.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,In.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),In.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return In.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return In.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return g("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),In.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),In.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),In.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return In.resolve(n)},t.prototype.containsKey=function(t,e){return In.resolve(this.references.containsKey(e))},t}(),Br=function(){function t(t){this.sizer=t,this.docs=new ft(st.comparator),this.newDocumentChanges=xe(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.maybeDocument.key;this.docs=this.docs.insert(a,o),this.newDocumentChanges=this.newDocumentChanges.add(a)}return this.size+=n,In.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,In.resolve(n.size)):In.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return In.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return In.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ee();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),In.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ee(),i=new ft(st.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),In.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=Ce(),r=new st(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;a instanceof ct&&e.matches(a)&&(n=n.insert(a.key,a))}return In.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return In.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Se();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new lt(t,Zt.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=xe(),In.resolve(n)},t.prototype.newChangeBuffer=function(){return new Kr(this.sizer,this)},t.prototype.getSize=function(t){return In.resolve(this.size)},t}(),Kr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);v(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Un),Hr=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new cn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new qr(this),this.remoteDocumentCache=new Br(function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new Wr(t,new vr(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new Qr(t)})},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Vr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new zr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return In.or((n=this.mutationQueues,r=[],A(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),zr=function(){return function(t){this.currentSequenceNumber=t}}(),Qr=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),In.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),In.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),In.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return In.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?In.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return In.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return In.resolve(n.inMemoryPins.containsKey(e))}])},t}(),Wr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Fn(function(t){return gn(t.path)}),this.garbageCollector=new Tr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return In.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return In.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?In.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?In.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),In.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),In.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),In.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),In.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return In.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return In.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return In.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),Gr=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),Yr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),Xr=1e3,Zr=6e4,Jr=1.5,$r=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Yr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Gr(t,e,Xr,Jr,Zr)}return t.prototype.isStarted=function(){return this.state===Yr.Starting||this.state===Yr.Open||this.state===Yr.Backoff},t.prototype.isOpen=function(){return this.state===Yr.Open},t.prototype.start=function(){this.state!==Yr.Error?(v(this.state===Yr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Yr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Yr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.isOpen()?[2,this.close(Yr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===Yr.Error||Ut(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Yr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(y(e.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===Yr.Initial,"Must be in initial state to auth"),this.state=Yr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new S(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===Yr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===Yr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Yr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===Yr.Error,"Should only perform backoff when in Error state"),this.state=Yr.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return v(this.state===Yr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Yr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(Yr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ti=function(t){function e(e,n,r,i,o){var a=t.call(this,e,un.ListenStreamConnectionBackoff,un.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}($r),ei=function(t){function e(e,n,r,i,o){var a=t.call(this,e,un.WriteStreamConnectionBackoff,un.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return a.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}($r),ni=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new ei(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new ti(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Se();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),ri=function(){function t(t){this.datastore=t,this.readVersions=Ae(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof ct)e=t.version;else{if(!(t instanceof lt))throw g("Document in a transaction was a "+t.constructor.name);e=Zt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new S(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof lt||t instanceof ct?e.recordVersion(t):g("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new S(_.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ae.updateTime(e):ae.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Zt.forDeletedDoc()))throw new S(_.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ae.updateTime(e):ae.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new he(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Zt.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),ii=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),oi=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),ai=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=ii.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ii.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(un.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===ii.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(ii.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===ii.Online?(this.setAndBroadcast(ii.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(ii.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===ii.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(y(e),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),si=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new ai(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ii.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ii.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(d("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ii.Unknown),[2]}})})},t.prototype.listen=function(t){v(!T(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(T(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),k(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ii.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new He(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!k(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return I(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(ii.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(ii.Online),t instanceof Be&&t.state===qe.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof je?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Ve?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof Be,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Zt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(Zt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:w()}),e.sendUnwatchRequest(t);var r=new $t(n.query,t,Jt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return T(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(Dr)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Sn.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return ve(t.code)?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(Dr)]):[2]})})},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){return ve(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new ri(this.datastore)},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(d("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(ii.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(ii.Unknown),e.label=4;case 4:return[2]}})})},t}(),ui=function(){return function(){this.listeners=[]}}(),ci=function(){function t(t){this.syncEngine=t,this.queries=new Fn(function(t){return t.canonicalId()}),this.onlineState=ii.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new ui,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return a.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),li=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=ii.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Pe.Metadata&&e.push(i)}t=new Le(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==ii.Offline?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===ii.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Le.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),hi=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=xe(),i=xe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Pe.Added:r=r.add(s.doc.key);break;case Pe.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),fi=function(){return function(t){this.key=t}}(),pi=function(){return function(t){this.key=t}}(),di=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=xe(),this.mutatedKeys=xe(),this.documentSet=new Oe(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Me,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof ct?e:null;l&&(v(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:Pe.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Pe.Modified,doc:l}),p=!0,u&&n.query.docComparator(l,u)>0&&(s=!0)):!c&&l?(r.track({type:Pe.Added,doc:l}),p=!0):c&&!l&&(r.track({type:Pe.Removed,doc:c}),p=!0,u&&(s=!0)),p&&(l?(a=a.add(l),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Pe.Removed,doc:c})}return v(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Pe.Added:return 1;case Pe.Modified:case Pe.Metadata:return 2;case Pe.Removed:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Re.Synced:Re.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Le(this.query,t.documentSet,i,o,t.mutatedKeys,s===Re.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===ii.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Me,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=xe(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new pi(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new fi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=xe();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Le.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Re.Local)},t}(),yi=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),mi=function(){return function(t){this.key=t}}(),gi=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Fn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new ft(st.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Fr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Cn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ii.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new di(r,o),s=a.computeDocChanges(i),u=Ue.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==ii.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);v(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new yi(r,t.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(Dr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),v(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!Ut(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return A(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(v(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(Dr)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===oi.RemoteStore||!this.isPrimary&&e===oi.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new ft(st.comparator)).insert(r,new lt(r,Zt.forDeletedDoc())),o=xe().add(r),s=new Fe(Zt.MIN,{},new te(Q),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(Dr)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,e),a.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(Dr)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(Dr)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ft(Q)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof fi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof pi?(d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Vt.atPath(e.path);this.limboResolutionsByTarget[n]=new mi(e),this.remoteStore.listen(new $t(r,n,Jt.LimboResolution,cn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=s.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[s.targetId]);if(o.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var a=hi.fromSnapshot(s.targetId,i.snapshot);r.push(a)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n;return a.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),I(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;I(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ft(st.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return a.__generator(this,function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=a.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return v(!!(s=a.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(e),[2]}})})})},s=0,u=t;s<u.length;s++)o(u[s]);return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(i,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return r=Fe.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return a.__awaiter(i,void 0,void 0,function(){var e;return a.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===_.DATA_LOSS&&t.message===jn}(t)?(e=[],I(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:g("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,h,f=this;return a.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(Dr)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=e,p.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?xe().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:xe()},t}(),vi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),bi="SharedClientState",wi="firestore_clients",_i="firestore_mutations",Si="firestore_targets",Ei="firestore_online_state",Ti="firestore_sequence_number",Ci=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new S(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(y(bi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ii=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new S(r.error.code,r.error.message)),i?new t(e,r.state,o):(y(bi,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ai=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=De(),a=0;i&&a<r.activeTargetIds.length;++a)i=jt(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(y(bi,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ki=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==ii[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,ii[n.onlineState]):(y(bi,"Failed to parse online state: "+e),null)},t}(),xi=function(){function t(){this.activeTargetIds=De()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ni=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ti+"_"+r,this.activeClients[this.localClientId]=new xi,this.clientStateKeyRe=new RegExp("^"+wi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+_i+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Si+"_"+a+"_(\\d+)$"),this.onlineStateKey=Ei+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,u,c,l,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Ai.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=De();return A(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Ii.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d(bi,"READ",t,e),e},t.prototype.setItem=function(t,e){d(bi,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d(bi,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(d(bi,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=cn.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(r){y(bi,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==cn.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Ci(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:ii[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Ii(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),wi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Si+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=_i+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Ai.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Ci.fromWebStorageEntry(new vi(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ii.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return ki.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(d(bi,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Di=function(){function t(){this.localState=new xi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new xi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Oi=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Sr.withCacheSize(this.cacheSizeBytes)},t}(),Pi=function(){return function(){}}(),Ri=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return t.prototype.start=function(t){var e=this,n=new ln,r=new ln,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Oi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof S?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Nr.buildStoragePrefix(this.databaseInfo),i=new tn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(a){switch(a.label){case 0:if(e.experimentalTabSynchronization&&!Ni.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new Ni(this.asyncQueue,this.platform,r,this.clientId,t),[4,Nr.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Di,[4,Nr.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Hr.createEagerPersistence(this.clientId),this.sharedClientState=new Di,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,i,o,s=this;return a.__generator(this,function(u){switch(u.label){case 0:return this.localStore=new jr(this.persistence,t),e&&(this.lruScheduler=new Er(e,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new ni(this.asyncQueue,r,this.credentials,n),o=function(t){return s.syncEngine.applyOnlineStateChange(t,oi.SharedClientState)},this.remoteStore=new si(this.localStore,i,this.asyncQueue,function(t){return s.syncEngine.applyOnlineStateChange(t,oi.RemoteStore)}),this.syncEngine=new gi(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=o,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new ci(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return a.__awaiter(s,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return u.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new li(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof ct)return t;if(t instanceof lt)return null;throw new S(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=xe(),r=new di(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new ln;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Mi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Li=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new S(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+H(1,"element")+".")}();for(var n=0;n<t.length;++n)if(O("FieldPath","string",n,t[n]),0===t[n].length)throw new S(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(at.keyField().canonicalString()),t}(),Fi=new RegExp("[~\\*/\\[\\]]"),Ui=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),ji=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(vi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Vi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new S(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ui(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new vi(t)},t}(),qi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=vi.FIRST_PARTY,v(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Bi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,v(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new qi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(vi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ki(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Hi=function(){function t(t){this._methodName=t}return t.delete=function(){return zi.instance},t.serverTimestamp=function(){return Qi.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayUnion",arguments,1),new Wi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayRemove",arguments,1),new Gi(t)},t.prototype.isEqual=function(t){return this===t},t}(),zi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(Hi),Qi=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(Hi),Wi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return a.__extends(e,t),e}(Hi),Gi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return a.__extends(e,t),e}(Hi),Yi=E(Hi,"Use FieldValue.<field>() instead."),Xi=/^__.*__$/,Zi=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new ce(t,this.data,this.fieldMask,e):new ue(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new le(t,this.fieldTransforms)),n},t}(),Ji=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new ce(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new le(t,this.fieldTransforms)),n},t}(),$i=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function to(t){switch(t){case $i.Set:case $i.MergeSet:case $i.Update:return!0;case $i.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}var eo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new S(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(to(this.dataSource)&&Xi.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),no=function(){return function(t,e){this.databaseId=t,this.key=e}}(),ro=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new eo($i.Set,t,at.EMPTY_PATH);oo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new Zi(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new eo($i.MergeSet,t,at.EMPTY_PATH);oo("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new te(at.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Li)h=l._internalPath;else{if("string"!=typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=so(t,l)}if(!r.contains(h))throw new S(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ne.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ne.fromArray(r.fieldMask),o=r.fieldTransforms;return new Zi(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new eo($i.Update,t,at.EMPTY_PATH);oo("Data must be an object, but it was:",r,e);var i=new te(at.comparator),o=Ot.EMPTY;A(e,function(e,a){var s=so(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof zi)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=ne.fromSet(i);return new Ji(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new eo($i.Update,t,at.EMPTY_PATH),o=[ao(t,e)],a=[n];if(r.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ao(t,r[s])),a.push(r[s+1]);var u=new te(at.comparator),c=Ot.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof zi)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=ne.fromSet(u);return new Ji(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new eo($i.Argument,t,at.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=uo(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(io(t=this.runPreConverter(t,e)))return oo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Hi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new ft(Q);return k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):A(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Ot(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.parseData(o[i],e.childContextForArray(r));null==a&&(a=wt.INSTANCE),n.push(a),r++}return new Pt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!to(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof zi){if(e.dataSource!==$i.MergeSet)throw e.dataSource===$i.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Qi)e.fieldTransforms.push(new re(e.path,fe.instance));else if(t instanceof Wi){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new pe(n);e.fieldTransforms.push(new re(e.path,r))}else if(t instanceof Gi){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new de(n);e.fieldTransforms.push(new re(e.path,i))}else g("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return wt.INSTANCE;if("number"==typeof t)return jt(t)?new Tt(t):new Ct(t);if("boolean"==typeof t)return _t.of(t);if("string"==typeof t)return new It(t);if(t instanceof Date)return new At($.fromDate(t));if(t instanceof $)return new At(new $(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof J)return new Dt(t);if(t instanceof X)return new xt(t);if(t instanceof no)return new Nt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+j(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new eo($i.Argument,t,at.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function io(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $||t instanceof J||t instanceof X||t instanceof no||t instanceof Hi)}function oo(t,e,n){if(!io(n)||!U(n)){var r=j(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function ao(t,e){if(e instanceof Li)return e._internalPath;if("string"==typeof e)return so(t,e);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function so(t,e){try{return function(t){if(t.search(Fi)>=0)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Li.bind.apply(Li,[void 0].concat(t.split("."))))}catch(e){throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=uo(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function uo(t){return t instanceof Error?t.message:t.toString()}var co="firestore.googleapis.com",lo=!0,ho=!0,fo=Sr.COLLECTION_DISABLED,po=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new S(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=co,this.ssl=lo}else R("settings","non-empty string","host",t.host),this.host=t.host,M("settings","boolean","ssl",t.ssl),this.ssl=C(t.ssl,lo);if(q("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),M("settings","object","credentials",t.credentials),this.credentials=t.credentials,M("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?y("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&y("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=C(t.timestampsInSnapshots,ho),M("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Sr.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==fo&&t.cacheSizeBytes<Sr.MINIMUM_CACHE_SIZE_BYTES)throw new S(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Sr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),yo=function(){return function(){}}(),mo=function(){function t(e){var n=this;this._queue=new fn,this.INTERNAL={delete:function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new yo;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Vi(i)}else{var o=e;if(!o.projectId)throw new S(_.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new nt(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new ji}r.settings=new po({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(x("Firestore.settings",arguments,1),O("Firestore.settings","object",1,t),T(t,"persistence"))throw new S(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new po(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new ji;switch(t.type){case"gapi":return new Bi(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new S(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Oi(this._config.settings.cacheSizeBytes,void 0!==t&&C(t.experimentalTabSynchronization,!1)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Pi),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;v(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),v(!this._firestoreClient,"configureClient() called multiple times");var n=new tt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new ro(function(t){if(t instanceof bo){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new S(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new no(e._config.databaseId,t._key)}return t}),this._firestoreClient=new Ri(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!T(e,"projectId"))throw new S(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new S(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new nt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new S(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(x("Firestore.collection",arguments,1),O("Firestore.collection","non-empty string",1,t),!t)throw new S(_.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Co(it.fromString(t),this)},t.prototype.doc=function(t){if(x("Firestore.doc",arguments,1),O("Firestore.doc","non-empty string",1,t),!t)throw new S(_.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),bo.forPath(it.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return x("Firestore.runTransaction",arguments,1),O("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new go(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new vo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return g("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(x("Firestore.setLogLevel",arguments,1),O("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(h.DEBUG);break;case"error":p(h.ERROR);break;case"silent":p(h.SILENT);break;default:throw new S(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),go=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;x("Transaction.get",arguments,1);var n=xo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof lt)return new _o(e._firestore,n._key,null,!1,!1);if(r instanceof ct)return new _o(e._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){D("Transaction.set",arguments,2,3);var r=xo("Transaction.set",t,this._firestore),i=(n=Io("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Li?(N("Transaction.update",arguments,3),r=xo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(x("Transaction.update",arguments,2),r=xo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){x("Transaction.delete",arguments,1);var e=xo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),vo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){D("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=xo("WriteBatch.set",t,this._firestore),i=(n=Io("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ae.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Li?(N("WriteBatch.update",arguments,3),r=xo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(x("WriteBatch.update",arguments,2),r=xo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ae.exists(!0))),this},t.prototype.delete=function(t){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=xo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new he(e._key,ae.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new S(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),bo=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new st(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Co(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(x("DocumentReference.collection",arguments,1),O("DocumentReference.collection","non-empty string",1,t),!t)throw new S(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=it.fromString(t);return new Co(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){D("DocumentReference.set",arguments,1,2);var n=(e=Io("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ae.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Li?(N("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ae.exists(!0)))},t.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new he(this._key,ae.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ki(t[i])||(q("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ki(t[i])?n=t[i]:(O("DocumentReference.onSnapshot","function",i,t[i]),P("DocumentReference.onSnapshot","function",i+1,t[i+1]),P("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Mi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new _o(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Vt.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return D("DocumentReference.get",arguments,0,1),ko("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new _o(e.firestore,e._key,t,!0,t instanceof ct&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new S(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),wo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),_o=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return D("DocumentSnapshot.data",arguments,0,1),t=Ao("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,vt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(D("DocumentSnapshot.get",arguments,1,2),e=Ao("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(ao("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,vt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new bo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new wo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Ot)return this.convertObject(t,e);if(t instanceof Pt)return this.convertArray(t,e);if(t instanceof Nt){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||y("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new bo(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),So=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(_o),Eo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;x("Query.where",arguments,3),O("Query.where","non-empty string",2,n),V("Query.where",3,r);var o=ao("Query.where",e),a=Bt.fromString(n);if(o.isKeyField()){if(a===Bt.ARRAY_CONTAINS)throw new S(_.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new S(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new it([r]));v(s.length%2==0,"Path should be a document key"),i=new Nt(this.firestore._databaseId,new st(s))}else{if(!(r instanceof bo))throw new S(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");i=new Nt(this.firestore._databaseId,r._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var u=qt.create(o,a,i);return this.validateNewFilter(u),new t(this._query.addFilter(u),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(D("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Qt.ASCENDING;else{if("desc"!==n)throw new S(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Qt.DESCENDING}if(null!==this._query.startAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ao("Query.orderBy",e),o=new Gt(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(x("Query.limit",arguments,1),O("Query.limit","number",1,e),e<=0)throw new S(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(V(t,1,e),e instanceof _o){if(n.length>0)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new S(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Nt(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof kt)throw new S(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new S(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Wt(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new S(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+t+"()");var s=new st(this._query.path.child(a));i.push(new Nt(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Wt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ki(t[i])||(q("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ki(t[i])?n=t[i]:(O("Query.onSnapshot","function",i,t[i]),P("Query.onSnapshot","function",i+1,t[i+1]),P("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Mi({next:function(t){e.next&&e.next(new To(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return D("Query.get",arguments,0,1),ko("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new To(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof Kt)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new S(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Bt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new S(_.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new S(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),To=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new wo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;D("QuerySnapshot.forEach",arguments,1,2),O("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Eo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(q("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new S(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new So(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Pe.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Pe.Metadata}).map(function(e){var r=new So(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Pe.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Pe.Removed&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:No(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new So(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(To.prototype.docChanges,t,{get:function(){return function(){throw new S(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Co=function(t){function e(e,n){var r=t.call(this,Vt.atPath(e),n)||this;if(e.length%2!=1)throw new S(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new bo(new st(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=z.newId()),O("CollectionReference.doc","non-empty string",1,t),""===t)throw new S(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=it.fromString(t);return bo.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){x("CollectionReference.add",arguments,1),O("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Eo);function Io(t,e){if(void 0===e)return{merge:!1};if(q(t,e,["merge","mergeFields"]),M(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(r[o]))}(t,0,0,n,function(t){return"string"==typeof t||t instanceof Li}),void 0!==e.mergeFields&&void 0!==e.merge)throw new S(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Ao(t,e){return void 0===e?{}:(q(t,e,["serverTimestamps"]),L(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ko(t,e){P(t,"object",1,e),e&&(q(t,e,["source"]),L(t,0,"source",e.source,["default","server","cache"]))}function xo(t,e,n){if(e instanceof bo){if(e.firestore!==n)throw new S(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw B(t,"DocumentReference",1,e)}function No(t){switch(t){case Pe.Added:return"added";case Pe.Modified:case Pe.Metadata:return"modified";case Pe.Removed:return"removed";default:return g("Unknown change type: "+t)}}var Do=E(mo,"Use firebase.firestore() instead."),Oo=E(go,"Use firebase.firestore().runTransaction() instead."),Po=E(vo,"Use firebase.firestore().batch() instead."),Ro=E(bo,"Use firebase.firestore().doc() instead."),Mo=E(_o),Lo=E(So),Fo=E(Eo),Uo=E(To),jo=E(Co,"Use firebase.firestore().collection() instead."),Vo={Firestore:Do,GeoPoint:J,Timestamp:$,Blob:Z,Transaction:Oo,WriteBatch:Po,DocumentReference:Ro,DocumentSnapshot:Mo,Query:Fo,QueryDocumentSnapshot:Lo,QuerySnapshot:Uo,CollectionReference:jo,FieldPath:Li,FieldValue:Yi,setLogLevel:mo.setLogLevel,CACHE_SIZE_UNLIMITED:fo};function qo(t){t.INTERNAL.registerService("firestore",function(t){return new mo(t)},function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Vo))}qo(i),e.registerFirestore=qo},"6d8W":function(t,e,n){"use strict";var r=n("I1rR"),i=n("mY8+")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("dNFx")(o)},"74FJ":function(t,e,n){"use strict";var r=n("9Aud"),i=n("lv+R"),o=n("UOZm"),a=n("j/6h"),s=n("H1Af"),u=Object.assign;t.exports=!u||n("61rj")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,p=s(arguments[c++]),d=l?r(p).concat(l(p)):r(p),y=d.length,m=0;y>m;)h.call(p,f=d[m++])&&(n[f]=p[f]);return n}:u},"8L4g":function(t,e){t.exports=!1},"8i1V":function(t,e,n){"use strict";var r=n("qtiw"),i=n("g0Mr"),o=n("lIov"),a=n("I1rR"),s=n("TDVo"),u=n("Oyqw").KEY,c=n("61rj"),l=n("ezrC"),h=n("A+3H"),f=n("U/+K"),p=n("jZgK"),d=n("eKN1"),y=n("u00B"),m=n("GShy"),g=n("oxOc"),v=n("UFGs"),b=n("Zp05"),w=n("rSCU"),_=n("IiNp"),S=n("xGvh"),E=n("xrBK"),T=n("4ftG"),C=n("bKVB"),I=n("ytDL"),A=n("9Aud"),k=C.f,x=I.f,N=T.f,D=r.Symbol,O=r.JSON,P=O&&O.stringify,R=p("_hidden"),M=p("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),j=l("op-symbols"),V=Object.prototype,q="function"==typeof D,B=r.QObject,K=!B||!B.prototype||!B.prototype.findChild,H=o&&c(function(){return 7!=E(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(V,e);r&&delete V[e],x(t,e,n),r&&t!==V&&x(V,e,r)}:x,z=function(t){var e=U[t]=E(D.prototype);return e._k=t,e},Q=q&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},W=function(t,e,n){return t===V&&W(j,e,n),v(t),e=_(e,!0),v(n),i(U,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=E(n,{enumerable:S(0,!1)})):(i(t,R)||x(t,R,S(1,{})),t[R][e]=!0),H(t,e,n)):x(t,e,n)},G=function(t,e){v(t);for(var n,r=m(e=w(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},Y=function(t){var e=L.call(this,t=_(t,!0));return!(this===V&&i(U,t)&&!i(j,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,R)&&this[R][t])||e)},X=function(t,e){if(t=w(t),e=_(e,!0),t!==V||!i(U,e)||i(j,e)){var n=k(t,e);return!n||!i(U,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=N(w(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==R||e==u||r.push(e);return r},J=function(t){for(var e,n=t===V,r=N(n?j:w(t)),o=[],a=0;r.length>a;)!i(U,e=r[a++])||n&&!i(V,e)||o.push(U[e]);return o};q||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(j,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),H(this,t,S(1,n))};return o&&K&&H(V,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),C.f=X,I.f=W,n("GMxU").f=T.f=Z,n("UOZm").f=Y,n("lv+R").f=J,o&&!n("8L4g")&&s(V,"propertyIsEnumerable",Y,!0),d.f=function(t){return z(p(t))}),a(a.G+a.W+a.F*!q,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=A(p.store),nt=0;et.length>nt;)y(et[nt++]);a(a.S+a.F*!q,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!q,"Object",{create:function(t,e){return void 0===e?E(t):G(E(t),e)},defineProperty:W,defineProperties:G,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),O&&a(a.S+a.F*(!q||c(function(){var t=D();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!Q(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Q(e))return e}),r[1]=e,P.apply(O,r)}}),D.prototype[M]||n("GYIZ")(D.prototype,M,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"8ouO":function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},"9Aud":function(t,e,n){var r=n("Iy4/"),i=n("kSm0");t.exports=Object.keys||function(t){return r(t,i)}},"A+3H":function(t,e,n){var r=n("ytDL").f,i=n("g0Mr"),o=n("jZgK")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},AR9Z:function(t,e,n){n("8i1V"),n("CNRE"),n("yLjp"),n("ZhmJ"),t.exports=n("Autd").Symbol},Autd:function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},CNRE:function(t,e,n){"use strict";var r=n("QEVv"),i={};i[n("jZgK")("toStringTag")]="z",i+""!="[object z]"&&n("TDVo")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},FTyF:function(t,e,n){var r=n("I1rR");r(r.S+r.F,"Object",{assign:n("74FJ")})},GMxU:function(t,e,n){var r=n("Iy4/"),i=n("kSm0").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},GShy:function(t,e,n){var r=n("9Aud"),i=n("lv+R"),o=n("UOZm");t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},GYIZ:function(t,e,n){var r=n("ytDL"),i=n("xGvh");t.exports=n("lIov")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},H1Af:function(t,e,n){var r=n("gYfK");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},I1rR:function(t,e,n){var r=n("qtiw"),i=n("Autd"),o=n("GYIZ"),a=n("TDVo"),s=n("6CFf"),u=function(t,e,n){var c,l,h,f,p=t&u.F,d=t&u.G,y=t&u.P,m=t&u.B,g=d?r:t&u.S?r[e]||(r[e]={}):(r[e]||{}).prototype,v=d?i:i[e]||(i[e]={}),b=v.prototype||(v.prototype={});for(c in d&&(n=e),n)h=((l=!p&&g&&void 0!==g[c])?g:n)[c],f=m&&l?s(h,r):y&&"function"==typeof h?s(Function.call,h):h,g&&a(g,c,h,t&u.U),v[c]!=h&&o(v,c,f),y&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},IiNp:function(t,e,n){var r=n("Zp05");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"Iy4/":function(t,e,n){var r=n("g0Mr"),i=n("rSCU"),o=n("b/Kf")(!1),a=n("ifzb")("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},JiIP:function(t,e,n){"use strict";var r=n("xrBK"),i=n("xGvh"),o=n("A+3H"),a={};n("GYIZ")(a,n("jZgK")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},JilW:function(t,e,n){n("KxBS"),t.exports=n("Autd").String.repeat},KBN1:function(t,e,n){"use strict";var r=n("I1rR"),i=n("c0bx"),o=n("flRy"),a="".startsWith;r(r.P+r.F*n("tLdg")("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},KxBS:function(t,e,n){var r=n("I1rR");r(r.P,"String",{repeat:n("gRXz")})},L97z:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},M1gn:function(t,e,n){var r=n("Zp05"),i=n("oxOc"),o=n("jZgK")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},NPZs:function(t,e,n){n("s6PA"),t.exports=n("Autd").Array.find},OwPH:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},Oyqw:function(t,e,n){var r=n("U/+K")("meta"),i=n("Zp05"),o=n("g0Mr"),a=n("ytDL").f,s=0,u=Object.isExtensible||function(){return!0},c=!n("61rj")(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},PfMj:function(t,e,n){var r=n("Zp05"),i=n("gYfK"),o=n("jZgK")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},QEVv:function(t,e,n){var r=n("gYfK"),i=n("jZgK")("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},"Qtk+":function(t,e){t.exports={}},"Rbo/":function(t,e,n){var r=n("ytDL"),i=n("UFGs"),o=n("9Aud");t.exports=n("lIov")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},TDVo:function(t,e,n){var r=n("qtiw"),i=n("GYIZ"),o=n("g0Mr"),a=n("U/+K")("src"),s=Function.toString,u=(""+s).split("toString");n("Autd").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},"TGP+":function(t,e,n){n("FTyF"),t.exports=n("Autd").Object.assign},"Td+X":function(t,e,n){"use strict";var r=n("8L4g"),i=n("I1rR"),o=n("TDVo"),a=n("GYIZ"),s=n("Qtk+"),u=n("JiIP"),c=n("A+3H"),l=n("a5Eg"),h=n("jZgK")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,m,g){u(n,e,d);var v,b,w,_=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",E="values"==y,T=!1,C=t.prototype,I=C[h]||C["@@iterator"]||y&&C[y],A=I||_(y),k=y?E?_("entries"):A:void 0,x="Array"==e&&C.entries||I;if(x&&(w=l(x.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),r||"function"==typeof w[h]||a(w,h,p)),E&&I&&"values"!==I.name&&(T=!0,A=function(){return I.call(this)}),r&&!g||!f&&!T&&C[h]||a(C,h,A),s[e]=A,s[S]=p,y)if(v={values:E?A:_("values"),keys:m?A:_("keys"),entries:k},g)for(b in v)b in C||o(C,b,v[b]);else i(i.P+i.F*(f||T),e,v);return v}},"U/+K":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},U8mZ:function(t,e,n){"use strict";var r=n("dNFx"),i=n("OwPH"),o=n("Qtk+"),a=n("rSCU");t.exports=n("Td+X")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},UFGs:function(t,e,n){var r=n("Zp05");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},UOZm:function(t,e){e.f={}.propertyIsEnumerable},Uv6z:function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};l.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},l.prototype.delete=function(t){delete this.map[s(t)]},l.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},l.prototype.set=function(t,e){this.map[s(t)]=u(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];v.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=m,t.Response=v,t.fetch=function(t,n){return new Promise(function(r,i){var o=new m(t,n),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL"),r(new v("response"in a?a.response:a.responseText,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function p(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,n,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=f(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var n,r,i=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},VPEh:function(t,e,n){n("6d8W"),t.exports=n("Autd").Array.findIndex},VqlW:function(t,e,n){var r=n("sQ1z"),i=n("8ouO");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},"W+Pj":function(t,e,n){n("KBN1"),t.exports=n("Autd").String.startsWith},Wcq6:function(t,e,n){"use strict";n("lcbw");var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},ZhmJ:function(t,e,n){n("u00B")("observable")},Zp05:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},a5Eg:function(t,e,n){var r=n("g0Mr"),i=n("j/6h"),o=n("ifzb")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"b/Kf":function(t,e,n){var r=n("rSCU"),i=n("c0bx"),o=n("jPdx");t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},bKVB:function(t,e,n){var r=n("UOZm"),i=n("xGvh"),o=n("rSCU"),a=n("IiNp"),s=n("g0Mr"),u=n("q098"),c=Object.getOwnPropertyDescriptor;e.f=n("lIov")?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},c0bx:function(t,e,n){var r=n("sQ1z"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},dNFx:function(t,e,n){var r=n("jZgK")("unscopables"),i=Array.prototype;null==i[r]&&n("GYIZ")(i,r,{}),t.exports=function(t){i[r][t]=!0}},eKN1:function(t,e,n){e.f=n("jZgK")},ezrC:function(t,e,n){var r=n("qtiw"),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},flRy:function(t,e,n){var r=n("PfMj"),i=n("8ouO");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},g0Mr:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},gRXz:function(t,e,n){"use strict";var r=n("sQ1z"),i=n("8ouO");t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},gYfK:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},ifzb:function(t,e,n){var r=n("ezrC")("keys"),i=n("U/+K");t.exports=function(t){return r[t]||(r[t]=i(t))}},"j/6h":function(t,e,n){var r=n("8ouO");t.exports=function(t){return Object(r(t))}},jPdx:function(t,e,n){var r=n("sQ1z"),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},jZgK:function(t,e,n){var r=n("ezrC")("wks"),i=n("U/+K"),o=n("qtiw").Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},kSm0:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},lIov:function(t,e,n){t.exports=!n("61rj")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},lcbw:function(t,e,n){"use strict";n.r(e),n("Uv6z"),n("pZxE"),n("NPZs"),n("VPEh"),n("TGP+"),n("W+Pj"),n("JilW"),n("AR9Z"),n("tmUU")},"lv+R":function(t,e){e.f=Object.getOwnPropertySymbols},"mY8+":function(t,e,n){var r=n("6CFf"),i=n("H1Af"),o=n("j/6h"),a=n("c0bx"),s=n("sl9K");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,p=e||s;return function(e,s,d){for(var y,m,g=o(e),v=i(g),b=r(s,d,3),w=a(v.length),_=0,S=n?p(e,w):u?p(e,0):void 0;w>_;_++)if((f||_ in v)&&(m=b(y=v[_],_,g),t))if(n)S[_]=m;else if(m)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:S.push(y)}else if(l)return!1;return h?-1:c||l?l:S}}},oQnE:function(t,e,n){"use strict";var r=n("VqlW")(!0);n("Td+X")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},os0x:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return S});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},oxOc:function(t,e,n){var r=n("gYfK");t.exports=Array.isArray||function(t){return"Array"==r(t)}},pZxE:function(t,e,n){"use strict";var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(i){return void u(e.promise,i)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(a){u(t,a)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(r){if(n)return;n=!0,u(e,r)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new l(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();f.Promise||(f.Promise=o)},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return i});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},q098:function(t,e,n){t.exports=!n("lIov")&&!n("61rj")(function(){return 7!=Object.defineProperty(n("y6nS")("div"),"a",{get:function(){return 7}}).a})},qtiw:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},rSCU:function(t,e,n){var r=n("H1Af"),i=n("8ouO");t.exports=function(t){return r(i(t))}},s6PA:function(t,e,n){"use strict";var r=n("I1rR"),i=n("mY8+")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("dNFx")("find")},sQ1z:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},sl9K:function(t,e,n){var r=n("M1gn");t.exports=function(t,e){return new(r(t))(e)}},tLdg:function(t,e,n){var r=n("jZgK")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},tmUU:function(t,e,n){n("oQnE"),n("zGGa"),t.exports=n("eKN1").f("iterator")},u00B:function(t,e,n){var r=n("qtiw"),i=n("Autd"),o=n("8L4g"),a=n("eKN1"),s=n("ytDL").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("zVF4"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;r.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=function t(){var e={},n={},a={},c={__esModule:!0,initializeApp:function(t,n){void 0===n&&(n={}),("object"!=typeof n||null===n)&&(n={name:n});var r=n;void 0===r.name&&(r.name=o);var a=r.name;"string"==typeof a&&a||u("bad-app-name",{name:a+""}),i(e,a)&&u("duplicate-app",{name:a});var l=new s(t,r,c);return e[a]=l,f(l,"create"),l},app:l,apps:null,Promise:Promise,SDK_VERSION:"5.8.3",INTERNAL:{registerService:function(t,e,i,o,f){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&r.deepExtend(p,i),c[t]=p,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){r.deepExtend(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var r=p(0,n);null!==r&&a[r]&&a[r](e,t)})}function p(t,e){return"serverAuth"===e?null:e}return r.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:h}),r.patchProperty(l,"App",s),c}();e.firebase=l,e.default=l},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"createWebChannelTransport",function(){return On}),n.d(e,"ErrorCode",function(){return Pn}),n.d(e,"EventType",function(){return Rn}),n.d(e,"WebChannel",function(){return Mn}),n.d(e,"XhrIoPool",function(){return Ln});var r,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){return"array"==l(t)}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function T(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");E.call(this,n+t[r])}function C(){0!=I&&(A[this[y]||(this[y]=++m)]=this),this.Ka=this.Ka,this.Qa=this.Qa}S(E,Error),E.prototype.name="CustomError",S(T,E),T.prototype.name="AssertionError";var I=0,A={};C.prototype.Ka=!1,C.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=I)){var t=this[y]||(this[y]=++m);if(0!=I&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete A[t]}},C.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),s(t))return s(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},N=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},D=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function O(t){if(!h(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function P(t,e){var n;return(n=0<=(e=k(t,e)))&&Array.prototype.splice.call(t,e,1),n}function R(t){return Array.prototype.concat.apply([],arguments)}function M(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function L(t){return/^[\s\xa0]*$/.test(t)}var F,U=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function j(t,e){return t<e?-1:t>e?1:0}t:{var V=a.navigator;if(V){var q=V.userAgent;if(q){F=q;break t}}F=""}function B(t){return-1!=F.indexOf(t)}function K(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function H(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function z(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Q(t){var e,n={};for(e in t)n[e]=t[e];return n}var W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<W.length;o++)n=W[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Y(t){return Y[" "](t),t}Y[" "]=c;var X,Z,J=B("Opera"),$=B("Trident")||B("MSIE"),tt=B("Edge"),et=tt||$,nt=B("Gecko")&&!(-1!=F.toLowerCase().indexOf("webkit")&&!B("Edge"))&&!(B("Trident")||B("MSIE"))&&!B("Edge"),rt=-1!=F.toLowerCase().indexOf("webkit")&&!B("Edge");function it(){var t=a.document;return t?t.documentMode:void 0}t:{var ot="",at=(Z=F,nt?/rv:([^\);]+)(\)|;)/.exec(Z):tt?/Edge\/([\d\.]+)/.exec(Z):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Z):rt?/WebKit\/(\S+)/.exec(Z):J?/(?:Version)[ \/]?(\S+)/.exec(Z):void 0);if(at&&(ot=at?at[1]:""),$){var st=it();if(null!=st&&st>parseFloat(ot)){X=String(st);break t}}X=ot}var ut,ct={};function lt(t){return function(t,e){var n=ct;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=U(String(X)).split("."),r=U(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=j(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||j(0==a[2].length,0==s[2].length)||j(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ht=a.document;ut=ht&&$?it()||("CSS1Compat"==ht.compatMode?parseInt(X,10):5):void 0;var ft=Object.freeze||function(t){return t},pt=!$||9<=Number(ut),dt=$&&!lt("9"),yt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function mt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function gt(t,e){mt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}mt.prototype.stopPropagation=function(){this.Ea=!0},mt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},S(gt,mt);var vt=ft({2:"touch",3:"pen",4:"mouse"});gt.prototype.Kf=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(nt){t:{try{Y(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.offsetX=rt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=rt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:vt[t.pointerType]||"",this.state=t.state,this.fb=t,t.defaultPrevented&&this.preventDefault()},gt.prototype.stopPropagation=function(){gt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},gt.prototype.preventDefault=function(){gt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var bt="closure_listenable_"+(1e6*Math.random()|0);function wt(t){return!(!t||!t[bt])}var _t=0;function St(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ob=i,this.key=++_t,this.Sa=this.Eb=!1}function Et(t){this.src=t,this.J={},this.xb=0}function Tt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==r)return i}return-1}St.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(r=Et.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.xb++);var a=Tt(t,e,r,i);return-1<a?(e=t[a],n||(e.Eb=!1)):((e=new St(e,this.src,o,!!r,i)).Eb=n,t.push(e)),e},r.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=Tt(i,e,n,r))&&(i[e].Vb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.xb--),!0)},r.ye=function(t){var e=t.type;e in this.J&&P(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},r.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Vb();delete this.J[e],this.xb--}},r.jb=function(t,e,n,r){var i=-1;return(t=this.J[t.toString()])&&(i=Tt(t,e,n,r)),-1<i?t[i]:null};var Ct="closure_lm_"+(1e6*Math.random()|0),It={};function At(t,e,n,r,i){if(r&&r.once)return xt(t,e,n,r,i);if(h(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=Ft(n),wt(t)?t.nb(e,n,d(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=Mt(t);if(s||(t[Ct]=s=new Et(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Rt,e=pt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xt(t,e,n,r,i){if(h(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,r,i);return null}return n=Ft(n),wt(t)?t.Oc(e,n,d(r)?!!r.capture:!!r,i):kt(t,e,n,!0,r,i)}function Nt(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(wt(e))e.Le(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mt(e))?(n.ye(t),0==n.xb&&(n.src=null,e[Ct]=null)):t.Vb()}}}function Dt(t){return t in It?It[t]:It[t]="on"+t}function Ot(t,e,n,r){var i=!0;if((t=Mt(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=Pt(o,r),i=i&&!1!==o)}return i}function Pt(t,e){var n=t.listener,r=t.Ob||t.src;return t.Eb&&Nt(t),n.call(r,e)}function Rt(t,e){if(t.Sa)return!0;if(!pt){var n=e||u("window.event");e=new gt(n,this);var r=!0;if(!(0>n.keyCode||null!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(a){i=!0}(i||null==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=Ot(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=Ot(n[i],t,!1,e),r=r&&o}return r}return Pt(t,new gt(e,this))}function Mt(t){return(t=t[Ct])instanceof Et?t:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(t){return p(t)?t:(t[Lt]||(t[Lt]=function(e){return t.handleEvent(e)}),t[Lt])}function Ut(){C.call(this),this.ka=new Et(this),this.Pe=this,this.Uc=null}S(Ut,C),Ut.prototype[bt]=!0,(r=Ut.prototype).addEventListener=function(t,e,n,r){At(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(h(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=Ft(r),wt(e)?e.ed(n,r,i,o):e&&(e=Mt(e))&&(n=e.jb(n,r,i,o))&&Nt(n)}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var r=t.type||t;if(s(t))t=new mt(t,n);else if(t instanceof mt)t.target=t.target||n;else{var i=t;G(t=new mt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var a=t.currentTarget=e[o];i=a.Lb(r,!0,t)&&i}if(t.Ea||(i=(a=t.currentTarget=n).Lb(r,!0,t)&&i,t.Ea||(i=a.Lb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)i=(a=t.currentTarget=e[o]).Lb(r,!1,t)&&i;return i},r.F=function(){Ut.L.F.call(this),this.pg(),this.Uc=null},r.nb=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},r.Oc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},r.ed=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},r.Le=function(t){this.ka.ye(t)},r.pg=function(){this.ka&&this.ka.pb(void 0)},r.Lb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var a=o.listener,s=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.Be},r.jb=function(t,e,n,r){return this.ka.jb(String(t),e,n,r)};var jt=a.JSON.stringify;function Vt(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function qt(){this.lc=this.Va=null}Vt.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},Vt.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Bt,Kt,Ht=new Vt(function(){return new zt},function(t){t.reset()});function zt(){this.next=this.scope=this.Gc=null}function Qt(t){a.setTimeout(function(){throw t},0)}qt.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},qt.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},qt.prototype.wg=function(t){Ht.put(t)},qt.prototype.Af=function(){return Ht.get()},zt.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null},zt.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Wt=!1,Gt=new qt;function Yt(){for(var t;t=Gt.remove();){try{t.Gc.call(t.scope)}catch(e){Qt(e)}Gt.wg(t)}Wt=!1}function Xt(t,e){Ut.call(this),this.Na=t||1,this.wb=e||a,this.nd=b(this.Rg,this),this.ie=_()}function Zt(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Jt(t,e,n){C.call(this),this.Uf=null!=n?b(t,n):t,this.Na=e,this.Xe=b(this.fg,this),this.qc=[]}function $t(t){C.call(this),this.i=t,this.o={}}S(Xt,Ut),(r=Xt.prototype).enabled=!1,r.B=null,r.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},r.Rg=function(){if(this.enabled){var t=_()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},r.ff=function(){this.dispatchEvent("tick")},r.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=_())},r.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},r.F=function(){Xt.L.F.call(this),this.stop(),delete this.wb},S(Jt,C),(r=Jt.prototype).Ta=!1,r.ob=0,r.B=null,r.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},r.stop=function(){this.B&&(a.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},r.pause=function(){this.ob++},r.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},r.F=function(){Jt.L.F.call(this),this.stop()},r.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},r.Cc=function(){this.B=Zt(this.Xe,this.Na),this.Uf.apply(null,this.qc)},S($t,C);var te=[];function ee(t,e,n){this.reset(t,e,n,void 0,void 0)}function ne(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function re(t,e){this.name=t,this.value=e}(r=$t.prototype).nb=function(t,e,n,r){return this.Tf(t,e,n,r)},r.Tf=function(t,e,n,r){h(e)||(e&&(te[0]=e.toString()),e=te);for(var i=0;i<e.length;i++){var o=At(t,e[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},r.Oc=function(t,e,n,r){return this.je(t,e,n,r)},r.je=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,r,i);else{if(!(t=xt(t,e,n||this.handleEvent,r,i||this.i||this)))return this;this.o[t.key]=t}return this},r.ed=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,r,i);else n=n||this.handleEvent,r=d(r)?!!r.capture:!!r,i=i||this.i||this,n=Ft(n),r=!!r,(e=wt(t)?t.jb(e,n,r,i):t&&(t=Mt(t))?t.jb(e,n,r,i):null)&&(Nt(e),delete this.o[e.key])},r.pb=function(){K(this.o,function(t,e){this.o.hasOwnProperty(e)&&Nt(t)},this),this.o={}},r.F=function(){$t.L.F.call(this),this.pb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.Md=null,ee.prototype.reset=function(t,e,n,r,i){this.mb=t,delete this.Md},ee.prototype.Bg=function(t){this.Md=t},ee.prototype.Ge=function(t){this.mb=t},re.prototype.toString=function(){return this.name};var ie=new re("SEVERE",1e3),oe=new re("WARNING",900),ae=new re("INFO",800),se=new re("CONFIG",700),ue=new re("FINE",500);(r=ne.prototype).getName=function(){return this.pe},r.getParent=function(){return this.$b},r.pf=function(){return this.uc||(this.uc={}),this.uc},r.Ge=function(t){this.mb=t},r.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(t,e){throw new T("Failure: Root logger has no level set.",Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},r.Pf=function(t){return t.value>=this.Qd().value},r.log=function(t,e,n){this.Pf(t)&&(p(e)&&(e=e()),this.gf(this.uf(t,e,n)))},r.uf=function(t,e,n){return t=new ee(t,String(e),this.pe),n&&t.Bg(n),t},r.ca=function(t,e){this.log(ie,t,e)},r.T=function(t,e){this.log(oe,t,e)},r.info=function(t,e){this.log(ae,t,e)},r.lf=function(t){this.log(ue,t,void 0)},r.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},r.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},r.Fg=function(t){this.$b=t},r.Qe=function(t,e){this.pf()[t]=e};var ce={},le=null;function he(t){var e;if(le||(le=new ne(""),ce[""]=le,le.Ge(se)),!(e=ce[t])){e=new ne(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=he(t.substr(0,n))).Qe(r,e),e.Fg(n),ce[t]=e}return e}function fe(t,e){t&&t.info(e,void 0)}function pe(t,e){t&&t.lf(e)}function de(){this.s=he("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(r=de.prototype).Id=function(){this.Wc=!1},r.Tg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.Xf(i)})},r.Ug=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},r.Wa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.ng(e)+(n?" "+n:"")})},r.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},r.debug=function(t){pe(this.s,t)},r.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},r.info=function(t){fe(this.s,t)},r.T=function(t){var e=this.s;e&&e.T(t,void 0)},r.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},r.ng=function(t){if(!this.Wc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var n=0;n<e.length;n++)h(e[n])&&this.Wf(e[n]);return jt(e)}catch(r){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},r.Wf=function(t){if(!(2>t.length||(t=t[1],!h(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},r.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var ye=new Ut;function me(t){mt.call(this,"serverreachability",t)}function ge(t){ye.dispatchEvent(new me(ye,t))}function ve(t,e){mt.call(this,"statevent",t),this.stat=e}function be(t){ye.dispatchEvent(new ve(ye,t))}function we(t,e,n){mt.call(this,"timingevent",t),this.size=e,this.rtt=n}function _e(t,e){if(!p(t))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){t()},e)}S(me,mt),S(ve,mt),S(we,mt);var Se={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Ee={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Te(){}function Ce(){}Te.prototype.pd=null,Te.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Ie,Ae={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function ke(){mt.call(this,"d")}function xe(){mt.call(this,"c")}function Ne(){}function De(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new $t(this),this.Ua=Oe,this.Vc=new Xt(t=et?125:void 0),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}S(ke,mt),S(xe,mt),S(Ne,Te),Ne.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},Ne.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},Ne.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},Ie=new Ne;var Oe=45e3,Pe={},Re={};function Me(t){if(t.H&&"function"==typeof t.H)return t.H();if(s(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return H(t)}function Le(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(f(t)||s(t))N(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(f(t)||s(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=z(t);o=(i=Me(t)).length;for(var a=0;a<o;a++)e.call(n,i[a],r&&r[a],t)}}function Fe(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=De.prototype).ga=function(t){this.A=t},r.setTimeout=function(t){this.Ua=t},r.He=function(t){this.Ra=t},r.Gg=function(t){this.ba=t},r.la=function(){return this.ba},r.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},r.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},r.Ce=function(t){this.qb=_(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new Jt(b(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?Q(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),ge(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},r.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},r.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(n){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(n,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(n,"No response text")}},r.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(3>t||3==t&&!et&&!this.h.ya())){this.Za||4!=t||7==e||ge(8==e||0>=n?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,be(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),et&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,be(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,be(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},r.Ig=function(){return this.Ed&&!this.lb},r.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!L(t))return t}return null},r.Ag=function(){this.Ed=!0},r.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var r=this.vf(e);if(r==Re){4==t&&(this.I=4,be(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Pe){this.I=4,be(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==t&&0==e.length&&(this.I=1,be(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},r.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},r.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},r.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Re:(e=Number(t.substring(e,n)),isNaN(e)?Pe:(n+=1)+e>t.length?Re:(t=t.substr(n,e),this.Bb=n+e,t))},r.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,a.navigator&&a.navigator.sendBeacon&&(t=a.navigator.sendBeacon(this.ua.toString(),"")),!t&&a.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=_(),this.eb()},r.cancel=function(){this.Za=!0,this.Ia()},r.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},r.eb=function(){this.hd=_()+this.Ua,this.Ke(this.Ua)},r.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=_e(b(this.gg,this),t)},r.Fb=function(){this.Ga&&(a.clearTimeout(this.Ga),this.Ga=null)},r.gg=function(){this.Ga=null;var t=_();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},r.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(ge(3),be(17)),this.Ia(),this.I=2,this.Kb()},r.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},r.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},r.Hc=function(){return this.I},r.Yc=function(t){try{this.b.ue(this,t),ge(4)}catch(e){this.a.cb(e,"Error in httprequest callback")}},(r=Fe.prototype).C=function(){return this.j},r.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},r.W=function(){return this.wc(),this.o.concat()},r.va=function(t){return Ue(this.D,t)},r.X=function(){return 0==this.j},r.clear=function(){this.D={},this.j=this.o.length=0},r.remove=function(t){return!!Ue(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},r.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];Ue(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)Ue(r,n=this.o[t])||(this.o[e++]=n,r[n]=1),t++;this.o.length=e}},r.get=function(t,e){return Ue(this.D,t)?this.D[t]:e},r.set=function(t,e){Ue(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},r.addAll=function(t){if(t instanceof Fe)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},r.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},r.clone=function(){return new Fe(this)};var je=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof Ve?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(je))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new Ye(null,this.O))}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return s(t)?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(r=Ve.prototype).toString=function(){var t=[],e=this.qa;e&&t.push(Be(e,He,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Be(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Qe:ze,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Be(n,Ge)),t.join("")},r.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var r=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.ec(r):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},r.clone=function(){return new Ve(this)},r.tb=function(t,e){this.U(),(this.qa=e?qe(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},r.Hf=function(){return!!this.qa},r.cd=function(t,e){this.U(),this.zb=e?qe(t):t},r.If=function(){return!!this.zb},r.rb=function(t,e){this.U(),this.xa=e?qe(t,!0):t},r.Ic=function(){return!!this.xa},r.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},r.Ff=function(){return null!=this.Ca},r.ec=function(t,e){this.U(),this.K=e?qe(t,!0):t},r.ae=function(){return!!this.K},r.Gf=function(){return""!==this.P.toString()},r.bd=function(t,e){this.U(),t instanceof Ye?(this.P=t,this.P.ad(this.O)):(e||(t=Be(t,We)),this.P=new Ye(t,this.O))},r.Rd=function(){return this.P.toString()},r.getQuery=function(){return this.Rd()},r.l=function(t,e){this.U(),this.P.set(t,e)},r.dc=function(t,e){this.U(),h(e)||(e=[String(e)]),this.P.Ie(t,e)},r.$c=function(t,e){this.U(),this.ib=e?qe(t):t},r.Ef=function(){return!!this.ib},r.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),this},r.removeParameter=function(t){return this.U(),this.P.remove(t),this},r.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},r.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var He=/[#\/\?@]/g,ze=/[#\?:]/g,Qe=/[#\?]/g,We=/[#\?@]/g,Ge=/#/g;function Ye(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function Xe(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Ze(){this.od=this.$d=null}function Je(t){this.D=new Fe,t&&this.addAll(t)}function $e(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[y]||(t[y]=++m)):e.substr(0,1)+t}function tn(t,e){this.Pc=t,this.map=e,this.context=null}function en(t){this.me=t||nn,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.vc&&a.vc.ke&&a.vc.ke()&&a.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new Je),this.f=null,this.ba=[]}(r=Ye.prototype).$=function(){if(!this.m&&(this.m=new Fe,this.j=0,this.ja)){var t=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},r.C=function(){return this.$(),this.j},r.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},r.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},r.clear=function(){this.Oa(),this.m=null,this.j=0},r.X=function(){return this.$(),0==this.j},r.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},r.forEach=function(t,e){this.$(),this.m.forEach(function(n,r){N(n,function(n){t.call(e,n,r,this)},this)},this)},r.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.H=function(t){this.$();var e=[];if(s(t))this.va(t)&&(e=R(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=R(e,t[n])}return e},r.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},r.get=function(t,e){return t&&0<(t=this.H(t)).length?String(t[0]):e},r.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),M(e)),this.j+=e.length)},r.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.ja=t.join("&")},r.Oa=function(){this.ja=null},r.clone=function(){var t=new Ye;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},r.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},r.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},r.extend=function(t){for(var e=0;e<arguments.length;e++)Le(arguments[e],function(t,e){this.add(e,t)},this)},S(function(){},function(){}),(r=Xe.prototype).g=null,r.ga=function(t){this.A=t},r.connect=function(t){this.K=t,t=this.b.Sd(this.K),be(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new De(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},r.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),be(4),t?(be(10),this.b.ub(this,!1)):(be(11),this.b.ub(this,!0));else{this.f=new De(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);be(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&e.l(n,r),this.f.jd(e,!1,this.na)}},r.Jb=function(t){return this.b.Jb(t)},r.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},r.de=function(){return!1},r.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(r){return this.a.cb(r),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?be(6):"11111"==e?(be(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0))):(be(7),this.bc=!1))},r.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),be(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?be(8):1==this.g&&be(9),this.b.dd(this))},r.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.fc=function(){return this.b.fc()},r.Ba=function(){return this.b.Ba()},r.Ze=function(){return!$||10<=Number(ut)},(r=Je.prototype).C=function(){return this.D.C()},r.add=function(t){this.D.set($e(t),t)},r.addAll=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.add(t[n])},r.pb=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.remove(t[n])},r.remove=function(t){return this.D.remove($e(t))},r.clear=function(){this.D.clear()},r.X=function(){return this.D.X()},r.contains=function(t){return this.D.va($e(t))},r.H=function(){return this.D.H()},r.clone=function(){return new Je(this)};var nn=10;function rn(){this.xg=this.rg=void 0}function on(){this.jg=new rn}function an(t,e,n,r,i){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){t.cb(o)}}(r=en.prototype).ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new Je,this.f&&(this.oc(this.f),this.f=null))},r.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},r.xf=function(){return this.f?1:this.v?this.v.C():0},r.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},r.oc=function(t){this.v?this.v.add(t):this.f=t},r.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},r.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(N(this.v.H(),function(t){t.cancel()}),this.v.clear())},r.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return N(this.v.H(),function(e){t=t.concat(e.la())}),t}return M(this.ba)},r.Re=function(t){this.ba=this.ba.concat(t)},r.$e=function(){this.ba.length=0},rn.prototype.stringify=function(t){return a.JSON.stringify(t,this.rg)},rn.prototype.parse=function(t){return a.JSON.parse(t,this.xg)},on.prototype.hf=function(t,e,n){var r=n||"";try{Le(t,function(t,n){var i=t;d(t)&&(i=jt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}},on.prototype.jf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?i.push("ofs="+(r=t[0].Pc)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].Pc,u=t[a].map;if(0>(s-=r))r=Math.max(0,t[a].Pc-100),o=!1;else try{this.hf(u,i,"req"+s+"_")}catch(c){n&&n(u)}}if(o)return i.join("&")}},on.prototype.zc=function(t){return this.jg.parse(t)};var sn=a.JSON.parse;function un(t){Ut.call(this),this.headers=new Fe,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=cn,this.jc=this.lg=this.Ab=!1}S(un,Ut);var cn="";un.prototype.s=he("goog.net.XhrIo");var ln=/^https?$/i,hn=["POST","PUT"];function fn(t){return"content-type"==t.toLowerCase()}function pn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function dn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return K(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function yn(t){this.Bd=22,this.De=0,this.M=[],this.a=new de,this.Ib=new Ze,this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new en(t&&t.concurrentRequestLimit),this.kc=new on,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function mn(){}function gn(){if($&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function vn(t,e){Ut.call(this),this.b=new yn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e=r?e+i:e+"/"+i)}return e}(this.yb,"test"),this.s=he("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!L(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!L(e)&&(this.b.Dg(e),null!==(t=this.Rc)&&e in t&&(e in(t=this.Rc)&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new _n(this)}function bn(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function wn(t){xe.call(this),this.status=1,this.errorCode=t}function _n(t){this.b=t}(r=un.prototype).Je=function(t){this.Ab=t},r.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Ie.Vd(),this.c.onreadystatechange=b(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=b(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=b(this.re,this)));try{pe(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(o){return pe(this.s,this.da("Error opening Xhr: "+o.message)),void this.Ld(o)}t=n||"";var i=this.headers.clone();r&&Le(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=fn,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.W()),n=a.FormData&&t instanceof a.FormData,!(0<=k(hn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=function(t){return $&&lt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.c),pe(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=b(this.Ua,this)):this.hc=Zt(this.Ua,this.vb,this)),pe(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(o){pe(this.s,this.da("Send error: "+o.message)),this.Ld(o)}},r.df=function(){return this.Xa?this.Xa.Dd():Ie.Dd()},r.Ua=function(){void 0!==o&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,pe(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},r.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},r.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(t){this.c&&this.ha&&(pe(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},r.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),un.L.F.call(this)},r.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},r.eg=function(){this.se()},r.se=function(){if(this.ha&&void 0!==o)if(this.mc[1]&&4==this.ma()&&2==this.za())pe(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Zt(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){pe(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},r.re=function(t,e){this.dispatchEvent(pn(t,"progress")),this.dispatchEvent(pn(t,e?"downloadprogress":"uploadprogress"))},r.Gb=function(t){if(this.c){this.yd();var e=this.c,n=this.mc[0]?c:null;this.mc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(r){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+r.message,void 0)}}},r.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(a.clearTimeout(this.hc),this.hc=null)},r.Ba=function(){return!!this.c},r.Mc=function(){return 4==this.ma()},r.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},r.Of=function(){var t=String(this.Tb).match(je)[1]||null;return!t&&a.self&&a.self.location&&(t=(t=a.self.location.protocol).substr(0,t.length-1)),ln.test(t?t.toLowerCase():"")},r.ma=function(){return this.c?this.c.readyState:0},r.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(Z){return-1}},r.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(Z){return pe(this.s,"Can not get status: "+Z.message),""}},r.ya=function(){try{return this.c?this.c.responseText:""}catch(Z){return pe(this.s,"Can not get responseText: "+Z.message),""}},r.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),sn(e)}},r.getResponseHeader=function(t){if(this.c&&this.Mc())return null===(t=this.c.getResponseHeader(t))?void 0:t},r.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},r.kb=function(t){return this.c?this.c.getResponseHeader(t):null},r.Ud=function(){return this.Pa},r.Hc=function(){return s(this.I)?this.I:String(this.I)},r.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(r=yn.prototype).tc=8,r.g=1,r.connect=function(t,e,n,r,i){this.a.debug("connect()"),be(0),this.K=e,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},r.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new De(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},r.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new Xe(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=dn(t,this.N,this.A)),this.Ja.connect(e)},r.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},r.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(a.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(a.clearTimeout(this.ea),this.ea=null)},r.ga=function(t){this.A=t},r.Eg=function(t){this.Rb=t},r.Cg=function(t){this.N=t},r.Dg=function(t){this.aa=t},r.Fe=function(t){this.Kc=t},r.He=function(t){this.Ra=t},r.Hg=function(){this.gc=!0},r.Ee=function(t){this.i=t},r.Nf=function(){return!this.fd},r.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+jt(t)}),this.M.push(new tn(this.ag++,t)),3==this.g&&this.Dc()},r.qf=function(){return this.kf?0:this.nf},r.de=function(){return 0==this.g},r.getState=function(){return this.g},r.Dc=function(){this.G.ee()||this.ea||(this.ea=_e(b(this.we,this),0),this.La=0)},r.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf()||(this.a.debug("Going to retry POST"),this.ea=_e(b(this.we,this,t),this.Xd(this.La)),this.La++,0))},r.we=function(t){this.ea=null,this.Mg(t)},r.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},r.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new De(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?G(n=Q(n),this.Rb):n=this.Rb),null===this.N&&e.ga(n);var r=this.Hd(e),i=this.hb.clone();i.l("RID",t),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&dn(i,this.N,n),this.G.oc(e),this.Nd?(i.l("$req",r),i.l("SID","null"),e.Ag(),e.kd(i,null)):e.kd(i,r)},r.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&dn(n,this.N,this.A),e=new De(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},r.Ya=function(t){this.i&&Le({},function(e,n){t.l(n,e)})},r.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?b(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},r.sg=function(t){this.M=t.la().concat(this.M)},r.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;Kt||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);Kt=function(){t.then(Yt)}}else Kt=function(){var t=Yt;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!B("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Bt||(Bt=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!B("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!B("Trident")&&!B("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rd;n.rd=null,t()}},function(t){r.next={rd:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),Bt(t)):a.setImmediate(t)}}(),Wt||(Kt(),Wt=!0),Gt.add(t,this),this.Ha=0}},r.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha||(this.a.debug("Going to retry GET"),this.rc++,this.ia=_e(b(this.ve,this),this.Xd(this.Ha)),this.Ha++,0))},r.ve=function(){this.ia=null,this.Kg()},r.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new De(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&dn(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},r.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},r.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},r.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(r){n=null}h(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),L(e)||(n=this.kc.zc(e),this.dg(n,t))},r.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],0<(e=this.he-this.Sb)&&(this.a.debug((t=t[2])+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=_e(b(this.bg,this),6e3))))},r.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),be(18)}},r.Jg=function(t){return 37500>t&&!this.Nf()&&0==this.Ha},r.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},r.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),be(19))},r.Hb=function(){null!=this.wa&&(a.clearTimeout(this.wa),this.wa=null)},r.Tc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(t))return;e=t.la(),this.G.ze(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(function(t,e,n){ye.dispatchEvent(new we(ye,t,e,n))}(t.Da?t.Da.length:0,_()-t.qb,this.La),this.Dc()):this.Kd();else{var r=t.Hc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(t,e){switch(r){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(0,i.w)}),1==n&&this.Yf(t)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Re(e),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},r.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},r.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},r.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},r.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=b(this.Pg,this);e||(e=new Ve("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e.tb("https"),e.Ub()),function(t,e){var n=new de;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=w(an,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(an,n,r,"TestLoadImage: error",!1,e),r.onabort=w(an,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(an,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}(e.toString(),n)}else be(2);this.cg(t)},r.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),be(2)):(this.a.info("Failed to ping google.com"),be(1))},r.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},r.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),M(this.M),this.M.length=0}this.i.sd()}},r.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},r.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},r.Cd=function(t,e){var n=function(t){return t instanceof Ve?t.clone():new Ve(t,void 0)}(e);if(""!=n.xa)t&&n.rb(t+"."+n.xa),n.sb(n.Ca);else{var r=a.location;n=function(t,e,n,r){var i=new Ve(null,void 0);return t&&i.tb(t),e&&i.rb(e),n&&i.sb(n),r&&i.ec(r),i}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return this.gb&&K(this.gb,function(t,e){n.l(e,t)}),e=this.Kc,(t=this.aa)&&e&&n.l(t,e),n.l("VER",this.tc),this.Ya(n),n},r.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new un(this.Xa)).Je(this.gc),t},r.Ba=function(){return!!this.i&&this.i.Ba()},r.fc=function(){return this.gc},(r=mn.prototype).sc=null,r.wd=function(){},r.ud=function(){},r.td=function(){},r.sd=function(){},r.Ba=function(){return!0},r.Ue=function(){},r.$a=function(t){return t},gn.prototype.cf=function(t,e){return new vn(t,e)},S(vn,Ut),(r=vn.prototype).addEventListener=function(t,e,n,r){vn.L.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){vn.L.removeEventListener.call(this,t,e,n,r)},r.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},r.close=function(){this.b.disconnect()},r.send=function(t){if(s(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?((e={}).__data__=jt(t),this.b.Zc(e)):this.b.Zc(t)},r.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,vn.L.F.call(this)},S(bn,ke),S(wn,xe),S(_n,mn),_n.prototype.wd=function(){fe(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},_n.prototype.ud=function(t){this.b.dispatchEvent(new bn(t))},_n.prototype.td=function(t){fe(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new wn(t))},_n.prototype.sd=function(){fe(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var Sn=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},gn);function En(){this.V=[],this.Z=[]}function Tn(t,e){if(C.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Cn);this.fa=new En,this.oa=new Je,this.Ac=0,this.Nc=null,this.Cb()}(r=En.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},r.enqueue=function(t){this.Z.push(t)},r.ab=function(){return this.Vf(),this.V.pop()},r.C=function(){return this.V.length+this.Z.length},r.X=function(){return 0==this.V.length&&0==this.Z.length},r.clear=function(){this.V=[],this.Z=[]},r.contains=function(t){return 0<=k(this.V,t)||0<=k(this.Z,t)},r.remove=function(t){var e=this.V,n=x(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||P(this.Z,t)},r.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},S(Tn,C);var Cn="[goog.structs.Pool] Min can not be greater than max";function In(t,e){this.fe=t,this.gd=e}function An(t){this.Y=[],t&&this.Lf(t)}function kn(){An.call(this)}function xn(t,e){this.Gd=void 0,this.cc=new kn,Tn.call(this,t,e)}function Nn(t,e,n,r){this.Jf=t,this.Ab=!!r,xn.call(this,e,n)}(r=Tn.prototype).Mb=function(){var t=_();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},r.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},r.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},r.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},r.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},r.xc=function(){return{}},r.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},r.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},r.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},r.C=function(){return this.fa.C()+this.oa.C()},r.rf=function(){return this.oa.C()},r.Td=function(){return this.fa.C()},r.X=function(){return this.fa.X()&&this.oa.X()},r.F=function(){if(Tn.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},In.prototype.getKey=function(){return this.fe},In.prototype.clone=function(){return new In(this.fe,this.gd)},(r=An.prototype).ce=function(t,e){var n=this.Y;n.push(new In(t,e)),this.$f(n.length-1)},r.Lf=function(t){if(t instanceof An){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,r=0;r<e.length;r++)n.push(new In(e[r],t[r]));return}}else e=z(t),t=H(t);for(r=0;r<e.length;r++)this.ce(e[r],t[r])},r.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?O(t):(t[0]=t.pop(),this.Zf()),n.gd},r.Zf=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.tf(t),o=this.zf(t);if(i=o<n&&e[o].getKey()<e[i].getKey()?o:i,e[i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},r.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.wf(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},r.tf=function(t){return 2*t+1},r.zf=function(t){return 2*t+2},r.wf=function(t){return t-1>>1},r.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].gd);return e},r.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},r.va=function(t){return D(this.Y,function(e){return e.getKey()==t})},r.clone=function(){return new An(this)},r.C=function(){return this.Y.length},r.X=function(){return 0==this.Y.length},r.clear=function(){O(this.Y)},S(kn,An),kn.prototype.enqueue=function(t,e){this.ce(t,e)},kn.prototype.ab=function(){return this.remove()},S(xn,Tn),(r=xn.prototype).Mb=function(t,e){if(!t)return(t=xn.L.Mb.call(this))&&this.Ac&&(this.Gd=a.setTimeout(b(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},r.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},r.nc=function(t){xn.L.nc.call(this,t),this.Nb()},r.Cb=function(){xn.L.Cb.call(this),this.Nb()},r.F=function(){xn.L.F.call(this),a.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},S(Nn,xn),Nn.prototype.xc=function(){var t=new un,e=this.Jf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Ab&&t.Je(!0),t},Nn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},gn.prototype.createWebChannel=gn.prototype.cf,vn.prototype.send=vn.prototype.send,vn.prototype.open=vn.prototype.open,vn.prototype.close=vn.prototype.close,Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ee.COMPLETE="complete",Ce.EventType=Ae,Ae.OPEN="a",Ae.CLOSE="b",Ae.ERROR="c",Ae.MESSAGE="d",Ut.prototype.listen=Ut.prototype.nb,Nn.prototype.getObject=Nn.prototype.Mb,Nn.prototype.releaseObject=Nn.prototype.og,un.prototype.listenOnce=un.prototype.Oc,un.prototype.getLastError=un.prototype.Hc,un.prototype.getLastErrorCode=un.prototype.Ud,un.prototype.getStatus=un.prototype.za,un.prototype.getStatusText=un.prototype.Yd,un.prototype.getResponseJson=un.prototype.yf,un.prototype.getResponseText=un.prototype.ya,un.prototype.getResponseText=un.prototype.ya,un.prototype.send=un.prototype.send;var Dn={createWebChannelTransport:Sn,ErrorCode:Se,EventType:Ee,WebChannel:Ce,XhrIoPool:Nn},On=Dn.createWebChannelTransport,Pn=Dn.ErrorCode,Rn=Dn.EventType,Mn=Dn.WebChannel,Ln=Dn.XhrIoPool;e.default=Dn},xGvh:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},xrBK:function(t,e,n){var r=n("UFGs"),i=n("Rbo/"),o=n("kSm0"),a=n("ifzb")("IE_PROTO"),s=function(){},u=function(){var t,e=n("y6nS")("iframe"),r=o.length;for(e.style.display="none",n("yI25").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},y6nS:function(t,e,n){var r=n("Zp05"),i=n("qtiw").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},yI25:function(t,e,n){var r=n("qtiw").document;t.exports=r&&r.documentElement},yLjp:function(t,e,n){n("u00B")("asyncIterator")},ytDL:function(t,e,n){var r=n("UFGs"),i=n("q098"),o=n("IiNp"),a=Object.defineProperty;e.f=n("lIov")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},zGGa:function(t,e,n){for(var r=n("U8mZ"),i=n("9Aud"),o=n("TDVo"),a=n("qtiw"),s=n("GYIZ"),u=n("Qtk+"),c=n("jZgK"),l=c("iterator"),h=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),y=0;y<d.length;y++){var m,g=d[y],v=p[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,f),w[h]||s(w,h,g),u[g]=f,v))for(m in r)w[m]||o(w,m,r[m],!0)}},zUnb:function(t,e,n){"use strict";n.r(e);var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}var h=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!=t&&"object"==typeof t}function p(t){return"function"==typeof t}var d,y={e:{}};function m(){try{return d.apply(this,arguments)}catch(t){return y.e=t,y}}function g(t){return d=t,m}function v(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}v.prototype=Object.create(Error.prototype);var b=v,w=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(p(i)&&g(i).call(this)===y&&(e=!0,t=t||(y.e instanceof b?_(y.e.errors):[y.e])),h(o))for(a=-1,s=o.length;++a<s;){var u=o[a];if(f(u)&&g(u.unsubscribe).call(u)===y){e=!0,t=t||[];var c=y.e;c instanceof b?t=t.concat(_(c.errors)):t.push(c)}}if(e)throw new b(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function _(t){return t.reduce(function(t,e){return t.concat(e instanceof b?e.errors:e)},[])}var S=!1,E={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){S=t},get useDeprecatedSynchronousErrorHandling(){return S}};function T(t){setTimeout(function(){throw t})}var C={closed:!0,next:function(t){},error:function(t){if(E.useDeprecatedSynchronousErrorHandling)throw t;T(t)},complete:function(){}},I="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),A=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=C;break;case 1:if(!n){o.destination=C;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new k(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new k(o,n,r,i)}return o}return i(e,t),e.prototype[I]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(w),k=function(t){function e(e,n,r,i){var o,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return p(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==C&&(p((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;E.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=E.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):T(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;T(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};E.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),E.useDeprecatedSynchronousErrorHandling)throw n;T(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!E.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return E.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(T(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(A),x="function"==typeof Symbol&&Symbol.observable||"@@observable";function N(){}function D(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O(t)}function O(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:N}var P=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof A)return t;if(t[I])return t[I]()}return t||e||n?new A(t,e,n):new A(C)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||E.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),E.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){E.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof A?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=R(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[x]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:O(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=R(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function R(t){if(t||(t=E.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function M(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}M.prototype=Object.create(Error.prototype);var L=M,F=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(w),U=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(A),j=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[I]=function(){return new U(this)},e.prototype.lift=function(t){var e=new V(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new L;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new L;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new L;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new L;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new L;return this.hasError?(t.error(this.thrownError),w.EMPTY):this.isStopped?(t.complete(),w.EMPTY):(this.observers.push(t),new F(this,t))},e.prototype.asObservable=function(){var t=new P;return t.source=this,t},e.create=function(t,e){return new V(t,e)},e}(P),V=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):w.EMPTY},e}(j);function q(t){return t&&"function"==typeof t.schedule}var B=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(A),K=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},H=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,T),e}};function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Q=z(),W=function(t){return function(e){for(var n=t[Q]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},G=function(t){return function(e){var n=t[x]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Y=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function X(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Z=function(t){if(t instanceof P)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[x])return G(t);if(Y(t))return K(t);if(X(t))return H(t);if(t&&"function"==typeof t[Q])return W(t);var e=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function J(t,e,n,r,i){if(void 0===i&&(i=new B(t,n,r)),!i.closed)return Z(e)(i)}var $=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(A);function tt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new et(t,e))}}var et=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new nt(t,this.project,this.thisArg))},t}(),nt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(A);function rt(t,e){return new P(e?function(n){var r=new w,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:K(t))}function it(t,e){if(!e)return t instanceof P?t:new P(Z(t));if(null!=t){if(function(t){return t&&"function"==typeof t[x]}(t))return function(t,e){return new P(e?function(n){var r=new w;return r.add(e.schedule(function(){var i=t[x]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:G(t))}(t,e);if(X(t))return function(t,e){return new P(e?function(n){var r=new w;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:H(t))}(t,e);if(Y(t))return rt(t,e);if(function(t){return t&&"function"==typeof t[Q]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new P(e?function(n){var r,i=new w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[Q](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:W(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function ot(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(ot(function(n,r){return it(t(n,r)).pipe(tt(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new at(t,n))})}var at=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new st(t,this.project,this.concurrent))},t}(),st=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new B(this,void 0,void 0);this.destination.add(r),J(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}($);function ut(t){return t}function ct(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),ot(ut,t)}function lt(){return function(t){return t.lift(new ht(t))}}var ht=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new ft(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),ft=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(A),pt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new w).add(this.source.subscribe(new yt(this.getSubject(),this))),t.closed?(this._connection=null,t=w.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return lt()(this)},e}(P).prototype,dt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:pt._subscribe},_isComplete:{value:pt._isComplete,writable:!0},getSubject:{value:pt.getSubject},connect:{value:pt.connect},refCount:{value:pt.refCount}},yt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(U);function mt(){return new j}function gt(){return function(t){return lt()((e=mt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,dt);return r.source=t,r.subjectFactory=n,r})(t));var e}}function vt(t){for(var e in t)if(t[e]===vt)return e;throw Error("Could not find renamed property on target object.")}function bt(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var wt=vt({ngInjectableDef:vt}),_t=vt({ngBaseDef:vt});function St(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Et(t){return t&&t.hasOwnProperty(wt)?t[wt]:null}var Tt=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?St({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),Ct="__parameters__",It="__prop__metadata__";function At(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,l(e));for(var i in r)this[i]=r[i]}}}function kt(t,e,n){var r=At(e);function i(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=new((t=i).bind.apply(t,l([void 0],e)));return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty(Ct)?t[Ct]:Object.defineProperty(t,Ct,{value:[]})[Ct];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}function xt(t,e,n,r){var i=At(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,l([void 0],e)));return function(t,n){var i=t.constructor,o=i.hasOwnProperty(It)?i[It]:Object.defineProperty(i,It,{value:{}})[It];o[n]=o.hasOwnProperty(n)&&o[n]||[],o[n].unshift(a),r&&r.apply(void 0,l([t,n],e))}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}var Nt=new Tt("AnalyzeForEntryComponents"),Dt="undefined"!=typeof window&&window,Ot="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt="undefined"!=typeof global&&global||Dt||Ot,Rt=Promise.resolve(0),Mt=null;function Lt(){if(!Mt){var t=Pt.Symbol;if(t&&t.iterator)Mt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Mt=r)}}return Mt}function Ft(t){"undefined"==typeof Zone?Rt.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Ut(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function jt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(jt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var Vt=vt({__forward_ref__:vt});function qt(t){return t.__forward_ref__=qt,t.toString=function(){return jt(this())},t}function Bt(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(Vt)&&e.__forward_ref__===qt?e():t}var Kt,Ht=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),zt=kt("Inject",function(t){return{token:t}}),Qt=kt("Optional"),Wt=kt("Self"),Gt=kt("SkipSelf"),Yt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({}),Xt=void 0;function Zt(t){var e=Xt;return Xt=t,e}function Jt(t,e){return void 0===e&&(e=Yt.Default),(Kt||function(t,e){if(void 0===e&&(e=Yt.Default),void 0===Xt)throw new Error("inject() must be called from an injection context");return null===Xt?function(t,e,n){var r=Et(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&Yt.Optional)return null;throw new Error("Injector: NOT_FOUND ["+jt(t)+"]")}(t,0,e):Xt.get(t,e&Yt.Optional?null:void 0,e)})(t,e)}var $t=/([A-Z])/g;function te(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function ee(t,e){var n=ie(t),r=ie(e);return n&&r?function(t,e,n){for(var r=t[Lt()](),i=e[Lt()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,ee):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||Ut(t,e)}var ne=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),re=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function ie(t){return!!oe(t)&&(Array.isArray(t)||!(t instanceof Map)&&Lt()in t)}function oe(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var se="__source",ue=new Object,ce=ue,le=new Tt("INJECTOR"),he=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=ue),e===ue)throw new Error("NullInjectorError: No provider for "+jt(t)+"!");return e},t}(),fe=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Se(t,e):new Se(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=ue,t.NULL=new he,t.ngInjectableDef=St({providedIn:"any",factory:function(){return Jt(le)}}),t.__NG_ELEMENT_ID__=function(){return pe()},t}(),pe=ae,de=function(t){return t},ye=[],me=de,ge=function(){return Array.prototype.slice.call(arguments)},ve=vt({provide:String,useValue:vt}),be=fe.NULL,we=/\n/gm,_e="\u0275",Se=function(){function t(t,e,n){void 0===e&&(e=be),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(fe,{token:fe,fn:de,deps:ye,value:this,useNew:!1}),r.set(le,{token:le,fn:de,deps:ye,value:this,useNew:!1}),function t(e,n){if(n)if((n=Bt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Ce("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ce("Unexpected provider",n);var i=Bt(n.provide),o=function(t){var e=function(t){var e=ye,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=Bt(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof Qt||s==Qt?i|=1:s instanceof Gt||s==Gt?i&=-3:s instanceof Wt||s==Wt?i&=-5:u=s instanceof zt?s.token:Bt(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=Bt(t.useExisting),options:6}]}else if(!(n||ve in t))throw Ce("'deps' required",t);return e}(t),n=de,r=ye,i=!1,o=Bt(t.provide);if(ve in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=Bt(t.useClass);else{if("function"!=typeof o)throw Ce("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==ge)throw Ee(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:ge,value:ye});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==ge)throw Ee(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=Yt.Default);var r=this._records.get(t);try{return function t(e,n,r,i,o,a){try{return function(e,n,r,i,o,a){var s,u;if(!n||a&Yt.SkipSelf)a&Yt.Self||(u=i.get(e,o,Yt.Default));else{if((u=n.value)==me)throw Error(_e+"Circular dependency");if(u===ye){n.value=me;var c=n.useNew,h=n.fn,f=n.deps,p=ye;if(f.length){p=[];for(var d=0;d<f.length;d++){var y=f[d],m=y.options,g=2&m?r.get(y.token):void 0;p.push(t(y.token,g,r,g||4&m?i:be,1&m?null:fe.THROW_IF_NOT_FOUND,Yt.Default))}}n.value=u=c?new((s=h).bind.apply(s,l([void 0],p))):h.apply(void 0,p)}}return u}(e,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==me&&(n.value=ye),s}}(t,r,this._records,this.parent,e,n)}catch(o){var i=o.ngTempTokenPath;throw t[se]&&i.unshift(t[se]),o.message=Te("\n"+o.message,i,this.source),o.ngTokenPath=i,o.ngTempTokenPath=null,o}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(jt(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Ee(t){return Ce("Cannot mix multi providers and regular providers",t)}function Te(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==_e?t.substr(2):t;var r=jt(e);if(e instanceof Array)r=e.map(jt).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):jt(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(we,"\n  ")}function Ce(t,e){return new Error(Te(t,e))}var Ie=new Tt("The presence of this token marks an injector as being the root injector."),Ae=function(){return function(){}}(),ke=function(){return function(){}}();function xe(t){var e=Error("No component factory found for "+jt(t)+". Did you add it to @NgModule.entryComponents?");return e[Ne]=t,e}var Ne="ngComponent",De=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw xe(t)},t}(),Oe=function(){function t(){}return t.NULL=new De,t}(),Pe=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw xe(t);return new Re(e,this._ngModule)},t}(),Re=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return i(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(ke),Me=function(){return function(){}}(),Le=function(){return function(){}}(),Fe=function(){function t(t){this.nativeElement=t}return t.__NG_ELEMENT_ID__=function(){return Ue(t)},t}(),Ue=ae,je=function(){return function(){}}(),Ve=function(){return function(){}}(),qe=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Be=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return Ke()},t}(),Ke=ae,He=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),ze=function(){return function(){}}(),Qe=new(function(){return function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}())("7.2.4"),We=!0,Ge=!1;function Ye(){return Ge=!0,We}var Xe=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),Ze=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Je=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $e(t){return(t=String(t)).match(Ze)||t.match(Je)?t:(Ye()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function tn(t){var e,n,r={};try{for(var i=u(t.split(",")),o=i.next();!o.done;o=i.next())r[o.value]=!0}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function en(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};try{for(var o=u(n),a=o.next();!a.done;a=o.next()){var s=a.value;for(var c in s)s.hasOwnProperty(c)&&(i[c]=!0)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i}var nn,rn=tn("area,br,col,hr,img,wbr"),on=tn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),an=tn("rp,rt"),sn=en(an,on),un=en(rn,en(on,tn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),en(an,tn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sn),cn=tn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ln=tn("srcset"),hn=en(cn,ln,tn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),fn=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e,n=t.nodeName.toLowerCase();if(!un.hasOwnProperty(n))return this.sanitizedSomething=!0,!1;this.buf.push("<"),this.buf.push(n);for(var r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(hn.hasOwnProperty(s)){var u=o.value;cn[s]&&(u=$e(u)),ln[s]&&(e=u,u=(e=String(e)).split(",").map(function(t){return $e(t.trim())}).join(", ")),this.buf.push(" ",a,'="',yn(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();un.hasOwnProperty(e)&&!rn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(yn(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),pn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dn=/([^\#-~ |!])/g;function yn(t){return t.replace(/&/g,"&amp;").replace(pn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(dn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return i(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,i,o,a);return e instanceof w&&e.add(s),s},e}(j),vn=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return bn(t,Fe)},t}(),bn=ae,wn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),_n=/^url\(([^)]+)\)$/,Sn=function(){return function(){}}(),En=Function;function Tn(t){return"function"==typeof t}var Cn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,In=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,An=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,kn=function(){function t(t){this._reflect=t||Pt.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,l([void 0],e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n=void 0===t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){var n=t.toString();if(Cn.exec(n)||In.exec(n)&&!An.exec(n))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var r=t.ctorParameters;if(r&&r!==e.ctorParameters){var i="function"==typeof r?r():r,o=i.map(function(t){return t&&t.type}),a=i.map(function(t){return t&&xn(t.decorators)});return this._zipTypesAndAnnotations(o,a)}var s=t.hasOwnProperty(Ct)&&t[Ct],u=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return u||s?this._zipTypesAndAnnotations(u,s):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!Tn(t))return[];var e=Nn(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?xn(t.decorators):t.hasOwnProperty("__annotations__")?t.__annotations__:null},t.prototype.annotations=function(t){if(!Tn(t))return[];var e=Nn(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=xn(r[t])}),i}return t.hasOwnProperty(It)?t[It]:null},t.prototype.propMetadata=function(t){if(!Tn(t))return{};var e=Nn(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach(function(t){n[t]=r[t]})}var i=this._ownPropMetadata(t,e);return i&&Object.keys(i).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,l(n[t])),e.push.apply(e,l(i[t])),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof En&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+jt(t)},t.prototype.resourceUri=function(t){return"./"+jt(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function xn(t){return t?t.map(function(t){var e=t.type.annotationCls;return new(e.bind.apply(e,l([void 0],t.args?t.args:[])))}):[]}function Nn(t){var e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}var Dn=xt("Input",function(t){return{bindingPropertyName:t}},void 0,function(t){return function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.constructor;i.hasOwnProperty(_t)||function(t){var e=t.constructor,n=e.ngBaseDef,r=e.ngBaseDef={inputs:{},outputs:{},declaredInputs:{}};n&&(bt(r.inputs,n.inputs),bt(r.outputs,n.outputs),bt(r.declaredInputs,n.declaredInputs))}(t),(function(t){return t.inputs||{}}(i.ngBaseDef))[e]=n[0]}}()),On=xt("HostBinding",function(t){return{hostPropertyName:t}}),Pn="ngDebugContext",Rn="ngOriginalError",Mn="ngErrorLogger";function Ln(t){return t[Pn]}function Fn(t){return t[Rn]}function Un(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,l(e))}var jn=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[Mn]||Un}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?Ln(t)?Ln(t):this._findContext(Fn(t)):null},t.prototype._findOriginalError=function(t){for(var e=Fn(t);e&&Fn(e);)e=Fn(e);return e},t}();function Vn(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return jt(t.token)}).join(" -> ")+")":""}function qn(t,e,n,r){var i=[e],o=n(i),a=r?function(t,e){var n=o+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r[Rn]=e,r}(0,r):Error(o);return a.addKey=Bn,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a[Rn]=r,a}function Bn(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Kn(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push(o&&0!=o.length?o.map(jt).join(" "):"?")}return Error("Cannot resolve all parameters for '"+jt(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+jt(t)+"' is decorated with Injectable.")}var Hn=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=jt(this.token)}return t.get=function(t){return zn.get(Bt(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return zn.numberOfKeys},enumerable:!0,configurable:!0}),t}(),zn=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof Hn)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new Hn(t,Hn.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),Qn=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new kn),Wn=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),Gn=[],Yn=function(){return function(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}(),Xn=function(){return function(t,e){this.factory=t,this.dependencies=e}}();function Zn(t){var e,n;if(t.useClass){var r=Bt(t.useClass);e=Qn.factory(r),n=$n(r)}else t.useExisting?(e=function(t){return t},n=[Wn.fromKey(Hn.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return tr(t,e,n)})}return $n(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=Gn);return new Xn(e,n)}function Jn(t){return new Yn(Hn.get(t.provide),[Zn(t)],t.multi||!1)}function $n(t){var e=Qn.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw Kn(t,e);return e.map(function(n){return tr(t,n,e)})}function tr(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return er(e instanceof zt?e.token:e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof En?r=s:s instanceof zt?r=s.token:s instanceof Qt?i=!0:s instanceof Wt||s instanceof Gt?o=s:s instanceof Tt&&(r=s)}if(null!=(r=Bt(r)))return er(r,i,o);throw Kn(t,n)}function er(t,e,n){return new Wn(Hn.get(t),e,n)}var nr=new Object,rr=function(){function t(){}return t.resolve=function(t){return function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new Yn(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(function t(e,n){return e.forEach(function(e){if(e instanceof En)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(Jn),new Map);return Array.from(e.values())}(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new ir(t,e)},t}(),ir=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=nr}return t.prototype.get=function(t,e){return void 0===e&&(e=ce),this._getByKey(Hn.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=rr.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n.parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(rr.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw qn(this,t.key,function(t){return"Cannot instantiate cyclic dependency!"+Vn(t)});return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r,i,o=this,a=e.factory;try{n=e.dependencies.map(function(t){return o._getByReflectiveDependency(t)})}catch(s){throw s.addKey&&s.addKey(this,t.key),s}try{r=a.apply(void 0,l(n))}catch(s){throw qn(this,t.key,function(t){var e=jt(t[0].token);return i.message+": Error during instantiation of "+e+"!"+Vn(t)+"."},i=s)}return r},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:ce)},t.prototype._getByKey=function(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof Wt?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===nr&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return nr},t.prototype._throwOrNull=function(t,e){if(e!==ce)return e;throw function(t,e){return qn(t,e,function(t){return"No provider for "+jt(t[0].token)+"!"+Vn(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==nr?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof Gt?this.parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==nr)return a;i=o.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=Hn.get(fe),t}();function or(t){return!!t&&"function"==typeof t.then}function ar(t){return!!t&&"function"==typeof t.subscribe}var sr=new Tt("Application Initializer"),ur=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();or(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),cr=new Tt("AppId");function lr(){return""+hr()+hr()+hr()}function hr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var fr=new Tt("Platform Initializer"),pr=new Tt("Platform ID"),dr=new Tt("appBootstrapListener"),yr=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function mr(){throw new Error("Runtime compiler is not loaded")}var gr,vr,br=mr,wr=mr,_r=mr,Sr=mr,Er=function(){function t(){this.compileModuleSync=br,this.compileModuleAsync=wr,this.compileModuleAndAllComponentsSync=_r,this.compileModuleAndAllComponentsAsync=Sr}return t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Tr=function(){return function(){}}();function Cr(){var t=Pt.wtf;return!(!t||!(gr=t.trace)||(vr=gr.events,0))}var Ir=Cr();function Ar(t,e){return null}var kr=Ir?function(t,e){return void 0===e&&(e=null),vr.createScope(t,e)}:function(t,e){return Ar},xr=Ir?function(t,e){return gr.leaveScope(t,e),e}:function(t,e){return e},Nr=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gn(!1),this.onMicrotaskEmpty=new gn(!1),this.onStable=new gn(!1),this.onError=new gn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return Rr(e),t.invokeTask(r,i,o,a)}finally{Mr(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return Rr(e),t.invoke(r,i,o,a,s)}finally{Mr(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,Pr(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Or,Dr,Dr);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Dr(){}var Or={};function Pr(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Rr(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Mr(t){t._nesting--,Pr(t)}var Lr,Fr=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gn,this.onMicrotaskEmpty=new gn,this.onStable=new gn,this.onError=new gn}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Ur=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){e.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Nr.assertNotInAngularZone(),Ft(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())Ft(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),jr=function(){function t(){this._applications=new Map,Vr.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Vr.findTestabilityInTree(this,t,e)},a([s("design:paramtypes",[])],t)}(),Vr=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),qr=new Tt("AllowMultipleToken"),Br=function(){return function(t,e){this.name=t,this.token=e}}();function Kr(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new Tt(r);return function(e){void 0===e&&(e=[]);var o=Hr();if(!o||o.injector.get(qr,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Lr&&!Lr.destroyed&&!Lr.injector.get(qr,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Lr=t.get(zr);var e=t.get(fr,null);e&&e.forEach(function(t){return t()})}(fe.create({providers:a,name:r}))}return function(t){var e=Hr();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hr(){return Lr&&!Lr.destroyed?Lr:null}var zr=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new Fr:("zone.js"===n?void 0:n)||new Nr({enableLongStackTrace:Ye()}),o=[{provide:Nr,useValue:i}];return i.run(function(){var e=fe.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(jn,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Gr(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(ur)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return or(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=Qr({},e);return function(t,e,n){return t.get(Tr).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then(function(t){return n.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(Wr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+jt(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Qr(t,e){return Array.isArray(e)?e.reduce(Qr,t):o({},t,e)}var Wr=function(){function t(t,e,n,r,i,o){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ye(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new P(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new P(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){Nr.assertNotInAngularZone(),Ft(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){Nr.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return q(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof P?t[0]:ct(n)(rt(t,r))}(s,u.pipe(gt()))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ke?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Re?null:this._injector.get(Me),o=n.create(fe.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(Ur,null);return a&&o.injector.get(jr).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Ye()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(r){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(r)})}finally{this._runningTick=!1,xr(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;Gr(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(dr,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),Gr(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=kr("ApplicationRef#tick()"),t}();function Gr(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Yr=function(){function t(){this.dirty=!0,this._results=[],this.changes=new gn,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[Lt()]=function(){return this._results[Lt()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Xr=function(){return function(){}}(),Zr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Jr=function(){function t(t,e){this._compiler=t,this._config=e||Zr}return t.prototype.load=function(t){return this._compiler instanceof Er?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=c(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("crnd")(i).then(function(t){return t[o]}).then(function(t){return $r(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=c(t.split("#"),2),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return $r(t,r,i)})},t}();function $r(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var ti=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return ei(t,Fe)},t}(),ei=ae,ni=function(){function t(){}return t.__NG_ELEMENT_ID__=function(){return ri()},t}(),ri=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},ii=function(){return function(t,e){this.name=t,this.callback=e}}(),oi=function(){function t(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof ai&&e.addChild(this)}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),ai=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return i(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,l([i+1,0],e)),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof ai&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof ai&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof ai&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(oi),si=new Map,ui=function(t){return si.get(t)||null};function ci(t){si.set(t.nativeNode,t)}var li=function(){function t(){}return t.prototype.supports=function(t){return ie(t)},t.prototype.create=function(t){return new fi(t)},t}(),hi=function(t,e){return e},fi=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||hi}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<mi(n,r,i)?e:n,a=mi(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!ie(t))throw new Error("Error trying to diff '"+jt(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&Ut(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Ut(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[Lt()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Ut(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Ut(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ut(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ut(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new pi(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new yi),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yi),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),pi=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),di=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ut(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),yi=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new di,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function mi(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var gi=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||oe(t)},t.prototype.create=function(){return new vi},t}(),vi=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||oe(t)))throw new Error("Error trying to diff '"+jt(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new bi(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Ut(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),bi=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),wi=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Gt,new Qt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=St({providedIn:"root",factory:function(){return new t([new li])}}),t}(),_i=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Gt,new Qt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t.ngInjectableDef=St({providedIn:"root",factory:function(){return new t([new gi])}}),t}(),Si=[new gi],Ei=new wi([new li]),Ti=new _i(Si),Ci=Kr(null,"core",[{provide:pr,useValue:"unknown"},{provide:zr,deps:[fe]},{provide:jr,deps:[]},{provide:yr,deps:[]}]),Ii=new Tt("LocaleId");function Ai(){return Ei}function ki(){return Ti}function xi(t){return t||"en-US"}var Ni=function(){return function(t){}}();function Di(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Oi(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Pi(t,e){return t.nodes[e]}function Ri(t,e){return t.nodes[e]}function Mi(t,e){return t.nodes[e]}function Li(t,e){return t.nodes[e]}function Fi(t,e){return t.nodes[e]}var Ui={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function ji(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Vi(n,e),n}(i,t)}function Vi(t,e){t[Pn]=e,t[Mn]=e.logError.bind(e)}function qi(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Bi=function(){},Ki=new Map;function Hi(t){var e=Ki.get(t);return e||(e=jt(t)+"_"+Ki.size,Ki.set(t,e)),e}var zi="$$undefined",Qi="$$empty";function Wi(t){return{id:zi,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Gi=0;function Yi(t,e,n,r){return!(!(2&t.state)&&Ut(t.oldValues[e.bindingIndex+n],r))}function Xi(t,e,n,r){return!!Yi(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Zi(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!ee(i,r)){var o=e.bindings[n].name;throw ji(Ui.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function Ji(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function $i(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function to(t,e,n,r){try{return Ji(33554432&t.def.nodes[e].flags?Ri(t,e).componentView:t),Ui.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function eo(t){return t.parent?Ri(t.parent,t.parentNodeDef.nodeIndex):null}function no(t){return t.parent?t.parentNodeDef.parent:null}function ro(t,e){switch(201347067&e.flags){case 1:return Ri(t,e.nodeIndex).renderElement;case 2:return Pi(t,e.nodeIndex).renderText}}function io(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function oo(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ao(t){return 1<<t%32}function so(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=c(t,2),o=i[0],a=i[1];"number"==typeof o?(e[o]=a,n|=ao(o)):r[o]=a}),{matchedQueries:e,references:r,matchedQueryIds:n}}function uo(t,e){return t.map(function(t){var n,r,i;return Array.isArray(t)?(i=(n=c(t,2))[0],r=n[1]):(i=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,se,{value:e,configurable:!0}),{flags:i,token:r,tokenKey:Hi(r)}})}function co(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ht.Native?Ri(t,n.renderParent.nodeIndex).renderElement:void 0:e}var lo=new WeakMap;function ho(t){var e=lo.get(t);return e||((e=t(function(){return Bi})).factory=t,lo.set(t,e)),e}function fo(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(ro(t,t.def.lastRenderRootNode))),po(t,e,0,t.def.nodes.length-1,n,r,i)}function po(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&mo(t,u,e,i,o,a),s+=u.childCount}}function yo(t,e,n,r,i,o){for(var a=t;a&&!io(a);)a=a.parent;for(var s=a.parent,u=no(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===e&&mo(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(l=0;l<f.length;l++)go(t,f[l],n,r,i,o)}}function mo(t,e,n,r,i,o){if(8&e.flags)yo(t,e.ngContent.index,n,r,i,o);else{var a=ro(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&go(t,a,n,r,i,o),32&e.bindingFlags&&go(Ri(t,e.nodeIndex).componentView,a,n,r,i,o)):go(t,a,n,r,i,o),16777216&e.flags)for(var s=Ri(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)fo(s[u],n,r,i,o);1&e.flags&&!e.element.name&&po(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function go(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var vo=/^:([^:]+):(.+)$/;function bo(t){if(":"===t[0]){var e=t.match(vo);return[e[1],e[2]]}return["",t]}function wo(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function _o(t,e,n,r,i,o,a,s,u,c,l,h,f,p,d,y,m,g,v,b){switch(t){case 1:return e+So(n)+r;case 2:return e+So(n)+r+So(i)+o;case 3:return e+So(n)+r+So(i)+o+So(a)+s;case 4:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c;case 5:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c+So(l)+h;case 6:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c+So(l)+h+So(f)+p;case 7:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c+So(l)+h+So(f)+p+So(d)+y;case 8:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c+So(l)+h+So(f)+p+So(d)+y+So(m)+g;case 9:return e+So(n)+r+So(i)+o+So(a)+s+So(u)+c+So(l)+h+So(f)+p+So(d)+y+So(m)+g+So(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function So(t){return null!=t?t.toString():""}function Eo(t,e,n,r,i,o){t|=1;var a=so(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ho(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Bi},provider:null,text:null,query:null,ngContent:null}}function To(t,e,n,r,i,o,a,s,u,l,h,f){var p;void 0===a&&(a=[]),l||(l=Bi);var d=so(n),y=d.matchedQueries,m=d.references,g=d.matchedQueryIds,v=null,b=null;o&&(v=(p=c(bo(o),2))[0],b=p[1]),s=s||[];for(var w=new Array(s.length),_=0;_<s.length;_++){var S=c(s[_],3),E=S[0],T=S[2],C=c(bo(S[1]),2),I=C[0],A=C[1],k=void 0,x=void 0;switch(15&E){case 4:x=T;break;case 1:case 8:k=T}w[_]={flags:E,ns:I,name:A,nonMinifiedName:A,securityContext:k,suffix:x}}u=u||[];var N=new Array(u.length);for(_=0;_<u.length;_++){var D=c(u[_],2);N[_]={type:0,target:D[0],eventName:D[1],propName:null}}var O=(a=a||[]).map(function(t){var e=c(t,2),n=e[1],r=c(bo(e[0]),2);return[r[0],r[1],n]});return f=function(t){if(t&&t.id===zi){var e=null!=t.encapsulation&&t.encapsulation!==Ht.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Gi++:Qi}return t&&t.id===Qi&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:y,matchedQueryIds:g,references:m,ngContentIndex:r,childCount:i,bindings:w,bindingFlags:wo(w),outputs:N,element:{ns:v,name:b,attrs:O,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:l||Bi},provider:null,text:null,query:null,ngContent:null}}function Co(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=co(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===Ht.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var l=c(i.attrs[u],3);a.setAttribute(r,l[1],l[2],l[0])}return r}function Io(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Ao(t,n.nodeIndex,(h=o.eventName,(l=o.target)?l+":"+h:h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}var l,h}function Ao(t,e,n){return function(r){return to(t,e,n,r)}}function ko(t,e,n,r){if(!Xi(t,e,n,r))return!1;var i=e.bindings[n],o=Ri(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(He.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var xo=new Object,No=Hi(fe),Do=Hi(le),Oo=Hi(Me);function Po(t,e,n,r){return n=Bt(n),{index:-1,deps:uo(r,jt(e)),flags:t,token:e,value:n}}function Ro(t,e,n){void 0===n&&(n=fe.THROW_IF_NOT_FOUND);var r,i,o=Zt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case No:case Do:case Oo:return t}var s,u=t._def.providersByKey[a];if(u){var c=t._providers[u.index];return void 0===c&&(c=t._providers[u.index]=Mo(t,u)),c===xo?void 0:c}if((s=Et(e.token))&&(r=t,null!=(i=s).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:l,token:e.token},t._providers[l]=xo,t._providers[l]=Mo(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Zt(o)}}function Mo(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Ro(t,n[0]));case 2:return new e(Ro(t,n[0]),Ro(t,n[1]));case 3:return new e(Ro(t,n[0]),Ro(t,n[1]),Ro(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Ro(t,n[o]);return new(e.bind.apply(e,l([void 0],i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Ro(t,n[0]));case 2:return e(Ro(t,n[0]),Ro(t,n[1]));case 3:return e(Ro(t,n[0]),Ro(t,n[1]),Ro(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Ro(t,n[o]);return e.apply(void 0,l(i))}}(t,e.value,e.deps);break;case 2048:n=Ro(t,e.deps[0]);break;case 256:n=e.value}return n===xo||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?xo:n}function Lo(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Vo(n,e),Ui.dirtyParentQueries(r),Uo(r),r}function Fo(t,e,n){var r=e?ro(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);fo(n,2,i,o,void 0)}function Uo(t){fo(t,3,null,null,void 0)}function jo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Vo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var qo=new Object;function Bo(t,e,n,r,i,o){return new Ko(t,e,n,r,i,o)}var Ko=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=ho(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=Ui.createRootView(t,e||[],n,i,r,qo),s=Mi(a,o).instance;return n&&a.renderer.setAttribute(Ri(a,0).renderElement,"ng-version",Qe.full),new Ho(a,new Go(a),s)},e}(ke),Ho=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return i(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Fe(Ri(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Jo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Ae);function zo(t,e,n){return new Qo(t,e,n)}var Qo=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Fe(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Jo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=no(t),t=t.parent;return t?new Jo(t,e):new Jo(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Lo(this._data,t);Ui.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Go(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Re||(i=o.get(Me));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return o=(n=this._data).viewContainer._embeddedViews,null==(r=e)&&(r=o.length),(i=a._view).viewContainerParent=this._view,jo(o,r,i),function(t,e){var n=eo(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),Ui.dirtyParentQueries(i),Fo(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],Vo(o,r),null==i&&(i=o.length),jo(o,i,a),Ui.dirtyParentQueries(a),Uo(a),Fo(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Lo(this._data,t);e&&Ui.destroyView(e)},t.prototype.detach=function(t){var e=Lo(this._data,t);return e?new Go(e):null},t}();function Wo(t){return new Go(t)}var Go=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return fo(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Ji(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Ui.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Ui.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Ui.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Uo(this._view),Ui.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Yo(t,e){return new Xo(t,e)}var Xo=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return i(e,t),e.prototype.createEmbeddedView=function(t){return new Go(Ui.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Fe(Ri(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(vn);function Zo(t,e){return new Jo(t,e)}var Jo=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=fe.THROW_IF_NOT_FOUND),Ui.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Hi(t)},e)},t}();function $o(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Ri(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Pi(t,n.nodeIndex).renderText;if(20240&n.flags)return Mi(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function ta(t){return new ea(t.renderer)}var ea=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=c(bo(e),2),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=c(bo(e),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function na(t,e,n,r){return new ra(t,e,n,r)}var ra=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Mo(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=fe.THROW_IF_NOT_FOUND),void 0===n&&(n=Yt.Default);var r=0;return n&Yt.SkipSelf?r|=1:n&Yt.Self&&(r|=4),Ro(this,{token:t,tokenKey:Hi(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Oe)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+jt(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==xo){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),ia=Hi(je),oa=Hi(Be),aa=Hi(Fe),sa=Hi(ti),ua=Hi(vn),ca=Hi(ni),la=Hi(fe),ha=Hi(le);function fa(t,e,n,r,i,o,a,s){var u=[];if(a)for(var l in a){var h=c(a[l],2);u[h[0]]={flags:8,name:l,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var f=[];if(s)for(var p in s)f.push({type:1,propName:p,target:null,eventName:s[p]});return function(t,e,n,r,i,o,a,s,u){var c=so(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=Bt(o);var p=uo(a,jt(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:wo(s),outputs:u,element:null,provider:{token:i,value:o,deps:p},text:null,query:null,ngContent:null}}(t,e|=16384,n,r,i,i,o,u,f)}function pa(t,e){return ga(t,e)}function da(t,e){for(var n=t;n.parent&&!io(n);)n=n.parent;return va(n.parent,no(n),!0,e.provider.value,e.provider.deps)}function ya(t,e){var n=va(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!ar(o))throw new Error("@Output "+i.propName+" not initialized in '"+n.constructor.name+"'.");var a=o.subscribe(ma(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function ma(t,e,n){return function(r){return to(t,e,n,r)}}function ga(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return va(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(wa(t,e,n,i[0]));case 2:return r(wa(t,e,n,i[0]),wa(t,e,n,i[1]));case 3:return r(wa(t,e,n,i[0]),wa(t,e,n,i[1]),wa(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=wa(t,e,n,i[s]);return r.apply(void 0,l(a))}}(t,e.parent,n,r.value,r.deps);case 2048:return wa(t,e.parent,n,r.deps[0]);case 256:return r.value}}function va(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(wa(t,e,n,i[0]));case 2:return new r(wa(t,e,n,i[0]),wa(t,e,n,i[1]));case 3:return new r(wa(t,e,n,i[0]),wa(t,e,n,i[1]),wa(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=wa(t,e,n,i[s]);return new(r.bind.apply(r,l([void 0],a)))}}var ba={};function wa(t,e,n,r,i){if(void 0===i&&(i=fe.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===ca&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ia:return ta(_a(s,e,n));case oa:return _a(s,e,n).renderer;case aa:return new Fe(Ri(s,e.nodeIndex).renderElement);case sa:return Ri(s,e.nodeIndex).viewContainer;case ua:if(e.element.template)return Ri(s,e.nodeIndex).template;break;case ca:return Wo(_a(s,e,n));case la:case ha:return Zo(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var c=Mi(s,u.nodeIndex);return c||(c={instance:ga(s,u)},s.nodes[u.nodeIndex]=c),c.instance}}n=io(s),e=no(s),s=s.parent,4&r.flags&&(s=null)}var l=o.root.injector.get(r.token,ba);return l!==ba||i===ba?l:o.root.ngModule.injector.get(r.token,i)}function _a(t,e,n){var r;if(n)r=Ri(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!io(r);)r=r.parent;return r}function Sa(t,e,n,r,i,o){if(32768&n.flags){var a=Ri(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=ne.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new re(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Ea(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Ca(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Ta(t,a,e,r)),a=a.parent}}function Ta(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Ca(t,i,o.flags&n,r++),i+=o.childCount}return r}function Ca(t,e,n,r){var i=Mi(t,e);if(i){var o=i.instance;o&&(Ui.setCurrentNode(t,e),1048576&n&&Oi(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Oi(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Ia(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ao(e),bindings:r},ngContent:null}}function Aa(t){for(var e=t.def.nodeMatchedQueries;t.parent&&oo(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Fi(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Fi(t,i).setDirty(),i+=o.childCount}}function ka(t,e){var n=Fi(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=xa(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Mi(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=xa(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function xa(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Na(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Ri(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(xa(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=eo(h);f&&f===u&&xa(h,0,h.def.nodes.length-1,r,i)}var p=u.template._projectedViews;if(p)for(l=0;l<p.length;l++){var d=p[l];xa(d,0,d.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Na(t,e,n){if(null!=n)switch(n){case 1:return Ri(t,e.nodeIndex).renderElement;case 0:return new Fe(Ri(t,e.nodeIndex).renderElement);case 2:return Ri(t,e.nodeIndex).template;case 3:return Ri(t,e.nodeIndex).viewContainer;case 4:return Mi(t,e.nodeIndex).instance}}function Da(t,e,n){var r=co(t,e,n);r&&yo(t,n.ngContent.index,1,r,null,void 0)}function Oa(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Pa(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=co(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Ra(t,e){return(null!=t?t.toString():"")+e.suffix}function Ma(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,p=null,d=0;d<e.length;d++){var y=e[d];if(y.nodeIndex=d,y.parent=c,y.bindingIndex=i,y.outputIndex=o,y.renderParent=l,a|=y.flags,u|=y.matchedQueryIds,y.element){var m=y.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(Fa(c,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!l&&3&y.flags&&(p=y),20224&y.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var g=0!=(32768&y.flags);0==(8192&y.flags)||g?c.element.publicProviders[Hi(y.provider.token)]=y:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Hi(y.provider.token)]=y),g&&(c.element.componentProvider=y)}if(c?(c.childFlags|=y.flags,c.directChildFlags|=y.flags,c.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(c.childMatchedQueries|=y.element.template.nodeMatchedQueries)):s|=y.flags,y.childCount>0)c=y,La(y)||(l=y);else for(;c&&d===c.nodeIndex+c.childCount;){var v=c.parent;v&&(v.childFlags|=c.childFlags,v.childMatchedQueries|=c.childMatchedQueries),l=(c=v)&&La(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Bi,updateRenderer:r||Bi,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:p}}function La(t){return 0!=(1&t.flags)&&null===t.element.name}function Fa(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Ua(t,e,n,r){var i=qa(t.root,t.renderer,t,e,n);return Ba(i,t.component,r),Ka(i),i}function ja(t,e,n){var r=qa(t,t.renderer,null,null,e);return Ba(r,n,n),Ka(r),r}function Va(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,qa(t.root,i,t,e.element.componentProvider,n)}function qa(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Ba(t,e,n){t.component=e,t.context=n}function Ka(t){var e;io(t)&&(e=Ri(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Ui.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Co(t,e,o),u=void 0;if(33554432&o.flags){var c=ho(o.element.componentView);u=Ui.createComponentView(t,o,c,s)}Io(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Yo(t,o):void 0},16777216&o.flags&&(a.viewContainer=zo(t,o,a));break;case 2:a=Pa(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:pa(t,o)});break;case 16:a={instance:da(t,o)};break;case 16384:(a=r[i])||(a={instance:ya(t,o)}),32768&o.flags&&Ba(Ri(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Yr;break;case 8:Da(t,e,o),a=void 0}r[i]=a}Ja(t,Za.CreateViewNodes),ns(t,201326592,268435456,0)}function Ha(t){Wa(t),Ui.updateDirectives(t,1),$a(t,Za.CheckNoChanges),Ui.updateRenderer(t,1),Ja(t,Za.CheckNoChanges),t.state&=-97}function za(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Di(t,0,256),Wa(t),Ui.updateDirectives(t,0),$a(t,Za.CheckAndUpdate),ns(t,67108864,536870912,0);var e=Di(t,256,512);Ea(t,2097152|(e?1048576:0)),Ui.updateRenderer(t,0),Ja(t,Za.CheckAndUpdate),ns(t,134217728,536870912,0),Ea(t,8388608|((e=Di(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Di(t,768,1024)}function Qa(t,e,n,r,i,o,a,s,u,c,h,f,p){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,p=!1;return f>0&&ko(t,e,0,n)&&(p=!0),f>1&&ko(t,e,1,r)&&(p=!0),f>2&&ko(t,e,2,i)&&(p=!0),f>3&&ko(t,e,3,o)&&(p=!0),f>4&&ko(t,e,4,a)&&(p=!0),f>5&&ko(t,e,5,s)&&(p=!0),f>6&&ko(t,e,6,u)&&(p=!0),f>7&&ko(t,e,7,c)&&(p=!0),f>8&&ko(t,e,8,l)&&(p=!0),f>9&&ko(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,o,a,s,u,c,l,h);case 2:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,p=e.bindings,d=p.length;if(d>0&&Xi(t,e,0,n)&&(f=!0),d>1&&Xi(t,e,1,r)&&(f=!0),d>2&&Xi(t,e,2,i)&&(f=!0),d>3&&Xi(t,e,3,o)&&(f=!0),d>4&&Xi(t,e,4,a)&&(f=!0),d>5&&Xi(t,e,5,s)&&(f=!0),d>6&&Xi(t,e,6,u)&&(f=!0),d>7&&Xi(t,e,7,c)&&(f=!0),d>8&&Xi(t,e,8,l)&&(f=!0),d>9&&Xi(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;d>0&&(y+=Ra(n,p[0])),d>1&&(y+=Ra(r,p[1])),d>2&&(y+=Ra(i,p[2])),d>3&&(y+=Ra(o,p[3])),d>4&&(y+=Ra(a,p[4])),d>5&&(y+=Ra(s,p[5])),d>6&&(y+=Ra(u,p[6])),d>7&&(y+=Ra(c,p[7])),d>8&&(y+=Ra(l,p[8])),d>9&&(y+=Ra(h,p[9]));var m=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(m,y)}return f}(t,e,n,r,i,o,a,s,u,c,l,h);case 16384:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=Mi(t,e.nodeIndex),p=f.instance,d=!1,y=void 0,m=e.bindings.length;return m>0&&Yi(t,e,0,n)&&(d=!0,y=Sa(t,f,e,0,n,y)),m>1&&Yi(t,e,1,r)&&(d=!0,y=Sa(t,f,e,1,r,y)),m>2&&Yi(t,e,2,i)&&(d=!0,y=Sa(t,f,e,2,i,y)),m>3&&Yi(t,e,3,o)&&(d=!0,y=Sa(t,f,e,3,o,y)),m>4&&Yi(t,e,4,a)&&(d=!0,y=Sa(t,f,e,4,a,y)),m>5&&Yi(t,e,5,s)&&(d=!0,y=Sa(t,f,e,5,s,y)),m>6&&Yi(t,e,6,u)&&(d=!0,y=Sa(t,f,e,6,u,y)),m>7&&Yi(t,e,7,c)&&(d=!0,y=Sa(t,f,e,7,c,y)),m>8&&Yi(t,e,8,l)&&(d=!0,y=Sa(t,f,e,8,l,y)),m>9&&Yi(t,e,9,h)&&(d=!0,y=Sa(t,f,e,9,h,y)),y&&p.ngOnChanges(y),65536&e.flags&&Oi(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),d}(t,e,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,p=!1,d=f.length;if(d>0&&Xi(t,e,0,n)&&(p=!0),d>1&&Xi(t,e,1,r)&&(p=!0),d>2&&Xi(t,e,2,i)&&(p=!0),d>3&&Xi(t,e,3,o)&&(p=!0),d>4&&Xi(t,e,4,a)&&(p=!0),d>5&&Xi(t,e,5,s)&&(p=!0),d>6&&Xi(t,e,6,u)&&(p=!0),d>7&&Xi(t,e,7,c)&&(p=!0),d>8&&Xi(t,e,8,l)&&(p=!0),d>9&&Xi(t,e,9,h)&&(p=!0),p){var y=Li(t,e.nodeIndex),m=void 0;switch(201347067&e.flags){case 32:m=new Array(f.length),d>0&&(m[0]=n),d>1&&(m[1]=r),d>2&&(m[2]=i),d>3&&(m[3]=o),d>4&&(m[4]=a),d>5&&(m[5]=s),d>6&&(m[6]=u),d>7&&(m[7]=c),d>8&&(m[8]=l),d>9&&(m[9]=h);break;case 64:m={},d>0&&(m[f[0].name]=n),d>1&&(m[f[1].name]=r),d>2&&(m[f[2].name]=i),d>3&&(m[f[3].name]=o),d>4&&(m[f[4].name]=a),d>5&&(m[f[5].name]=s),d>6&&(m[f[6].name]=u),d>7&&(m[f[7].name]=c),d>8&&(m[f[8].name]=l),d>9&&(m[f[9].name]=h);break;case 128:var g=n;switch(d){case 1:m=g.transform(n);break;case 2:m=g.transform(r);break;case 3:m=g.transform(r,i);break;case 4:m=g.transform(r,i,o);break;case 5:m=g.transform(r,i,o,a);break;case 6:m=g.transform(r,i,o,a,s);break;case 7:m=g.transform(r,i,o,a,s,u);break;case 8:m=g.transform(r,i,o,a,s,u,c);break;case 9:m=g.transform(r,i,o,a,s,u,c,l);break;case 10:m=g.transform(r,i,o,a,s,u,c,l,h)}}y.value=m}return p}(t,e,n,r,i,o,a,s,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,a,s,u,c,h,f,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)ko(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Xi(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=Ra(n[o],r[o]);a=e.text.prefix+a;var s=Pi(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Mi(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Yi(t,e,s,n[s])&&(o=!0,a=Sa(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Oi(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Xi(t,e,o,n[o])&&(i=!0);if(i){var a=Li(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);s=u.transform.apply(u,l(c))}a.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Wa(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Ri(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,$i(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Ga(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&Zi(t,e,0,n),f>1&&Zi(t,e,1,r),f>2&&Zi(t,e,2,i),f>3&&Zi(t,e,3,o),f>4&&Zi(t,e,4,a),f>5&&Zi(t,e,5,s),f>6&&Zi(t,e,6,u),f>7&&Zi(t,e,7,c),f>8&&Zi(t,e,8,l),f>9&&Zi(t,e,9,h)}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)Zi(t,e,r,n[r])}(t,e,r),!1}function Ya(t,e){if(Fi(t,e.nodeIndex).dirty)throw ji(Ui.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Xa(t){if(!(128&t.state)){if($a(t,Za.Destroy),Ja(t,Za.Destroy),Ea(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=eo(t);if(e){var n=e.template._projectedViews;n&&(Vo(n,n.indexOf(t)),Ui.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Ri(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Pi(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Fi(t,n).destroy()}}(t),io(t)&&t.renderer.destroy(),t.state|=128}}var Za=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Ja(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ts(Ri(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function $a(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Ri(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)ts(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ts(t,e){var n=t.state;switch(e){case Za.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ha(t):64&n&&es(t,Za.CheckNoChangesProjectedViews));break;case Za.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ha(t):64&n&&es(t,e));break;case Za.CheckAndUpdate:0==(128&n)&&(12==(12&n)?za(t):64&n&&es(t,Za.CheckAndUpdateProjectedViews));break;case Za.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?za(t):64&n&&es(t,e));break;case Za.Destroy:Xa(t);break;case Za.CreateViewNodes:Ka(t)}}function es(t,e){$a(t,e),Ja(t,e)}function ns(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(Ui.setCurrentNode(t,a.nodeIndex),r){case 0:ka(t,a);break;case 1:Ya(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var rs=!1;function is(t,e,n,r,i,o){var a=i.injector.get(Ve);return ja(as(t,i,a,e,n),r,o)}function os(t,e,n,r,i,o){var a=i.injector.get(Ve),s=as(t,i,new Us(a),e,n),u=ms(r);return Ls(Cs.create,ja,null,[s,u,o])}function as(t,e,n,r,i){var o=e.injector.get(ze),a=e.injector.get(jn),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function ss(t,e,n,r){var i=ms(n);return Ls(Cs.create,Ua,null,[t,e,i,r])}function us(t,e,n,r){return n=fs.get(e.element.componentProvider.provider.token)||ms(n),Ls(Cs.create,Va,null,[t,e,n,r])}function cs(t,e,n,r){return na(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ls.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=ls.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){hs.forEach(function(r,i){Et(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=ls.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=uo(i.deps),r.value=i.value)}if(hs.size>0){var o=new Set(t.modules);hs.forEach(function(e,r){if(o.has(Et(r).providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:uo(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[Hi(r)]=i}})}}(t=t.factory(function(){return Bi})),t):t}(r))}var ls=new Map,hs=new Map,fs=new Map;function ps(t){var e;ls.set(t.token,t),"function"==typeof t.token&&(e=Et(t.token))&&"function"==typeof e.providedIn&&hs.set(t.token,t)}function ds(t,e){var n=ho(e.viewDefFactory),r=ho(n.nodes[0].element.componentView);fs.set(t,r)}function ys(){ls.clear(),hs.clear(),fs.clear()}function ms(t){if(0===ls.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&ls.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Bi});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=ls.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=uo(o.deps),i.value=o.value)}}}}function gs(t,e,n,r,i,o,a,s,u,c,l,h,f){var p=t.def.nodes[e];return Qa(t,p,n,r,i,o,a,s,u,c,l,h,f),224&p.flags?Li(t,e).value:void 0}function vs(t,e,n,r,i,o,a,s,u,c,l,h,f){var p=t.def.nodes[e];return Ga(t,p,n,r,i,o,a,s,u,c,l,h,f),224&p.flags?Li(t,e).value:void 0}function bs(t){return Ls(Cs.detectChanges,za,null,[t])}function ws(t){return Ls(Cs.checkNoChanges,Ha,null,[t])}function _s(t){return Ls(Cs.destroy,Xa,null,[t])}var Ss,Es,Ts,Cs=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Is(t,e){Es=t,Ts=e}function As(t,e,n,r){return Is(t,e),Ls(Cs.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ks(t,e){if(128&t.state)throw qi(Cs[Ss]);return Is(t,Os(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ns(t,a,r,i):Ds(t,a,r,i),16384&a.flags&&Is(t,Os(t,n)),224&a.flags?Li(t,a.nodeIndex).value:void 0},t)}function xs(t,e){if(128&t.state)throw qi(Cs[Ss]);return Is(t,Ps(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ns(t,a,r,i):Ds(t,a,r,i),3&a.flags&&Is(t,Ps(t,n)),224&a.flags?Li(t,a.nodeIndex).value:void 0},t)}function Ns(t,e,n,r){if(Qa.apply(void 0,l([t,e,n],r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[(p=s.nonMinifiedName,"ng-reflect-"+p.replace(/[$@]/g,"_").replace($t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()}))]=te(u))}var c=e.parent,h=Ri(t,c.nodeIndex).renderElement;if(c.element.name)for(var f in o)null!=(u=o[f])?t.renderer.setAttribute(h,f,u):t.renderer.removeAttribute(h,f);else t.renderer.setValue(h,"bindings="+JSON.stringify(o,null,2))}}var p}function Ds(t,e,n,r){Ga.apply(void 0,l([t,e,n],r))}function Os(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Ps(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Rs=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=no(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Ri(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Zo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ms(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ms(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!io(t);)t=t.parent;return t.parent?Ri(t.parent,no(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?ro(this.view,this.nodeDef):ro(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){var e;return++a===o?(e=t.error).bind.apply(e,l([t],r)):Bi}),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,l(r)))},t}();function Ms(t,e,n){for(var r in e.references)n[r]=Na(t,e,e.references[r])}function Ls(t,e,n,r){var i=Ss,o=Es,a=Ts;try{Ss=t;var s=e.apply(n,r);return Es=o,Ts=a,Ss=i,s}catch(u){if(Ln(u)||!Es)throw u;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Vi(t,e),t}(u,Fs())}}function Fs(){return Es?new Rs(Es,Ts):null}var Us=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new js(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),js=function(){function t(t){this.delegate=t,this.debugContextFactory=Fs,this.data=this.delegate.data}return t.prototype.createDebugContext=function(t){return this.debugContextFactory(t)},t.prototype.destroyNode=function(t){!function(t){si.delete(t.nativeNode)}(ui(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new ai(n,null,r);i.name=t,ci(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&ci(new oi(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&ci(new oi(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=ui(t),r=ui(e);n&&r&&n instanceof ai&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=ui(t),i=ui(e),o=ui(n);r&&i&&r instanceof ai&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=ui(t),r=ui(e);n&&r&&n instanceof ai&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t,e){var n=this.delegate.selectRootElement(t,e),r=Fs();return r&&ci(new ai(n,null,r)),n},t.prototype.setAttribute=function(t,e,n,r){var i=ui(t);i&&i instanceof ai&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=ui(t);r&&r instanceof ai&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=ui(t);n&&n instanceof ai&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=ui(t);n&&n instanceof ai&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=ui(t);i&&i instanceof ai&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=ui(t);r&&r instanceof ai&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=ui(t);r&&r instanceof ai&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=ui(t);r&&r.listeners.push(new ii(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function Vs(t,e,n){return new qs(t,e,n)}var qs=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return i(e,t),e.prototype.create=function(t){!function(){if(!rs){rs=!0;var t=Ye()?{setCurrentNode:Is,createRootView:os,createEmbeddedView:ss,createComponentView:us,createNgModuleRef:cs,overrideProvider:ps,overrideComponentView:ds,clearOverrides:ys,checkAndUpdateView:bs,checkNoChangesView:ws,destroyView:_s,createDebugContext:function(t,e){return new Rs(t,e)},handleEvent:As,updateDirectives:ks,updateRenderer:xs}:{setCurrentNode:function(){},createRootView:is,createEmbeddedView:Ua,createComponentView:Va,createNgModuleRef:na,overrideProvider:Bi,overrideComponentView:Bi,clearOverrides:Bi,checkAndUpdateView:za,checkNoChangesView:Ha,destroyView:Xa,createDebugContext:function(t,e){return new Rs(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?gs:vs,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?gs:vs,t)}};Ui.setCurrentNode=t.setCurrentNode,Ui.createRootView=t.createRootView,Ui.createEmbeddedView=t.createEmbeddedView,Ui.createComponentView=t.createComponentView,Ui.createNgModuleRef=t.createNgModuleRef,Ui.overrideProvider=t.overrideProvider,Ui.overrideComponentView=t.overrideComponentView,Ui.clearOverrides=t.clearOverrides,Ui.checkAndUpdateView=t.checkAndUpdateView,Ui.checkNoChangesView=t.checkNoChangesView,Ui.destroyView=t.destroyView,Ui.resolveDep=wa,Ui.createDebugContext=t.createDebugContext,Ui.handleEvent=t.handleEvent,Ui.updateDirectives=t.updateDirectives,Ui.updateRenderer=t.updateRenderer,Ui.dirtyParentQueries=Aa}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(ho(this._ngModuleDefFactory));return Ui.createNgModuleRef(this.moduleType,t||fe.NULL,this._bootstrapComponents,e)},e}(Le),Bs=function(){return function(){}}(),Ks=function(){return function(){this.title="Auth-G"}}(),Hs=function(){return function(){}}(),zs=new Tt("Location Initialized"),Qs=function(){return function(){}}(),Ws=new Tt("appBaseHref"),Gs=function(){function t(t){var n=this;this._subject=new gn,this._platformStrategy=t;var r=this._platformStrategy.getBaseHref();this._baseHref=e.stripTrailingSlash(Ys(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=""),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ys(t)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function Ys(t){return t.replace(/\/index.html$/,"")}var Xs=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=Gs.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gs.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gs.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Qs),Zs=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return Gs.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+Gs.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gs.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gs.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Qs),Js=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],$s={},tu=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),eu=new Tt("UseV4Plurals"),nu=function(){return function(){}}(),ru=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return i(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=$s[e];if(n)return n;var r=e.split("-")[0];if(n=$s[r])return n;if("en"===r)return Js;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case tu.Zero:return"zero";case tu.One:return"one";case tu.Two:return"two";case tu.Few:return"few";case tu.Many:return"many";default:return"other"}},e}(nu),iu=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),ou=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Ye()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new iu(null,e._ngForOf,-1,-1),i),a=new au(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new au(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.ngTemplateContextGuard=function(t,e){return!0},t}(),au=function(){return function(t,e){this.record=t,this.view=e}}(),su=function(){function t(t,e){this._viewContainer=t,this._context=new uu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){cu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){cu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t.ngTemplateGuard_ngIf=function(t,e){return!0},t}(),uu=function(){return function(){this.$implicit=null,this.ngIf=null}}();function cu(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+jt(e)+"'.")}var lu=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),hu=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}},t}(),fu=function(){function t(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new lu(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t}(),pu=function(){return function(t,e,n){n._addDefault(new lu(t,e))}}(),du=function(){return function(){}}(),yu=new Tt("DocumentToken"),mu="browser",gu="server";function vu(t){return t===gu}var bu=function(){function t(){}return t.ngInjectableDef=St({providedIn:"root",factory:function(){return new wu(Jt(yu),window)}}),t}(),wu=function(){function t(t,e){this.document=t,this.window=e,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),_u=new P(function(t){return t.complete()});function Su(t){return t?function(t){return new P(function(e){return t.schedule(function(){return e.complete()})})}(t):_u}function Eu(t){var e=new P(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function Tu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(q(n)?t.pop():n=void 0,t.length){case 0:return Su(n);case 1:return n?rt(t,n):Eu(t[0]);default:return rt(t,n)}}var Cu=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(j);function Iu(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Iu.prototype=Object.create(Error.prototype);var Au=Iu,ku={},xu=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Nu(t,this.resultSelector))},t}(),Nu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(ku),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(J(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===ku?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}($);function Du(t){return new P(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?it(n):Su()).subscribe(e)})}function Ou(){return ct(1)}function Pu(t,e){return function(n){return n.lift(new Ru(t,e))}}var Ru=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Mu(t,this.predicate,this.thisArg))},t}(),Mu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(A);function Lu(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Lu.prototype=Object.create(Error.prototype);var Fu=Lu;function Uu(t){return function(e){return 0===t?Su():e.lift(new ju(t))}}var ju=function(){function t(t){if(this.total=t,this.total<0)throw new Fu}return t.prototype.call=function(t,e){return e.subscribe(new Vu(t,this.total))},t}(),Vu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(A);function qu(t,e,n){return function(r){return r.lift(new Bu(t,e,n))}}var Bu=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Ku(t,this.nextOrObserver,this.error,this.complete))},t}(),Ku=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=N,o._tapError=N,o._tapComplete=N,o._tapError=r||N,o._tapComplete=i||N,p(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||N,o._tapError=n.error||N,o._tapComplete=n.complete||N),o}return i(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(A),Hu=function(t){return void 0===t&&(t=zu),qu({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function zu(){return new Au}function Qu(t){return void 0===t&&(t=null),function(e){return e.lift(new Wu(t))}}var Wu=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Gu(t,this.defaultValue))},t}(),Gu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(A);function Yu(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Pu(function(e,n){return t(e,n,r)}):ut,Uu(1),n?Qu(e):Hu(function(){return new Au}))}}function Xu(t){return function(e){var n=new Zu(t),r=e.lift(n);return n.caught=r}}var Zu=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ju(t,this.selector,this.caught))},t}(),Ju=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new B(this,void 0,void 0);this.add(r),J(this,n,void 0,void 0,r)}},e}($);function $u(t){return function(e){return 0===t?Su():e.lift(new tc(t))}}var tc=function(){function t(t){if(this.total=t,this.total<0)throw new Fu}return t.prototype.call=function(t,e){return e.subscribe(new ec(t,this.total))},t}(),ec=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(A);function nc(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Pu(function(e,n){return t(e,n,r)}):ut,$u(1),n?Qu(e):Hu(function(){return new Au}))}}var rc=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new ic(t,this.predicate,this.thisArg,this.source))},t}(),ic=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(A);function oc(t,e){return"function"==typeof e?function(n){return n.pipe(oc(function(n,r){return it(t(n,r)).pipe(tt(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new ac(t))}}var ac=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new sc(t,this.project))},t}(),sc=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new B(this,void 0,void 0);this.destination.add(i),this.innerSubscription=J(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}($);function uc(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new cc(t,e,n))}}var cc=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new lc(t,this.accumulator,this.seed,this.hasSeed))},t}(),lc=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(A);function hc(t,e){return ot(t,e,1)}var fc=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new pc(t,this.callback))},t}(),pc=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new w(n)),r}return i(e,t),e}(A),dc=null;function yc(){return dc}var mc,gc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},vc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};Pt.Node&&(mc=Pt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var wc,_c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,dc||(dc=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,l(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return gc},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return mc.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&bc.hasOwnProperty(e)&&(e=bc[e]))}return vc[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=Sc||(Sc=document.querySelector("base"))?Sc.getAttribute("href"):null;return null==n?null:(e=n,wc||(wc=document.createElement("a")),wc.setAttribute("href",e),"/"===wc.pathname.charAt(0)?wc.pathname:"/"+wc.pathname)},e.prototype.resetBaseElement=function(){Sc=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){var n,r;e=encodeURIComponent(e);try{for(var i=u(t.split(";")),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.indexOf("="),l=c(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),h=l[1];if(l[0].trim()===e)return decodeURIComponent(h)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return i(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),Sc=null,Ec=yu;function Tc(){return!!window.history.pushState}var Cc=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}var n;return i(e,t),e.prototype._init=function(){this.location=yc().getLocation(),this._history=yc().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return yc().getBaseHref(this._doc)},e.prototype.onPopState=function(t){yc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){yc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){Tc()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){Tc()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},a([(n=zt(Ec),function(t,e){n(t,e,0)}),s("design:paramtypes",[Object])],e)}(Hs),Ic=new Tt("TRANSITION_ID"),Ac=[{provide:sr,useFactory:function(t,e,n){return function(){n.get(ur).donePromise.then(function(){var n=yc();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Ic,Ec,fe],multi:!0}],kc=function(){function t(){}return t.init=function(){var e;e=new t,Vr=e},t.prototype.addToWindow=function(t){Pt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Pt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},Pt.getAllAngularRootElements=function(){return t.getAllRootElements()},Pt.frameworkStabilizers||(Pt.frameworkStabilizers=[]),Pt.frameworkStabilizers.push(function(t){var e=Pt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?yc().isShadowRoot(e)?this.findTestabilityInTree(t,yc().getHost(e),!0):this.findTestabilityInTree(t,yc().parentElement(e),!0):null},t}();function xc(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Pt.ng=Pt.ng||{})[t]=e)}var Nc={ApplicationRef:Wr,NgZone:Nr};function Dc(t){return ui(t)}var Oc=new Tt("EventManagerPlugins"),Pc=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),Rc=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=yc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),Mc=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Lc=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return i(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return yc().remove(t)})},e}(Mc),Fc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Uc=/%COMP%/g,jc="_nghost-%COMP%",Vc="_ngcontent-%COMP%";function qc(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?qc(t,i,n):(i=i.replace(Uc,t),n.push(i))}return n}function Bc(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Kc=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Hc(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ht.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Gc(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case Ht.Native:case Ht.ShadowDom:return new Yc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=qc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Hc=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Fc[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'+t+'" did not match any elements');return e||(n.textContent=""),n},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=Fc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Fc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&qe.DashCase?t.style.setProperty(e,n,r&qe.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&qe.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Qc(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Qc(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Bc(n)):this.eventManager.addEventListener(t,e,Bc(n))},t}(),zc="@".charCodeAt(0);function Qc(t,e){if(t.charCodeAt(0)===zc)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Wc,Gc=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=qc(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=Vc.replace(Uc,r.id),i.hostAttr=jc.replace(Uc,r.id),i}return i(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(Hc),Yc=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===Ht.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=qc(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return i(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Hc),Xc="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Zc=Xc("addEventListener"),Jc=Xc("removeEventListener"),$c={},tl="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Xc("BLACK_LISTED_EVENTS")]&&(Wc={});var el=function(t){return!!Wc&&Wc.hasOwnProperty(t)},nl=function(t){var e=$c[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[tl];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},rl=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.ngZone=n,r&&vu(r)||i.patchEvent(),i}return i(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[tl]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[Zc]||Nr.isInAngularZone()&&!el(e))t.addEventListener(e,i,!1);else{var o=$c[e];o||(o=$c[e]=Xc("ANGULAR"+e+"FALSE"));var a=t[o],s=a&&a.length>0;a||(a=t[o]=[]);var u=el(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:i});else{for(var c=!1,l=0;l<a.length;l++)if(a[l].handler===i){c=!0;break}c||a.push({zone:u,handler:i})}s||t[Zc](e,nl,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Jc];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=$c[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,nl,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Rc),il={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ol=new Tt("HammerGestureConfig"),al=new Tt("HammerLoader"),sl=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),ul=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return i(e,t),e.prototype.supports=function(t){return!(!il.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Rc),cl=["alt","control","meta","shift"],ll={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},hl=function(t){function e(e){return t.call(this,e)||this}var n;return i(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return yc().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(cl.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=yc().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),cl.forEach(function(r){r!=n&&(0,ll[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(Rc),fl=function(){return function(){}}(),pl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return i(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case He.NONE:return e;case He.HTML:return e instanceof yl?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{nn=nn||new Xe(t);var r=e?String(e):"";n=nn.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=nn.getInertBodyElement(r)}while(r!==o);var a=new fn,s=a.sanitizeChildren(mn(n)||n);return Ye()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=mn(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case He.STYLE:return e instanceof ml?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(_n);return e&&$e(e[1])===e[1]||t.match(wn)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Ye()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case He.SCRIPT:if(e instanceof gl)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case He.URL:return e instanceof bl||e instanceof vl?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),$e(String(e)));case He.RESOURCE_URL:if(e instanceof bl)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof dl)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new yl(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new ml(t)},e.prototype.bypassSecurityTrustScript=function(t){return new gl(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new vl(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new bl(t)},e}(fl),dl=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(dl),ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Style"},e}(dl),gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Script"},e}(dl),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"URL"},e}(dl),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(dl),wl=Kr(Ci,"browser",[{provide:pr,useValue:mu},{provide:fr,useValue:function(){_c.makeCurrent(),kc.init()},multi:!0},{provide:Hs,useClass:Cc,deps:[Ec]},{provide:Ec,useFactory:function(){return document},deps:[]}]);function _l(){return new jn}var Sl=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:cr,useValue:t.appId},{provide:Ic,useExisting:cr},Ac]}},t}();"undefined"!=typeof window&&window;var El=function(){return function(t,e){this.id=t,this.url=e}}(),Tl=function(t){function e(e,n,r,i){void 0===r&&(r="imperative"),void 0===i&&(i=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=r,o.restoredState=i,o}return i(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(El),Cl=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return i(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(El),Il=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return i(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(El),Al=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return i(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(El),kl=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return i(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(El),xl=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return i(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(El),Nl=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return i(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(El),Dl=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return i(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(El),Ol=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return i(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(El),Pl=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Rl=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Ml=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Ll=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Fl=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Ul=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),jl=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),Vl=function(){return function(){}}(),ql="primary",Bl=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Kl(t){return new Bl(t)}var Hl="ngNavigationCancelingError";function zl(t){var e=Error("NavigationCancelingError: "+t);return e[Hl]=!0,e}function Ql(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var Wl=function(){return function(t,e){this.routes=t,this.module=e}}();function Gl(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];Yl(r,Xl(e,r))}}function Yl(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==ql)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&Gl(t.children,e)}function Xl(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function Zl(t){var e=t.children&&t.children.map(Zl),n=e?o({},t,{children:e}):o({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ql&&(n.component=Vl),n}function Jl(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function $l(t){return Array.prototype.concat.apply([],t)}function th(t){return t.length>0?t[t.length-1]:null}function eh(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function nh(t){return ar(t)?t:or(t)?it(Promise.resolve(t)):Tu(t)}function rh(t,e,n){return n?function(t,e){return Jl(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!sh(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!sh(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!sh(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!sh(n.segments,a)&&!!n.children[ql]&&e(n.children[ql],r,s)}(e,n,n.segments)}(t.root,e.root)}var ih=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return hh.serialize(this)},t}(),oh=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,eh(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return fh(this)},t}(),ah=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Kl(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return vh(this)},t}();function sh(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function uh(t,e){var n=[];return eh(t.children,function(t,r){r===ql&&(n=n.concat(e(t,r)))}),eh(t.children,function(t,r){r!==ql&&(n=n.concat(e(t,r)))}),n}var ch=function(){return function(){}}(),lh=function(){function t(){}return t.prototype.parse=function(t){var e=new Eh(t);return new ih(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return fh(e);if(n){var r=e.children[ql]?t(e.children[ql],!1):"",i=[];return eh(e.children,function(e,n){n!==ql&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=uh(e,function(n,r){return r===ql?[t(e.children[ql],!1)]:[r+":"+t(n,!1)]});return fh(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return dh(t)+"="+dh(e)}).join("&"):dh(t)+"="+dh(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),hh=new lh;function fh(t){return t.segments.map(function(t){return vh(t)}).join("/")}function ph(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dh(t){return ph(t).replace(/%3B/gi,";")}function yh(t){return ph(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mh(t){return decodeURIComponent(t)}function gh(t){return mh(t.replace(/\+/g,"%20"))}function vh(t){return""+yh(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+yh(t)+"="+yh(e[t])}).join(""));var e}var bh=/^[^\/()?;=#]+/;function wh(t){var e=t.match(bh);return e?e[0]:""}var _h=/^[^=?&#]+/,Sh=/^[^?&#]+/,Eh=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new oh([],{}):new oh([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[ql]=new oh(t,e)),n},t.prototype.parseSegment=function(){var t=wh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new ah(mh(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=wh(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=wh(this.remaining);r&&this.capture(n=r)}t[mh(e)]=mh(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(_h))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(Sh);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=gh(n),a=gh(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=wh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ql);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[ql]:new oh([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),Th=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Ch(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Ch(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Ih(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Ih(t,this._root).map(function(t){return t.value})},t}();function Ch(t,e){var n,r;if(t===e.value)return e;try{for(var i=u(e.children),o=i.next();!o.done;o=i.next()){var a=Ch(t,o.value);if(a)return a}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}function Ih(t,e){var n,r;if(t===e.value)return[e];try{for(var i=u(e.children),o=i.next();!o.done;o=i.next()){var a=Ih(t,o.value);if(a.length)return a.unshift(e),a}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[]}var Ah=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function kh(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var xh=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,Mh(r,e),r}return i(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(Th);function Nh(t,e){var n=function(t,e){var n=new Ph([],{},{},"",{},ql,e,null,t.root,-1,{});return new Rh("",new Ah(n,[]))}(t,e),r=new Cu([new ah("",{})]),i=new Cu({}),o=new Cu({}),a=new Cu({}),s=new Cu(""),u=new Dh(r,i,a,s,o,ql,e,n.root);return u.snapshot=n.root,new xh(new Ah(u,[]),n)}var Dh=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(tt(function(t){return Kl(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(tt(function(t){return Kl(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function Oh(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:o({},t.params,e.params),data:o({},t.data,e.data),resolve:o({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Ph=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Kl(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),Rh=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,Mh(r,n),r}return i(e,t),e.prototype.toString=function(){return Lh(this._root)},e}(Th);function Mh(t,e){e.value._routerState=t,e.children.forEach(function(e){return Mh(t,e)})}function Lh(t){var e=t.children.length>0?" { "+t.children.map(Lh).join(", ")+" } ":"";return""+t.value+e}function Fh(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Jl(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Jl(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Jl(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Jl(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Uh(t,e){var n,r;return Jl(t.params,e.params)&&sh(n=t.url,r=e.url)&&n.every(function(t,e){return Jl(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Uh(t.parent,e.parent))}function jh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vh(t,e,n,r,i){var o={};return r&&eh(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new ih(n.root===t?e:function t(e,n,r){var i={};return eh(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new oh(e.segments,i)}(n.root,t,e),o,i)}var qh=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&jh(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==th(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),Bh=function(){return function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}();function Kh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[ql]:""+t}function Hh(t,e,n){if(t||(t=new oh([],{})),0===t.segments.length&&t.hasChildren())return zh(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Kh(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Yh(s,u,a))return o;r+=2}else{if(!Yh(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new oh(t.segments.slice(0,r.pathIndex),{});return o.children[ql]=new oh(t.segments.slice(r.pathIndex),t.children),zh(o,0,i)}return r.match&&0===i.length?new oh(t.segments,{}):r.match&&!t.hasChildren()?Qh(t,e,n):r.match?zh(t,0,i):Qh(t,e,n)}function zh(t,e,n){if(0===n.length)return new oh(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[ql]=t,e):void 0===t[0].outlets?((n={})[ql]=t,n):t[0].outlets}(n),i={};return eh(r,function(n,r){null!==n&&(i[r]=Hh(t.children[r],e,n))}),eh(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new oh(t.segments,i)}function Qh(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Wh(n[i].outlets);return new oh(r,o)}if(0===i&&jh(n[0]))r.push(new ah(t.segments[e].path,n[0])),i++;else{var a=Kh(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&jh(s)?(r.push(new ah(a,Gh(s))),i+=2):(r.push(new ah(a,{})),i++)}}return new oh(r,{})}function Wh(t){var e={};return eh(t,function(t,n){null!==t&&(e[n]=Qh(new oh([],{}),0,t))}),e}function Gh(t){var e={};return eh(t,function(t,n){return e[n]=""+t}),e}function Yh(t,e,n){return t==n.path&&Jl(e,n.parameters)}var Xh=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fh(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=kh(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),eh(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=kh(t),o=t.value.component?r.children:e;eh(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=kh(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Ul(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ll(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(Fh(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Zh(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function Zh(t){Fh(t.value),t.children.forEach(Zh)}function Jh(t){return"function"==typeof t}function $h(t){return t instanceof ih}var tf=function(){return function(t){this.segmentGroup=t||null}}(),ef=function(){return function(t){this.urlTree=t}}();function nf(t){return new P(function(e){return e.error(new tf(t))})}function rf(t){return new P(function(e){return e.error(new ef(t))})}function of(t){return new P(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var af=function(){function t(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Me)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ql).pipe(tt(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(Xu(function(e){if(e instanceof ef)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof tf)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,ql).pipe(tt(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(Xu(function(t){if(t instanceof tf)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new oh([],((r={})[ql]=t,r)):t;return new ih(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(tt(function(t){return new oh([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Tu({});var o=[],a=[],s={};return eh(n,function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(t,e,c,u)).pipe(tt(function(t){return s[i]=t}));i===ql?o.push(l):a.push(l)}),Tu.apply(null,o.concat(a)).pipe(Ou(),Yu(),tt(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,r,i,o){var a=this;return Tu.apply(void 0,l(n)).pipe(tt(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Xu(function(t){if(t instanceof tf)return Tu(null);throw t}))}),Ou(),nc(function(t){return!!t}),Xu(function(t,n){if(t instanceof Au||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,i))return Tu(new oh([],{}));throw new tf(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return lf(r)!==o?nf(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):nf(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?rf(o):this.lineralizeSegments(n,o).pipe(ot(function(n){var o=new oh(n,{});return i.expandSegment(t,o,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=sf(e,r,i),u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!s.matched)return nf(e);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?rf(h):this.lineralizeSegments(r,h).pipe(ot(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(tt(function(t){return n._loadedConfig=t,new oh(r,{})})):Tu(new oh(r,{}));var a=sf(e,n,r),s=a.consumedSegments,c=a.lastChild;if(!a.matched)return nf(e);var l=r.slice(c);return this.getChildConfig(t,n,r).pipe(ot(function(t){var n=t.module,r=t.routes,a=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return cf(t,e,n)&&lf(n)!==ql})}(t,n)?{segmentGroup:uf(new oh(e,function(t,e){var n,r,i={};i[ql]=e;try{for(var o=u(t),a=o.next();!a.done;a=o.next()){var s=a.value;""===s.path&&lf(s)!==ql&&(i[lf(s)]=new oh([],{}))}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}(r,new oh(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return cf(t,e,n)})}(t,n)?{segmentGroup:uf(new oh(t.segments,function(t,e,n,r){var i,a,s={};try{for(var c=u(n),l=c.next();!l.done;l=c.next()){var h=l.value;cf(t,e,h)&&!r[lf(h)]&&(s[lf(h)]=new oh([],{}))}}catch(f){i={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o({},r,s)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,l,r),c=a.segmentGroup,h=a.slicedSegments;return 0===h.length&&c.hasChildren()?i.expandChildren(n,r,c).pipe(tt(function(t){return new oh(s,t)})):0===r.length&&0===h.length?Tu(new oh(s,{})):i.expandSegment(n,c,r,h,ql,!0).pipe(tt(function(t){return new oh(s.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e,n){var r=this;return e.children?Tu(new Wl(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Tu(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?it(i).pipe(tt(function(r){var i,o=t.get(r);if(function(t){return t&&Jh(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Jh(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return nh(i)})).pipe(Ou(),(r=function(t){return!0===t},function(t){return t.lift(new rc(r,void 0,t))})):Tu(!0)}(t.injector,e,n).pipe(ot(function(n){return n?r.configLoader.load(t.injector,e).pipe(tt(function(t){return e._loadedConfig=t,t})):function(t){return new P(function(e){return e.error(zl("Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false"))})}(e)})):Tu(new Wl([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Tu(n);if(r.numberOfChildren>1||!r.children[ql])return of(t.redirectTo);r=r.children[ql]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new ih(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return eh(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return eh(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new oh(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,r,i=0;try{for(var o=u(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.path===t.path)return e.splice(i),s;i++}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t},t}();function sf(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Ql)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function uf(t){if(1===t.numberOfChildren&&t.children[ql]){var e=t.children[ql];return new oh(t.segments.concat(e.segments),e.children)}return t}function cf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function lf(t){return t.outlet||ql}var hf=function(){return function(t){this.path=t,this.route=this.path[this.path.length-1]}}(),ff=function(){return function(t,e){this.component=t,this.route=e}}();function pf(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function df(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=kh(e);return t.children.forEach(function(t){!function(t,e,n,r,i){void 0===i&&(i={canDeactivateChecks:[],canActivateChecks:[]});var o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sh(t.url,e.url)||!Jl(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uh(t,e)||!Jl(t.queryParams,e.queryParams);case"paramsChange":default:return!Uh(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new hf(r)):(o.data=a.data,o._resolvedData=a._resolvedData),df(t,e,o.component?s?s.children:null:n,r,i),u&&i.canDeactivateChecks.push(new ff(s&&s.outlet&&s.outlet.component||null,a))}else a&&yf(e,s,i),i.canActivateChecks.push(new hf(r)),df(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),eh(o,function(t,e){return yf(t,n.getContext(e),i)}),i}function yf(t,e,n){var r=kh(t),i=t.value;eh(r,function(t,r){yf(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ff(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var mf=Symbol("INITIAL_VALUE");function gf(){return oc(function(t){return(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return q(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),rt(t,r).lift(new xu(n))}).apply(void 0,l(t.map(function(t){return t.pipe($u(1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];q(n)?t.pop():n=null;var r=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&q(t[1])?it(t[0]):Ou()(Tu.apply(void 0,t))}(1!==r||n?r>0?rt(t,n):Su(n):Eu(t[0]),e)}}(mf))}))).pipe(uc(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==mf)return t;if(r===mf&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||$h(r))return r}return t},t)},mf),Pu(function(t){return t!==mf}),tt(function(t){return $h(t)?t:!0===t}),$u(1))})}function vf(t,e){return null!==t&&e&&e(new Fl(t)),Tu(!0)}function bf(t,e){return null!==t&&e&&e(new Ml(t)),Tu(!0)}function wf(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Tu(r.map(function(r){return Du(function(){var i,o=pf(r,e,n);if(function(t){return t&&Jh(t.canActivate)}(o))i=nh(o.canActivate(e,t));else{if(!Jh(o))throw new Error("Invalid CanActivate guard");i=nh(o(e,t))}return i.pipe(nc())})})).pipe(gf()):Tu(!0)}function _f(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return Du(function(){return Tu(e.guards.map(function(i){var o,a=pf(i,e.node,n);if(function(t){return t&&Jh(t.canActivateChild)}(a))o=nh(a.canActivateChild(r,t));else{if(!Jh(a))throw new Error("Invalid CanActivateChild guard");o=nh(a(r,t))}return o.pipe(nc())})).pipe(gf())})});return Tu(i).pipe(gf())}var Sf=function(){return function(){}}(),Ef=function(){function t(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=If(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ql),n=new Ph([],Object.freeze({}),Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,{},ql,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ah(n,e),i=new Rh(this.url,r);return this.inheritParamsAndData(i._root),Tu(i)}catch(a){return new P(function(t){return t.error(a)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=Oh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=uh(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===ql?-1:e.value.outlet===ql?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,r){var i,o;try{for(var a=u(t),s=a.next();!s.done;s=a.next()){var c=s.value;try{return this.processSegmentAgainstRoute(c,e,n,r)}catch(l){if(!(l instanceof Sf))throw l}}}catch(h){i={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}if(this.noLeftoversInUrl(e,n,r))return[];throw new Sf},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new Sf;if((t.outlet||ql)!==r)throw new Sf;var i,a=[],s=[];if("**"===t.path){var u=n.length>0?th(n).parameters:{};i=new Ph(n,u,Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,xf(t),r,t.component,t,Tf(e),Cf(e)+n.length,Nf(t))}else{var c=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Sf;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Ql)(n,t,e);if(!r)throw new Sf;var i={};eh(r.posParams,function(t,e){i[e]=t.path});var a=r.consumed.length>0?o({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=c.consumedSegments,s=n.slice(c.lastChild),i=new Ph(a,c.parameters,Object.freeze(o({},this.urlTree.queryParams)),this.urlTree.fragment,xf(t),r,t.component,t,Tf(e),Cf(e)+a.length,Nf(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=If(e,a,s,l,this.relativeLinkResolution),f=h.segmentGroup,p=h.slicedSegments;if(0===p.length&&f.hasChildren()){var d=this.processChildren(l,f);return[new Ah(i,d)]}if(0===l.length&&0===p.length)return[new Ah(i,[])];var y=this.processSegment(l,f,p,ql);return[new Ah(i,y)]},t}();function Tf(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Cf(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function If(t,e,n,r,i){if(n.length>0&&function(t,e,n){return r.some(function(n){return Af(t,e,n)&&kf(n)!==ql})}(t,n)){var a=new oh(e,function(t,e,n,r){var i,o,a={};a[ql]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;try{for(var s=u(n),c=s.next();!c.done;c=s.next()){var l=c.value;if(""===l.path&&kf(l)!==ql){var h=new oh([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,a[kf(l)]=h}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a}(t,e,r,new oh(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return Af(t,e,n)})}(t,n)){var s=new oh(t.segments,function(t,e,n,r,i,a){var s,c,l={};try{for(var h=u(r),f=h.next();!f.done;f=h.next()){var p=f.value;if(Af(t,n,p)&&!i[kf(p)]){var d=new oh([],{});d._sourceSegment=t,d._segmentIndexShift="legacy"===a?t.segments.length:e.length,l[kf(p)]=d}}}catch(y){s={error:y}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return o({},i,l)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var c=new oh(t.segments,t.children);return c._sourceSegment=t,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:n}}function Af(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function kf(t){return t.outlet||ql}function xf(t){return t.data||{}}function Nf(t){return t.resolve||{}}function Df(t,e,n,r){var i=pf(t,e,r);return nh(i.resolve?i.resolve(e,n):i(e,n))}function Of(t){return function(e){return e.pipe(oc(function(e){var n=t(e);return n?it(n).pipe(tt(function(){return e})):it([e])}))}}var Pf=function(){return function(){}}(),Rf=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Mf=new Tt("ROUTES"),Lf=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(tt(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Wl($l(i.injector.get(Mf)).map(Zl),i)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?it(this.loader.load(t)):nh(t()).pipe(ot(function(t){return t instanceof Le?Tu(t):it(e.compiler.compileModuleAsync(t))}))},t}(),Ff=function(){return function(){}}(),Uf=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function jf(t){throw t}function Vf(t,e,n){return e.parse("/")}function qf(t,e){return Tu(null)}var Bf=function(){function t(t,e,n,r,i,o,a,s){var u=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new j,this.errorHandler=jf,this.malformedUriErrorHandler=Vf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qf,afterPreactivation:qf},this.urlHandlingStrategy=new Uf,this.routeReuseStrategy=new Rf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Me),this.console=i.get(yr);var c=i.get(Nr);this.isNgZoneEnabled=c instanceof Nr,this.resetConfig(s),this.currentUrlTree=new ih(new oh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Lf(o,a,function(t){return u.triggerEvent(new Pl(t))},function(t){return u.triggerEvent(new Rl(t))}),this.routerState=Nh(this.currentUrlTree,this.rootComponentType),this.transitions=new Cu({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return t.prototype.setupNavigations=function(t){var e=this,n=this.events;return t.pipe(Pu(function(t){return 0!==t.id}),tt(function(t){return o({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),qu(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?o({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}}),oc(function(t){var r,i,a,s,c=!1,l=!1;return Tu(t).pipe(oc(function(t){var r,i,a,s,u=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||u)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Tu(t).pipe(oc(function(t){var r=e.transitions.getValue();return n.next(new Tl(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?_u:[t]}),oc(function(t){return Promise.resolve(t)}),(r=e.ngModule.injector,i=e.configLoader,a=e.urlSerializer,s=e.config,function(t){return t.pipe(oc(function(t){return function(e,n,r,i,o){return new af(e,n,r,t.extractedUrl,o).apply()}(r,i,a,0,s).pipe(tt(function(e){return o({},t,{urlAfterRedirects:e})}))}))}),qu(function(t){e.currentNavigation=o({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,a){return function(r){return r.pipe(ot(function(r){return function(t,e,n,r,i,o){return void 0===i&&(i="emptyOnly"),void 0===o&&(o="legacy"),new Ef(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,e.serializeUrl(s)),i,a).pipe(tt(function(t){return o({},r,{targetSnapshot:t})}));var s}))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),qu(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id),e.browserUrlTree=t.urlAfterRedirects)}),qu(function(t){var r=new kl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(u&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,p=new Tl(t.id,e.serializeUrl(c),l,h);n.next(p);var d=Nh(c,e.rootComponentType).snapshot;return Tu(o({},t,{targetSnapshot:d,urlAfterRedirects:c,extras:o({},f,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,t.resolve(null),_u}),Of(function(t){var n=t.extras;return e.hooks.beforePreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),qu(function(t){var n=new xl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),tt(function(t){return o({},t,{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,a=n._root,df(a,r?r._root:null,i,[a.value]))});var n,r,i,a}),function(t,e){return function(n){return n.pipe(ot(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,s=a.canActivateChecks,u=a.canDeactivateChecks;return 0===u.length&&0===s.length?Tu(o({},n,{guardsResult:!0})):function(t,e,n,r){return it(u).pipe(ot(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Tu(o.map(function(o){var a,s=pf(o,e,i);if(function(t){return t&&Jh(t.canDeactivate)}(s))a=nh(s.canDeactivate(t,e,n,r));else{if(!Jh(s))throw new Error("Invalid CanDeactivate guard");a=nh(s(t,e,n,r))}return a.pipe(nc())})).pipe(gf()):Tu(!0)}(t.component,t.route,n,e,r)}),nc(function(t){return!0!==t},!0))}(0,r,i,t).pipe(ot(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return it(s).pipe(hc(function(e){return it([bf(e.route.parent,r),vf(e.route,r),_f(t,e.path,n),wf(t,e.route,n)]).pipe(Ou(),nc(function(t){return!0!==t},!0))}),nc(function(t){return!0!==t},!0))}(r,0,t,e):Tu(n)}),tt(function(t){return o({},n,{guardsResult:t})}))}))}}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),qu(function(t){if($h(t.guardsResult)){var n=zl('Redirecting to "'+e.serializeUrl(t.guardsResult)+'"');throw n.url=t.guardsResult,n}}),qu(function(t){var n=new Nl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)}),Pu(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new Il(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),Of(function(t){if(t.guards.canActivateChecks.length)return Tu(t).pipe(qu(function(t){var n=new Dl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),(n=e.paramsInheritanceStrategy,r=e.ngModule.injector,function(t){return t.pipe(ot(function(t){var e=t.targetSnapshot,i=t.guards.canActivateChecks;return i.length?it(i).pipe(hc(function(t){return function(t,n,r,i){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Tu({});if(1===i.length){var o=i[0];return Df(t[o],e,n,r).pipe(tt(function(t){var e;return(e={})[o]=t,e}))}var a={};return it(i).pipe(ot(function(i){return Df(t[i],e,n,r).pipe(tt(function(t){return a[i]=t,t}))})).pipe(Yu(),tt(function(){return a}))}(t._resolve,t,e,i).pipe(tt(function(e){return t._resolvedData=e,t.data=o({},t.data,Oh(t,r).resolve),null}))}(t.route,0,n,r)}),function(t,e){return arguments.length>=2?function(e){return D(uc(t,void 0),Uu(1),Qu(void 0))(e)}:function(e){return D(uc(function(e,n,r){return t(e)}),Uu(1))(e)}}(function(t,e){return t}),tt(function(e){return t})):Tu(t)}))}),qu(function(t){var n=new Ol(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}));var n,r}),Of(function(t){var n=t.extras;return e.hooks.afterPreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),tt(function(t){var n,r,i,a=(i=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(c=r.value)._futureSnapshot=n.value;var i=function(e,n,r){return n.children.map(function(n){var i,o;try{for(var a=u(r.children),s=a.next();!s.done;s=a.next()){var c=s.value;if(e.shouldReuseRoute(c.value.snapshot,n.value))return t(e,n,c)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return t(e,n)})}(e,n,r);return new Ah(c,i)}var o=e.retrieve(n.value);if(o){var a=o.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,a),a}var s,c=new Dh(new Cu((s=n.value).url),new Cu(s.params),new Cu(s.queryParams),new Cu(s.fragment),new Cu(s.data),s.outlet,s.component,s);return i=n.children.map(function(n){return t(e,n)}),new Ah(c,i)}(e.routeReuseStrategy,(n=t.targetSnapshot)._root,(r=t.currentRouterState)?r._root:void 0),new xh(i,n));return o({},t,{targetRouterState:a})}),qu(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(i=e.rootContexts,a=e.routeReuseStrategy,s=function(t){return e.triggerEvent(t)},tt(function(t){return new Xh(a,t.targetRouterState,t.currentRouterState,s).activate(i),t})),qu({next:function(){c=!0},complete:function(){c=!0}}),(r=function(){if(!c&&!l){e.resetUrlToCurrentUrlTree();var r=new Il(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID "+t.id+" is not equal to the current navigation id "+e.navigationId);n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new fc(r))}),Xu(function(r){if(l=!0,(s=r)&&s[Hl]){e.navigated=!0;var i=$h(r.url);i||e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var o=new Il(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),t.resolve(!1),i&&e.navigateByUrl(r.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Al(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return _u}))}))},t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.getTransition=function(){return this.transitions.value},t.prototype.setTransition=function(t){this.transitions.next(o({},this.getTransition(),t))},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout(function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.getCurrentNavigation=function(){return this.currentNavigation},t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){Gl(t),this.config=t.map(Zl),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,r=e.queryParams,i=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;Ye()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,h=u?this.currentUrlTree.fragment:i,f=null;if(s)switch(s){case"merge":f=o({},this.currentUrlTree.queryParams,r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}else f=a?this.currentUrlTree.queryParams:r||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,i){if(0===n.length)return Vh(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new qh(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return eh(r.outlets,function(t,e){o[e]="string"==typeof t?t.split("/"):t}),l(t,[{outlets:o}])}if(r.segmentPath)return l(t,[r.segmentPath])}return"string"!=typeof r?l(t,[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):l(t,[r])},[]);return new qh(n,e,r)}(n);if(o.toRoot())return Vh(e.root,new oh([],{}),e,r,i);var a=function(t,n,r){if(t.isAbsolute)return new Bh(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Bh(r.snapshot._urlSegment,!0,0);var i=jh(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new Bh(a,!1,s-u)}()}(o,0,t),s=a.processChildren?zh(a.segmentGroup,a.index,o.commands):Hh(a.segmentGroup,a.index,o.commands);return Vh(a.segmentGroup,s,e,r,i)}(c,this.currentUrlTree,t,f,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1}),Ye()&&this.isNgZoneEnabled&&!Nr.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=$h(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if($h(t))return rh(this.currentUrlTree,t,e);var n=this.parseUrl(t);return rh(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Cl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})},t.prototype.scheduleNavigation=function(t,e,n,r){var i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})},t.prototype.setBrowserUrl=function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",o({},r,{navigationId:n})):this.location.go(i,"",o({},r,{navigationId:n}))},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),Kf=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof Cl&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Ye()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Hf(this.skipLocationChange),replaceUrl:Hf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Hf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Hf(this.preserveFragment)})},enumerable:!0,configurable:!0}),a([On("attr.target"),Dn(),s("design:type",String)],t.prototype,"target",void 0),t}();function Hf(t){return""===t||!!t}var zf=function(){function t(t,e,n,r){var i=this;this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(function(t){t instanceof Cl&&i.update()})}return t.prototype.ngAfterContentInit=function(){var t=this;this.links.changes.subscribe(function(e){return t.update()}),this.linksWithHrefs.changes.subscribe(function(e){return t.update()}),this.update()},Object.defineProperty(t.prototype,"routerLinkActive",{set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.update()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.update=function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}))})},t.prototype.isLinkActive=function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}},t.prototype.hasActiveLinks=function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))},t}(),Qf=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wf,this.attachRef=null}}(),Wf=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new Qf,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Gf=function(){function t(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new gn,this.deactivateEvents=new gn,this.name=r||ql,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Yf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Yf=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===Dh?this.route:t===Wf?this.childContexts:this.parent.get(t,e)},t}(),Xf=function(){return function(){}}(),Zf=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(Xu(function(){return Tu(null)}))},t}(),Jf=function(){function t(){}return t.prototype.preload=function(t,e){return Tu(null)},t}(),$f=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Lf(e,n,function(e){return t.triggerEvent(new Pl(e))},function(e){return t.triggerEvent(new Rl(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Pu(function(t){return t instanceof Cl}),hc(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(Me);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,r,i=[];try{for(var o=u(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.loadChildren&&!s.canLoad&&s._loadedConfig){var c=s._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return it(i).pipe(ct(),tt(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(ot(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),tp=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Tl?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Cl&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof jl&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new jl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),ep=new Tt("ROUTER_CONFIGURATION"),np=new Tt("ROUTER_FORROOT_GUARD"),rp=[Gs,{provide:ch,useClass:lh},{provide:Bf,useFactory:lp,deps:[Wr,ch,Wf,Gs,fe,Sn,Er,Mf,ep,[Ff,new Qt],[Pf,new Qt]]},Wf,{provide:Dh,useFactory:hp,deps:[Bf]},{provide:Sn,useClass:Jr},$f,Jf,Zf,{provide:ep,useValue:{enableTracing:!1}}];function ip(){return new Br("Router",Bf)}var op=function(){function t(t,e){}var e;return e=t,t.forRoot=function(t,n){return{ngModule:e,providers:[rp,cp(t),{provide:np,useFactory:up,deps:[[Bf,new Qt,new Gt]]},{provide:ep,useValue:n||{}},{provide:Qs,useFactory:sp,deps:[Hs,[new zt(Ws),new Qt],ep]},{provide:tp,useFactory:ap,deps:[Bf,bu,ep]},{provide:Xf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Jf},{provide:Br,multi:!0,useFactory:ip},[fp,{provide:sr,multi:!0,useFactory:pp,deps:[fp]},{provide:yp,useFactory:dp,deps:[fp]},{provide:dr,multi:!0,useExisting:yp}]]}},t.forChild=function(t){return{ngModule:e,providers:[cp(t)]}},t}();function ap(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new tp(t,e,n)}function sp(t,e,n){return void 0===n&&(n={}),n.useHash?new Xs(t,e):new Zs(t,e)}function up(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function cp(t){return[{provide:Nt,multi:!0,useValue:t},{provide:Mf,multi:!0,useValue:t}]}function lp(t,e,n,r,i,o,a,s,u,c,l){void 0===u&&(u={});var h=new Bf(null,e,n,r,i,o,a,$l(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=yc();h.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function hp(t){return t.routerState.root}var fp=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new j}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(zs,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Bf),i=t.injector.get(ep);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?Tu(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(ep),n=this.injector.get($f),r=this.injector.get(tp),i=this.injector.get(Bf),o=this.injector.get(Wr);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function pp(t){return t.appInitializer.bind(t)}function dp(t){return t.bootstrapListener.bind(t)}var yp=new Tt("Router Initializer"),mp=Wi({encapsulation:2,styles:[],data:{}});function gp(t){return Ma(0,[(t()(),To(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),fa(1,212992,null,0,Gf,[Wf,ti,Oe,[8,null],ni],null,null)],function(t,e){t(e,1,0)},null)}function vp(t){return Ma(0,[(t()(),To(0,0,null,null,1,"ng-component",[],null,null,null,gp,mp)),fa(1,49152,null,0,Vl,[],null,null)],null,null)}var bp=Bo("ng-component",Vl,vp,{},{},[]),wp=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(w))),_p=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Sp=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(function(t){function e(n,r){void 0===r&&(r=_p.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(_p)))(wp),Ep=(new Tt("angularfire2.realtimeDatabaseURL"),function(){function t(t,e){this.zone=t,this.platformId=e}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.runGuarded(function(){return Sp.schedule.apply(Sp,t)})},t.prototype.keepUnstableUntilFirst=function(t){return vu(this.platformId)?new P(function(e){var n=function(){},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(function(t){"scheduled"===r.state&&r.invoke(),e.next(t)},function(t){"scheduled"===r.state&&r.invoke(),e.error(t)},function(){"scheduled"===r.state&&r.invoke(),e.complete()})}):t},t.prototype.runOutsideAngular=function(t){var e=this;return new P(function(n){return e.zone.runOutsideAngular(function(){return t.subscribe(function(t){return e.zone.run(function(){return n.next(t)})},function(t){return e.zone.run(function(){return n.error(t)})},function(){return e.zone.run(function(){return n.complete()})})})})},t}()),Tp=function(t){return function(e){return new P(function(n){return e.subscribe(function(e){return t.run(function(){return n.next(e)})},function(e){return t.run(function(){return n.error(e)})},function(){return t.run(function(){return n.complete()})})})}},Cp=n("Wcq6"),Ip=n.n(Cp),Ap=new Tt("angularfire2.app.options"),kp=new Tt("angularfire2.app.nameOrConfig"),xp=function(){return function(){}}();function Np(t,e){var n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",Ip.a.apps.filter(function(t){return t&&t.name===n.name})[0]||Ip.a.initializeApp(t,n)}new Qt;var Dp=function(){function t(){}var e;return e=t,t.initializeApp=function(t,n){return{ngModule:e,providers:[{provide:Ap,useValue:t},{provide:kp,useValue:n}]}},t}(),Op=function(){return function(t,e,n,r){var i=this;this.zone=r;var o=new Ep(r,n);this.auth=r.runOutsideAngular(function(){return Np(t,e).auth()}),this.authState=o.keepUnstableUntilFirst(o.runOutsideAngular(new P(function(t){return{unsubscribe:i.auth.onAuthStateChanged(t)}}))),this.user=o.keepUnstableUntilFirst(o.runOutsideAngular(new P(function(t){return{unsubscribe:i.auth.onIdTokenChanged(t)}}))),this.idToken=this.user.pipe(oc(function(t){return t?it(t.getIdToken()):Tu(null)})),this.idTokenResult=this.user.pipe(oc(function(t){return t?it(t.getIdTokenResult()):Tu(null)}))}}(),Pp=n("wj3C"),Rp=n.n(Pp);(function(){var t,e=e||{},n=this;function r(t){return"string"==typeof t}function i(t){return"boolean"==typeof t}function o(){}function a(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function s(t){return null===t}function u(t){return"array"==a(t)}function c(t){var e=a(t);return"array"==e||"object"==e&&"number"==typeof t.length}function l(t){return"function"==a(t)}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:y).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var v=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.ob=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ed=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function _(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function E(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");S.call(this,n+t[r])}function T(t,e){throw new E("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function C(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function I(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function A(){this.b=this.a=null}b(S,Error),S.prototype.name="CustomError",b(E,S),E.prototype.name="AssertionError",C.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var k=new C(function(){return new N},function(t){t.reset()});function x(){var t=ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function N(){this.next=this.b=this.a=null}A.prototype.add=function(t,e){var n=k.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},N.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},N.prototype.reset=function(){this.next=this.b=this.a=null};var D=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(r(t))return r(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=r(t)?t.split(""):t,a=0;a<i;a++)a in o&&e.call(n,o[a],a,t)},P=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),o=r(t)?t.split(""):t,a=0;a<n;a++)a in o&&(i[a]=e.call(void 0,o[a],a,t));return i},R=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=r(t)?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t))return!0;return!1};function M(t,e){return 0<=D(t,e)}function L(t,e){var n;return(n=0<=(e=D(t,e)))&&Array.prototype.splice.call(t,e,1),n}function F(t,e){!function(t,e){var n=t.length,i=r(t)?t.split(""):t;for(--n;0<=n;--n)n in i&&e.call(void 0,i[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function U(t){return Array.prototype.concat.apply([],arguments)}function j(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function B(t){return X.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(H,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(W,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(G,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Y,"&#0;")),t):t}var K,H=/&/g,z=/</g,Q=/>/g,W=/"/g,G=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function Z(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:t>e?1:0}t:{var $=n.navigator;if($){var tt=$.userAgent;if(tt){K=tt;break t}}K=""}function et(t){return Z(K,t)}function nt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function rt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot,at,st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<st.length;o++)n=st[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t){n.setTimeout(function(){throw t},0)}function lt(t,e){at||function(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve(void 0);at=function(){t.then(pt)}}else at=function(){var t=pt;!l(n.setImmediate)||n.Window&&n.Window.prototype&&!et("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(ot||(ot=function(){var t=n.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!et("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!et("Trident")&&!et("MSIE")){var e=new t,r={},i=r;return e.port1.onmessage=function(){if(void 0!==r.next){var t=(r=r.next).wb;r.wb=null,t()}},function(t){i.next={wb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}()),ot(t)):n.setImmediate(t)}}(),ht||(at(),ht=!0),ft.add(t,e)}var ht=!1,ft=new A;function pt(){for(var t;t=x();){try{t.a.call(t.b)}catch(e){ct(e)}I(k,t)}ht=!1}function dt(t,e){if(this.a=yt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){At(n,mt,t)},function(t){if(!(t instanceof Rt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}At(n,gt,t)})}catch(r){At(this,gt,r)}}var yt=0,mt=2,gt=3;function vt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}vt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bt=new C(function(){return new vt},function(t){t.reset()});function wt(t,e,n){var r=bt.get();return r.g=t,r.b=e,r.f=n,r}function _t(t){if(t instanceof dt)return t;var e=new dt(o);return At(e,mt,t),e}function St(t){return new dt(function(e,n){n(t)})}function Et(t,e,n){kt(t,e,n,null)||lt(g(e,t))}function Tt(t){return new dt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Db:!0,value:o}:{Db:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Et(t[o],g(i,o,!0),g(i,o,!1));else e(r)})}function Ct(t,e){t.b||t.a!=mt&&t.a!=gt||xt(t),t.f?t.f.next=e:t.b=e,t.f=e}function It(t,e,n,r){var i=wt(null,null,null);return i.a=new dt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Rt?o(e):t(i)}catch(a){o(a)}}:o}),i.a.c=t,Ct(t,i),i.a}function At(t,e,n){t.a==yt&&(t===n&&(e=gt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,kt(n,t.Nc,t.Oc,t)||(t.i=n,t.a=e,t.c=null,xt(t),e!=gt||n instanceof Rt||function(t,e){t.g=!0,lt(function(){t.g&&Pt.call(null,e)})}(t,n)))}function kt(t,e,n,r){if(t instanceof dt)return Ct(t,wt(e||o,n||null,r)),!0;if(_(t))return t.then(e,n,r),!0;if(h(t))try{var i=t.then;if(l(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(a){return n.call(r,a),!0}return!1}function xt(t){t.h||(t.h=!0,lt(t.Yb,t))}function Nt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Dt(t,e,n,r){if(n==gt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ot(e,n,r);else try{e.c?e.g.call(e.f):Ot(e,n,r)}catch(i){Pt.call(null,i)}I(bt,e)}function Ot(t,e,n){e==mt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}dt.prototype.then=function(t,e,n){return It(this,l(t)?t:null,l(e)?e:null,n)},w(dt),(t=dt.prototype).ia=function(t,e){return(t=wt(t,t,e)).c=!0,Ct(this,t),this},t.s=function(t,e){return It(this,null,t,e)},t.cancel=function(t){this.a==yt&&lt(function(){!function t(e,n){if(e.a==yt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==yt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Nt(r),Dt(r,o,gt,n)))}e.c=null}else At(e,gt,n)}(this,new Rt(t))},this)},t.Nc=function(t){this.a=yt,At(this,mt,t)},t.Oc=function(t){this.a=yt,At(this,gt,t)},t.Yb=function(){for(var t;t=Nt(this);)Dt(this,t,this.a,this.i);this.h=!1};var Pt=ct;function Rt(t){S.call(this,t)}function Mt(){0!=Lt&&(Ft[this[f]||(this[f]=++p)]=this),this.qa=this.qa,this.ja=this.ja}b(Rt,S),Rt.prototype.name="cancel";var Lt=0,Ft={};function Ut(t){if(!t.qa&&(t.qa=!0,t.va(),0!=Lt)){var e=t[f]||(t[f]=++p);if(0!=Lt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ft[e]}}function jt(t){return jt[" "](t),t}Mt.prototype.qa=!1,Mt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},jt[" "]=o;var Vt,qt,Bt=et("Opera"),Kt=et("Trident")||et("MSIE"),Ht=et("Edge"),zt=Ht||Kt,Qt=et("Gecko")&&!(Z(K.toLowerCase(),"webkit")&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),Wt=Z(K.toLowerCase(),"webkit")&&!et("Edge");function Gt(){var t=n.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(qt=K,Qt?/rv:([^\);]+)(\)|;)/.exec(qt):Ht?/Edge\/([\d\.]+)/.exec(qt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):Wt?/WebKit\/(\S+)/.exec(qt):Bt?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Kt){var Zt=Gt();if(null!=Zt&&Zt>parseFloat(Yt)){Vt=String(Zt);break t}}Vt=Yt}var Jt,$t={};function te(t){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=q(String(Vt)).split("."),r=q(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=J(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||J(0==a[2].length,0==s[2].length)||J(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ee=n.document;Jt=ee&&Kt?Gt()||("CSS1Compat"==ee.compatMode?parseInt(Vt,10):5):void 0;var ne=Object.freeze||function(t){return t},re=!Kt||9<=Number(Jt),ie=Kt&&!te("9"),oe=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return n.addEventListener("test",o,e),n.removeEventListener("test",o,e),t}();function ae(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function se(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{jt(e.nodeName);var o=!0;break t}catch(a){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=r(t.pointerType)?t.pointerType:ue[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ae.prototype.preventDefault=function(){this.Kb=!1},b(se,ae);var ue=ne({2:"touch",3:"pen",4:"mouse"});se.prototype.preventDefault=function(){se.ob.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ie)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},se.prototype.f=function(){return this.a};var ce="closure_listenable_"+(1e6*Math.random()|0),le=0;function he(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++le,this.oa=this.Ia=!1}function fe(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function pe(t){this.src=t,this.a={},this.b=0}function de(t,e){var n=e.type;n in t.a&&L(t.a[n],e)&&(fe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}pe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ye(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new he(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ve(t,e,n,r,i){if(r&&r.once)we(t,e,n,r,i);else if(u(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else n=xe(n),t&&t[ce]?De(t,e,n,h(r)?!!r.capture:!!r,i):be(t,e,n,!1,r,i)}function be(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i,s=Ae(t);if(s||(t[me]=s=new pe(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=Ie,e=re?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)oe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function we(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else n=xe(n),t&&t[ce]?Oe(t,e,n,h(r)?!!r.capture:!!r,i):be(t,e,n,!0,r,i)}function _e(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=xe(n),t&&t[ce]?(t=t.l,(e=String(e).toString())in t.a&&-1<(n=ye(o=t.a[e],n,r,i))&&(fe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ae(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ye(e,n,r,i)),(n=-1<t?e[t]:null)&&Se(n))}function Se(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[ce])de(e.l,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ae(e))?(de(n,t),0==n.b&&(n.src=null,e[me]=null)):fe(t)}}}function Ee(t){return t in ge?ge[t]:ge[t]="on"+t}function Te(t,e,n,r){var i=!0;if((t=Ae(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Ce(o,r),i=i&&!1!==o)}return i}function Ce(t,e){var n=t.listener,r=t.La||t.src;return t.Ia&&Se(t),n.call(r,e)}function Ie(t,e){if(t.oa)return!0;if(!re){if(!e)t:{e=["window","event"];for(var r=n,i=0;i<e.length;i++)if(null==(r=r[e[i]])){e=null;break t}e=r}if(e=new se(i=e,this),r=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){o=!0}(o||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=e.b;o;o=o.parentNode)i.push(o);for(t=t.type,o=i.length-1;0<=o;o--){e.b=i[o];var a=Te(i[o],t,!0,e);r=r&&a}for(o=0;o<i.length;o++)e.b=i[o],a=Te(i[o],t,!1,e),r=r&&a}return r}return Ce(t,new se(e,this))}function Ae(t){return(t=t[me])instanceof pe?t:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(t){return l(t)?t:(t[ke]||(t[ke]=function(e){return t.handleEvent(e)}),t[ke])}function Ne(){Mt.call(this),this.l=new pe(this),this.Rb=this,this.Va=null}function De(t,e,n,r,i){t.l.add(String(e),n,!1,r,i)}function Oe(t,e,n,r,i){t.l.add(String(e),n,!0,r,i)}function Pe(t,e,n,r){if(!(e=t.l.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&de(t.l,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Re(t,e,r){if(l(t))r&&(t=m(t,r));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:n.setTimeout(t,e||0)}function Me(t){var e=null;return new dt(function(n,r){-1==(e=Re(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw n.clearTimeout(e),t})}function Le(t){if(t.S&&"function"==typeof t.S)return t.S();if(r(t))return t.split("");if(c(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Fe(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(c(t)||r(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function Ue(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ue)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ve(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ve(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ve(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(Ne,Mt),Ne.prototype[ce]=!0,Ne.prototype.addEventListener=function(t,e,n,r){ve(this,t,e,n,r)},Ne.prototype.removeEventListener=function(t,e,n,r){_e(this,t,e,n,r)},Ne.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Rb;var i=t.type||t;if(r(t))t=new ae(t,n);else if(t instanceof ae)t.target=t.target||n;else{var o=t;ut(t=new ae(i,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];o=Pe(s,i,!0,t)&&o}if(o=Pe(s=t.b=n,i,!0,t)&&o,o=Pe(s,i,!1,t)&&o,e)for(a=0;a<e.length;a++)o=Pe(s=t.b=e[a],i,!1,t)&&o;return o},Ne.prototype.va=function(){if(Ne.ob.va.call(this),this.l){var t,e=this.l;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fe(n[r]);delete e.a[t],e.b--}}this.Va=null},(t=Ue.prototype).S=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return je(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Ve(this.b,t)?this.b[t]:e},t.set=function(t,e){Ve(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qe=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Be(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Be){this.f=void 0!==e?e:t.f,Ke(this,t.c),this.l=t.l,this.b=t.b,He(this,t.i),this.g=t.g,e=t.a;var n=new on;n.c=e.c,e.a&&(n.a=new Ue(e.a),n.b=e.b),ze(this,n),this.h=t.h}else t&&(n=String(t).match(qe))?(this.f=!!e,Ke(this,n[1]||"",!0),this.l=Xe(n[2]||""),this.b=Xe(n[3]||"",!0),He(this,n[4]),this.g=Xe(n[5]||"",!0),ze(this,n[6]||"",!0),this.h=Xe(n[7]||"")):(this.f=!!e,this.a=new on(null,this.f))}function Ke(t,e,n){t.c=n?Xe(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function He(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function ze(t,e,n){e instanceof on?(t.a=e,function(t,e){e&&!t.f&&(an(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),ln(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Ze(e,nn)),t.a=new on(e,t.f))}function Qe(t,e,n){t.a.set(e,n)}function We(t,e){return t.a.get(e)}function Ge(t){return t instanceof Be?new Be(t):new Be(t,void 0)}function Ye(t,e){var n=new Be(null,void 0);return Ke(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Xe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ze(t,e,n){return r(t)?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Be.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Ze(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Ze(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ze(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Ze(n,rn)),t.join("")};var $e=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;function on(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(t){t.a||(t.a=new Ue,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sn(t){var e=Fe(t);if(void 0===e)throw Error("Keys are undefined");var n=new on(null,void 0);t=Le(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];u(o)?ln(n,i,o):n.add(i,o)}return n}function un(t,e){an(t),e=hn(t,e),Ve(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ve((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function cn(t,e){return an(t),e=hn(t,e),Ve(t.a.b,e)}function ln(t,e,n){un(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),j(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=on.prototype).add=function(t,e){an(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){an(this),this.a.forEach(function(n,r){O(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){an(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){an(this);var e=[];if(r(t))cn(this,t)&&(e=U(e,this.a.get(hn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=U(e,t[n])}return e},t.set=function(t,e){return an(this),this.c=null,cn(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var fn=!Kt||9<=Number(Jt);function pn(){this.a="",this.b=yn}function dn(t){return t instanceof pn&&t.constructor===pn&&t.b===yn?t.a:(T("expected object of type Const, got '"+t+"'"),"type_error:Const")}pn.prototype.na=!0,pn.prototype.ma=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var yn={};function mn(t){var e=new pn;return e.a=t,e}function gn(){this.a="",this.b=Sn}function vn(t){return t instanceof gn&&t.constructor===gn&&t.b===Sn?t.a:(T("expected object of type TrustedResourceUrl, got '"+t+"' of type "+a(t)),"type_error:TrustedResourceUrl")}function bn(t,e){var n=dn(t);if(!_n.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new gn;return e.a=t,e}(t=n.replace(wn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof pn?dn(t):encodeURIComponent(String(t))}))}mn(""),gn.prototype.na=!0,gn.prototype.ma=function(){return this.a},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wn=/%{(\w+)}/g,_n=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,Sn={};function En(){this.a="",this.b=An}function Tn(t){return t instanceof En&&t.constructor===En&&t.b===An?t.a:(T("expected object of type SafeUrl, got '"+t+"' of type "+a(t)),"type_error:SafeUrl")}En.prototype.na=!0,En.prototype.ma=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Cn=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function In(t){return t instanceof En?t:(t=t.na?t.ma():String(t),Cn.test(t)||(t="about:invalid#zClosurez"),kn(t))}var An={};function kn(t){var e=new En;return e.a=t,e}function xn(){this.a="",this.b=Nn}kn("about:blank"),xn.prototype.na=!0,xn.prototype.ma=function(){return this.a},xn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nn={};function Dn(t){var e=new xn;return e.a=t,e}function On(t){var e=document;return r(t)?e.getElementById(t):t}function Pn(t,e){nt(e,function(e,n){e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Rn.hasOwnProperty(n)?t.setAttribute(Rn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Dn("<!DOCTYPE html>"),Dn(""),Dn("<br>");var Rn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Mn(t){if(t&&"number"==typeof t.length){if(h(t))return"function"==typeof t.item||"string"==typeof t.item;if(l(t))return"function"==typeof t.item}return!1}function Ln(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(u(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Vn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Vn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Fn,t,e),e.join("")}function Fn(){}var Un={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Vn(t,e){e.push('"',t.replace(jn,function(t){var e=Un[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Un[t]=e),e}),'"')}function qn(){var t=ar();return Kt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function Bn(){return n.window&&n.window.location.href||self&&self.location&&self.location.href||""}function Kn(t,e){e=e||n.window;var r="about:blank";t&&(r=Tn(In(t))),e.location.href=r}function Hn(t){return!!((t=(t||ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function zn(t){t=t||n.window;try{t.close()}catch(e){}}function Qn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ar().toLowerCase(),r&&(e.target=r,Z(n,"crios/")&&(e.target="_blank")),rr(ar())==er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof En?n:In(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((et("iPhone")&&!et("iPod")&&!et("iPad")||et("iPad")||et("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=r.document.createElement("A"),e instanceof En||e instanceof En||(e=e.na?e.ma():String(e),Cn.test(e)||(e="about:invalid#zClosurez"),e=kn(e)),s.href=Tn(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Tn(e),s&&(zt&&Z(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,mn("b/12014412, meta tag with sanitized URL"),t=Dn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+B(t)+'">'),s.document.write(function(t){return t instanceof xn&&t.constructor===xn&&t.b===Nn?t.a:(T("expected object of type SafeHtml, got '"+t+"' of type "+a(t)),"type_error:SafeHtml")}(t)),s.document.close())):(s=r.open(Tn(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(u){}return s}var Wn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gn=/^[^@]+@[^@]+$/;function Yn(){var t=null;return new dt(function(e){"complete"==n.document.readyState?e():(t=function(){e()},we(window,"load",t))}).s(function(e){throw _e(window,"load",t),e})}function Xn(t){return t=t||ar(),!("file:"!==hr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){var t=n.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Jn(){return"object"!=typeof n.window&&"function"==typeof n.importScripts}function $n(){return Rp.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Rp.a.INTERNAL.hasOwnProperty("node")?"Node":Jn()?"Worker":"Browser"}function tr(){var t=$n();return"ReactNative"===t||"Node"===t}var er="Firefox",nr="Chrome";function rr(t){var e=t.toLowerCase();return Z(e,"opera/")||Z(e,"opr/")||Z(e,"opios/")?"Opera":Z(e,"iemobile")?"IEMobile":Z(e,"msie")||Z(e,"trident/")?"IE":Z(e,"edge/")?"Edge":Z(e,"firefox/")?er:Z(e,"silk/")?"Silk":Z(e,"blackberry")?"Blackberry":Z(e,"webos")?"Webos":!Z(e,"safari/")||Z(e,"chrome/")||Z(e,"crios/")||Z(e,"android")?!Z(e,"chrome/")&&!Z(e,"crios/")||Z(e,"edge/")?Z(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":nr:"Safari"}var ir={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function or(t,e){e=e||[];var n,r=[],i={};for(n in ir)i[ir[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=$n())?r=rr(i=ar()):"Worker"===r&&(r=rr(i=ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ar(){return n.navigator&&n.navigator.userAgent||""}function sr(t,e){t=t.split("."),e=e||n;for(var r=0;r<t.length&&"object"==typeof e&&null!=e;r++)e=e[t[r]];return r!=t.length&&(e=void 0),e}function ur(){try{var t=n.localStorage,e=mr();if(t)return t.setItem(e,"1"),t.removeItem(e),!qn()||!!n.indexedDB}catch(r){return Jn()&&!!n.indexedDB}return!1}function cr(){return(lr()||"chrome-extension:"===hr()||Xn())&&!tr()&&ur()&&!Jn()}function lr(){return"http:"===hr()||"https:"===hr()}function hr(){return n.location&&n.location.protocol||null}function fr(t){return!Hn(t=t||ar())&&rr(t)!=er}function pr(t){return void 0===t?null:Ln(t)}function dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function yr(t){if(null!==t)return JSON.parse(t)}function mr(t){return t||Math.floor(1e9*Math.random()).toString()}function gr(t){return"Safari"!=rr(t=t||ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vr(){var t=n.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var r=0;r<t.CP.length;r++)t.CP[r]=null}function br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ar(),e=$n(),this.b=Hn(t)||"ReactNative"===e}function wr(){var t=n.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function _r(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Sr(){return!(!sr("fireauth.oauthhelper",n)&&!sr("fireauth.iframe",n))}br.prototype.get=function(){var t=n.navigator;return!t||"boolean"!=typeof t.onLine||!lr()&&"chrome-extension:"!==hr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Er,Tr={};function Cr(t){Tr[t]||(Tr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ir={};Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:2}),Er=2==Ir.abcd}catch(qt){Er=!1}function Ar(t,e,n){Er?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function kr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ar(t,n,e[n])}function xr(t){var e={};return kr(e,t),e}function Nr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ar(e,n,Nr(t[n]));return e}function Dr(t){var e={},n=t[Pr],r=t[Rr];if(!(t=t[Mr])||t!=Or&&!n)throw Error("Invalid provider user info!");e[Fr]=r||null,e[Lr]=n||null,Ar(this,jr,t),Ar(this,Ur,Nr(e))}var Or="EMAIL_SIGNIN",Pr="email",Rr="newEmail",Mr="requestType",Lr="email",Fr="fromEmail",Ur="data",jr="operation";function Vr(t,e){this.code=Br+t,this.message=e||Kr[t]||""}function qr(t){var e=t&&t.code;return e?new Vr(e.substring(Br.length),t.message):null}b(Vr,Error),Vr.prototype.C=function(){return{code:this.code,message:this.message}},Vr.prototype.toJSON=function(){return this.C()};var Br="auth/",Kr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Hr(t){var e=t[Yr];if(void 0===e)throw new Vr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Vr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[zr];if(n&&"object"==typeof n){e=n[Jr];var r=n[Xr];if(n=n[Zr],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Vr("argument-error",Xr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Vr("argument-error",Zr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Vr("argument-error",Jr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Vr("missing-android-pkg-name")}}else if(void 0!==n)throw new Vr("argument-error",zr+" property must be a non null object when specified.");if(this.f=null,(e=t[Gr])&&"object"==typeof e){if("string"==typeof(e=e[$r])&&e.length)this.f=e;else if(void 0!==e)throw new Vr("argument-error",$r+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Vr("argument-error",Gr+" property must be a non null object when specified.");if(void 0!==(e=t[Wr])&&"boolean"!=typeof e)throw new Vr("argument-error",Wr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Qr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Vr("argument-error",Qr+" property must be a non empty string when specified.");this.i=t||null}var zr="android",Qr="dynamicLinkDomain",Wr="handleCodeInApp",Gr="iOS",Yr="url",Xr="installApp",Zr="minimumVersion",Jr="packageName",$r="bundleId";function ti(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ei=null,ni=null;function ri(t){this.c=t.sub,v(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ii(t){return(t=oi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ri(t):null}function oi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ni[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ei){ei={},ni={};for(var t=0;65>t;t++)ei[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),ni[ei[t]]=t,62<=t&&(ni["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}ri.prototype.f=function(){return this.b};var ai,si={$c:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ui(t){for(var e in si)if(si[e].id===t)return{firebaseEndpoint:(t=si[e]).ab,secureTokenEndpoint:t.ib};return null}ai=ui("__EID__")?"__EID__":void 0;var ci="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),li=["client_id","response_type","scope","redirect_uri","state"],hi={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",hb:li},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",hb:li},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",hb:li},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",hb:ci}};function fi(t){for(var e in hi)if(hi[e].Na==t)return hi[e];return null}function pi(t){var e={};e["facebook.com"]=vi,e["google.com"]=wi,e["github.com"]=bi,e["twitter.com"]=_i;var n=t&&t[yi];try{if(n)return e[n]?new e[n](t):new gi(t);if(void 0!==t[di])return new mi(t)}catch(r){}return null}var di="idToken",yi="providerId";function mi(t){var e=t[yi];if(!e&&t[di]){var n=ii(t[di]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ar(this,"providerId",e),Ar(this,"isNewUser",n)}function gi(t){mi.call(this,t),Ar(this,"profile",Nr((t=yr(t.rawUserInfo||"{}"))||{}))}function vi(t){if(gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function bi(t){if(gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",this.profile&&this.profile.login||null)}function wi(t){if(gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function _i(t){if(gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",t.screenName||null)}function Si(t){this.a=Ge(t)}function Ei(t){var e=Ge(t),n=We(e,"link"),r=We(Ge(n),"link");return e=We(e,"deep_link_id"),We(Ge(e),"link")||e||r||n||t}function Ti(t,e){return t.then(function(t){if(t[ia]){var n=ii(t[ia]);if(!n||e!=n.c)throw new Vr("user-mismatch");return t}throw new Vr("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Br+"user-not-found"?new Vr("user-mismatch"):t})}function Ci(t,e){if(!e)throw new Vr("internal-error","failed to construct a credential");this.a=e,Ar(this,"providerId",t),Ar(this,"signInMethod",t)}function Ii(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Ai(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ar(this,"idToken",e.idToken),e.accessToken&&Ar(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ar(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Vr("internal-error","failed to construct a credential");Ar(this,"accessToken",e.oauthToken),Ar(this,"secret",e.oauthTokenSecret)}Ar(this,"providerId",t),Ar(this,"signInMethod",n)}function ki(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:sn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function xi(t,e){this.Dc=e||[],kr(this,{providerId:t,isOAuthProvider:!0}),this.yb={},this.cb=(fi(t)||{}).Ma||null,this.$a=null}function Ni(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Vr("argument-error",'SAML provider IDs must be prefixed with "saml."');xi.call(this,t,[])}function Di(t){xi.call(this,t,li),this.a=[]}function Oi(){Di.call(this,"facebook.com")}function Pi(t){if(!t)throw new Vr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new Oi).credential(null,e)}function Ri(){Di.call(this,"github.com")}function Mi(t){if(!t)throw new Vr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new Ri).credential(null,e)}function Li(){Di.call(this,"google.com"),this.ua("profile")}function Fi(t,e){var n=t;return h(t)&&(n=t.idToken,e=t.accessToken),(new Li).credential(n,e)}function Ui(){xi.call(this,"twitter.com",ci)}function ji(t,e){var n=t;if(h(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Vr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ai("twitter.com",n,"twitter.com")}function Vi(t,e,n){this.a=t,this.c=e,Ar(this,"providerId","password"),Ar(this,"signInMethod",n===qi.EMAIL_LINK_SIGN_IN_METHOD?qi.EMAIL_LINK_SIGN_IN_METHOD:qi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function qi(){kr(this,{providerId:"password",isOAuthProvider:!1})}function Bi(t,e){if(!(e=Ki(e)))throw new Vr("argument-error","Invalid email link!");return new Vi(t,e,qi.EMAIL_LINK_SIGN_IN_METHOD)}function Ki(t){var e=We((t=new Si(t=Ei(t))).a,"oobCode")||null;return"signIn"===(We(t.a,"mode")||null)&&e?e:null}function Hi(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Vr("internal-error");this.a=t,Ar(this,"providerId","phone"),Ar(this,"signInMethod","phone")}function zi(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function Qi(t){try{this.a=t||Rp.a.auth()}catch(e){throw new Vr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}kr(this,{providerId:"phone",isOAuthProvider:!1})}function Wi(t,e){if(!t)throw new Vr("missing-verification-id");if(!e)throw new Vr("missing-verification-code");return new Hi({Ta:t,Sa:e})}function Gi(t){if(t.temporaryProof&&t.phoneNumber)return new Hi({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Fi(o,n);case"facebook.com":return Pi(n);case"github.com":return Mi(n);case"twitter.com":return ji(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Ci(e,a):new Ai(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Di(e).credential(o,n,i):null}}catch(s){return null}}function Yi(t){if(!t.isOAuthProvider)throw new Vr("invalid-oauth-provider")}function Xi(t,e,n,r,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new Vr("invalid-auth-event");if(this.f&&this.a)throw new Vr("invalid-auth-event");if(this.f&&!this.g)throw new Vr("invalid-auth-event")}function Zi(t){return(t=t||{}).type?new Xi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&qr(t.error),t.postBody):null}function Ji(){this.b=null,this.a=[]}b(gi,mi),b(vi,gi),b(bi,gi),b(wi,gi),b(_i,gi),Ci.prototype.la=function(t){return Sa(t,Ii(this))},Ci.prototype.b=function(t,e){var n=Ii(this);return n.idToken=e,Ea(t,n)},Ci.prototype.f=function(t,e){return Ti(Ta(t,Ii(this)),e)},Ci.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ai.prototype.la=function(t){return Sa(t,ki(this))},Ai.prototype.b=function(t,e){var n=ki(this);return n.idToken=e,Ea(t,n)},Ai.prototype.f=function(t,e){return Ti(Ta(t,ki(this)),e)},Ai.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},xi.prototype.Da=function(t){return this.yb=it(t),this},b(Ni,xi),b(Di,xi),Di.prototype.ua=function(t){return M(this.a,t)||this.a.push(t),this},Di.prototype.Eb=function(){return j(this.a)},Di.prototype.credential=function(t,e,n){if(!t&&!e)throw new Vr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ai(this.providerId,{idToken:t||null,accessToken:e||null,nonce:n||null},this.providerId)},b(Oi,Di),Ar(Oi,"PROVIDER_ID","facebook.com"),Ar(Oi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(Ri,Di),Ar(Ri,"PROVIDER_ID","github.com"),Ar(Ri,"GITHUB_SIGN_IN_METHOD","github.com"),b(Li,Di),Ar(Li,"PROVIDER_ID","google.com"),Ar(Li,"GOOGLE_SIGN_IN_METHOD","google.com"),b(Ui,xi),Ar(Ui,"PROVIDER_ID","twitter.com"),Ar(Ui,"TWITTER_SIGN_IN_METHOD","twitter.com"),Vi.prototype.la=function(t){return this.signInMethod==qi.EMAIL_LINK_SIGN_IN_METHOD?$a(t,Oa,{email:this.a,oobCode:this.c}):$a(t,Ya,{email:this.a,password:this.c})},Vi.prototype.b=function(t,e){return this.signInMethod==qi.EMAIL_LINK_SIGN_IN_METHOD?$a(t,Pa,{idToken:e,email:this.a,oobCode:this.c}):$a(t,Ka,{idToken:e,email:this.a,password:this.c})},Vi.prototype.f=function(t,e){return Ti(this.la(t),e)},Vi.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},kr(qi,{PROVIDER_ID:"password"}),kr(qi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),kr(qi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Hi.prototype.la=function(t){return t.Ua(zi(this))},Hi.prototype.b=function(t,e){var n=zi(this);return n.idToken=e,$a(t,Za,n)},Hi.prototype.f=function(t,e){var n=zi(this);return n.operation="REAUTH",Ti(t=$a(t,Ja,n),e)},Hi.prototype.C=function(){var t={providerId:"phone"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},Qi.prototype.Ua=function(t,e){var n=this.a.b;return _t(e.verify()).then(function(i){if(!r(i))throw new Vr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return $a(n,qa,e)}(0,{phoneNumber:t,recaptchaToken:i}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Vr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},kr(Qi,{PROVIDER_ID:"phone"}),kr(Qi,{PHONE_SIGN_IN_METHOD:"phone"}),Xi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var $i,to=null;function eo(t){var e="unauthorized-domain",n=void 0,r=Ge(t);t=r.b,"chrome-extension"==(r=r.c)?n=V("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=V("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Vr.call(this,e,n)}function no(t,e,n){Vr.call(this,t,n),(t=e||{}).zb&&Ar(this,"email",t.zb),t.$&&Ar(this,"phoneNumber",t.$),t.credential&&Ar(this,"credential",t.credential)}function ro(t){if(t.code){var e=t.code||"";0==e.indexOf(Br)&&(e=e.substring(Br.length));var n={credential:Gi(t)};if(t.email)n.zb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Vr(e,t.message||void 0);return new no(e,n,t.message)}return null}function io(){}function oo(){}function ao(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function so(){}function uo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=m(this.ec,this),this.a.onerror=m(this.Fb,this),this.a.onprogress=m(this.fc,this),this.a.ontimeout=m(this.ic,this)}function co(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function lo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ho(t){this.f=t,this.b=this.c=this.a=null}function fo(t,e){this.name=t,this.value=e}Ji.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=sr("universalLinks.subscribe",n))&&t(null,this.b))},Ji.prototype.unsubscribe=function(t){F(this.a,function(e){return e==t})},b(eo,Vr),b(no,Vr),no.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ut(t,e),t},no.prototype.toJSON=function(){return this.C()},io.prototype.c=null,b(oo,io),oo.prototype.a=function(){var t=ao(this);return t?new ActiveXObject(t):new XMLHttpRequest},oo.prototype.b=function(){var t={};return ao(this)&&(t[0]=!0,t[1]=!0),t},$i=new oo,b(so,io),so.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new uo;throw Error("Unsupported browser")},so.prototype.b=function(){return{}},(t=uo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ec=function(){this.status=200,this.responseText=this.a.responseText,co(this,4)},t.Fb=function(){this.status=500,this.responseText="",co(this,4)},t.ic=function(){this.Fb()},t.fc=function(){this.status=200,co(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},lo.prototype.a=null,lo.prototype.reset=function(t,e,n,r,i){r||v(),delete this.a},fo.prototype.toString=function(){return this.name};var po=new fo("SEVERE",1e3),yo=new fo("WARNING",900),mo=new fo("CONFIG",700),go=new fo("FINE",500);ho.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(T("Root logger has no level set."),null)}(this).value)for(l(e)&&(e=e()),t=new lo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var vo={},bo=null;function wo(t){var e;if(bo||(bo=new ho(""),vo[""]=bo,bo.c=mo),!(e=vo[t])){e=new ho(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=wo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,vo[t]=e}return e}function _o(t,e){t&&t.log(go,e,void 0)}function So(t){this.f=t}function Eo(t){Ne.call(this),this.i=t,this.readyState=To,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=wo("goog.net.FetchXmlHttp")}b(So,io),So.prototype.a=function(){return new Eo(this.f)},So.prototype.b=function(t){return function(){return t}}({}),b(Eo,Ne);var To=0;function Co(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Io(t){Ne.call(this),this.headers=new Ue,this.D=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.m="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Ao,this.v=this.O=!1}(t=Eo.prototype).open=function(t,e){if(this.readyState!=To)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,Co(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.hc.bind(this),this.Gb.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,Co(this)),this.readyState=To},t.hc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,Co(this)),this.a&&(this.readyState=3,Co(this),this.a&&t.text().then(this.gc.bind(this,t),this.Gb.bind(this))))},t.gc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,Co(this))},t.Gb=function(t){var e=this.f;e&&e.log(yo,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,Co(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(yo,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(yo,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(Io,Ne);var Ao="";Io.prototype.b=wo("goog.net.XhrIo");var ko=/^https?$/i,xo=["POST","PUT"];function No(t){return"content-type"==t.toLowerCase()}function Do(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Oo(t),Ro(t)}function Oo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Po(t){if(t.c&&void 0!==e)if(t.w[1]&&4==Lo(t)&&2==Fo(t))_o(t.b,Uo(t,"Local request error detected and ignored"));else if(t.i&&4==Lo(t))Re(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==Lo(t)){_o(t.b,Uo(t,"Request complete")),t.c=!1;try{var r,i=Fo(t);t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(r=o)){var a;if(a=0===i){var s=String(t.m).match(qe)[1]||null;if(!s&&n.self&&n.self.location){var u=n.self.location.protocol;s=u.substr(0,u.length-1)}a=!ko.test(s?s.toLowerCase():"")}r=a}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Lo(t)?t.a.statusText:""}catch(l){_o(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Fo(t)+"]",Oo(t)}}finally{Ro(t)}}}function Ro(t,e){if(t.a){Mo(t);var n=t.a,r=t.w[0]?o:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(po,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Mo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(n.clearTimeout(t.u),t.u=null)}function Lo(t){return t.a?t.a.readyState:0}function Fo(t){try{return 2<Lo(t)?t.a.status:-1}catch(e){return-1}}function Uo(t,e){return e+" ["+t.N+" "+t.m+" "+Fo(t)+"]"}function jo(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.m=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Vo(t,e,n){t.a=!0,t.c=n,t.f=!e,Ho(t)}function qo(t){if(t.a){if(!t.m)throw new zo(t);t.m=!1}}function Bo(t,e,n,r){t.g.push([e,n,r]),t.a&&Ho(t)}function Ko(t){return R(t.g,function(t){return l(t[1])})}function Ho(t){if(t.h&&t.a&&Ko(t)){var e=t.h,r=Go[e];r&&(n.clearTimeout(r.a),delete Go[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=r=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.u,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(_(e)||"function"==typeof n.Promise&&e instanceof n.Promise)&&(i=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ko(t)||(r=!0)}}t.c=e,i&&(u=m(t.o,t,!0),i=m(t.o,t,!1),e instanceof jo?(Bo(e,u,i),e.w=!0):e.then(u,i)),r&&(e=new Wo(e),Go[e.a]=e,t.h=e.a)}function zo(){S.call(this)}function Qo(){S.call(this)}function Wo(t){this.a=n.setTimeout(m(this.c,this),0),this.b=t}(t=Io.prototype).Ga=function(){void 0!==e&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",_o(this.b,Uo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(_o(this.b,Uo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ro(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ro(this,!0)),Io.ob.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Po(this):this.wc())},t.wc=function(){Po(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Ao:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(po,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return _o(this.b,"Can not get response: "+e.message),null}},jo.prototype.cancel=function(t){if(this.a)this.c instanceof jo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.u,this):this.m=!0,this.a||(t=new Qo(this),qo(this),Vo(this,!1,t))}},jo.prototype.o=function(t,e){this.i=!1,Vo(this,t,e)},jo.prototype.D=function(){qo(this),Vo(this,!0,null)},jo.prototype.then=function(t,e,n){var r,i,o=new dt(function(t,e){r=t,i=e});return Bo(this,r,function(t){t instanceof Qo?o.cancel():i(t)}),o.then(t,e,n)},w(jo),b(zo,S),zo.prototype.message="Deferred has already fired",zo.prototype.name="AlreadyCalledError",b(Qo,S),Qo.prototype.message="Deferred was canceled",Qo.prototype.name="CanceledError",Wo.prototype.c=function(){throw delete Go[this.a],this.b};var Go={};function Yo(t){var e={},n=e.document||document,r=vn(t),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new jo(Xo,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Zo(i,!0);var t=new ta($o,"Timeout reached for loading script "+r);qo(a),Vo(a,!1,t)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Zo(i,e.fd||!1,s),a.D())},i.onerror=function(){Zo(i,!0,s);var t=new ta(Jo,"Error while loading script "+r);qo(a),Vo(a,!1,t)},ut(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Pn(i,o),i.src=vn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Xo(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&Zo(t,!0,this.Ga)}}function Zo(t,e,r){null!=r&&n.clearTimeout(r),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Jo=0,$o=1;function ta(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function ea(t){this.f=t}function na(t,e,r){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||oa,this.f=it(t.secureTokenHeaders||aa),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||sa,this.a=it(t.firebaseHeaders||ua),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==$n(),!(r=n.XMLHttpRequest||r&&Rp.a.INTERNAL.node&&Rp.a.INTERNAL.node.XMLHttpRequest)&&!Jn())throw new Vr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=Jn()?new So(self):tr()?new ea(r):new so}b(ta,S),b(ea,io),ea.prototype.a=function(){return new this.f},ea.prototype.b=function(){return{}};var ra,ia="idToken",oa=new br(3e4,6e4),aa={"Content-Type":"application/x-www-form-urlencoded"},sa=new br(3e4,6e4),ua={"Content-Type":"application/json"};function ca(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function la(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function ha(t,e,r,i,o,a,s){(function(){var t=ar();return!((t=rr(t)!=nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Kt&&Jt&&!(9<Jt))})()||Jn()?t=m(t.o,t):(ra||(ra=new dt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{n[pa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var r=bn(fa,{onload:pa});!function(t,e){Bo(Yo(r),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=m(t.m,t)),t(e,r,i,o,a,s)}na.prototype.o=function(t,e,i,o,a,s){if(Jn()&&(void 0===n.fetch||void 0===n.Headers||void 0===n.Request))throw new Vr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Io(this.c);if(s){u.g=Math.max(0,s);var l=setTimeout(function(){u.dispatchEvent("timeout")},s)}De(u,"complete",function(){l&&clearTimeout(l);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return _o(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Oe(u,"ready",function(){l&&clearTimeout(l),Ut(this)}),Oe(u,"timeout",function(){l&&clearTimeout(l),Ut(this),e&&e(null)}),function(t,e,i,o,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.m+"; newUri="+e);i=i?i.toUpperCase():"GET",t.m=e,t.h="",t.N=i,t.G=!1,t.c=!0,t.a=t.D?t.D.a():$i.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.D?t.D:$i),t.a.onreadystatechange=m(t.Jb,t);try{_o(t.b,Uo(t,"Opening Xhr")),t.I=!0,t.a.open(i,String(e),!0),t.I=!1}catch(u){return _o(t.b,Uo(t,"Error opening Xhr: "+u.message)),void Do(t,u)}e=o||"";var s=new Ue(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(c(t)||r(t))O(t,e,void 0);else for(var n=Fe(t),i=Le(t),o=i.length,a=0;a<o;a++)e.call(void 0,i[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=No,n=t.length,i=r(t)?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t)){e=o;break t}e=-1}return 0>e?null:r(t)?t.charAt(e):t[e]}(s.U()),o=n.FormData&&e instanceof n.FormData,!M(xo,i)||a||o||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Mo(t),0<t.g&&(t.v=function(t){return Kt&&te(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),_o(t.b,Uo(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ga,t)):t.u=Re(t.Ga,t.g,t)),_o(t.b,Uo(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(u){_o(t.b,Uo(t,"Send error: "+u.message)),Do(t,u)}}(u,t,i,o,a)};var fa=mn("https://apis.google.com/js/client.js?onload=%{onload}"),pa="__fcb"+Math.floor(1e6*Math.random()).toString();function da(t){if(!r(t=t.email)||!Gn.test(t))throw new Vr("invalid-email")}function ya(t){"email"in t&&da(t)}function ma(t){if(!t[ia])throw new Vr("internal-error")}function ga(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Vr("internal-error")}else{if(!t.sessionInfo)throw new Vr("missing-verification-id");if(!t.code)throw new Vr("missing-verification-code")}}na.prototype.m=function(t,e,n,r,i){var o=this;ra.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},na.prototype.Qa=function(){return $a(this,Ha,{})},na.prototype.pb=function(t,e){return $a(this,Ba,{idToken:t,email:e})},na.prototype.qb=function(t,e){return $a(this,Ka,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ba(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Vr("internal-error")}function wa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&cn(t=new on(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=ro(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=ro(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=ro(t)):t.errorMessage&&(e=ts(t.errorMessage)),e)throw e;if(!t[ia])throw new Vr("internal-error")}function Sa(t,e){return e.returnIdpCredential=!0,$a(t,za,e)}function Ea(t,e){return e.returnIdpCredential=!0,$a(t,Wa,e)}function Ta(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,$a(t,Qa,e)}function Ca(t){if(!t.oobCode)throw new Vr("invalid-action-code")}(t=na.prototype).rb=function(t,e){var n={idToken:t},r=[];return nt(va,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),$a(this,Ba,n)},t.kb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),$a(this,Fa,t)},t.lb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),$a(this,Ma,t)},t.jb=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),$a(this,La,t)},t.Ua=function(t){return $a(this,Xa,t)},t.Za=function(t,e){return $a(this,Va,{oobCode:t,newPassword:e})},t.Ja=function(t){return $a(this,Aa,{oobCode:t})},t.Wa=function(t){return $a(this,Ia,{oobCode:t})};var Ia={endpoint:"setAccountInfo",B:Ca,da:"email"},Aa={endpoint:"resetPassword",B:Ca,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Vr("internal-error")}},ka={endpoint:"signupNewUser",B:function(t){if(da(t),!t.password)throw new Vr("weak-password")},J:ma,R:!0},xa={endpoint:"createAuthUri"},Na={endpoint:"deleteAccount",T:["idToken"]},Da={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!u(t.deleteProvider))throw new Vr("internal-error")}},Oa={endpoint:"emailLinkSignin",T:["email","oobCode"],B:da,J:ma,R:!0},Pa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:da,J:ma,R:!0},Ra={endpoint:"getAccountInfo"},Ma={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Vr("internal-error");da(t)},da:"email"},La={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Vr("internal-error")},da:"email"},Fa={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Vr("internal-error");da(t)},da:"email"},Ua={ub:!0,endpoint:"getProjectConfig",Ib:"GET"},ja={ub:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Vr("internal-error")}},Va={endpoint:"resetPassword",B:Ca,da:"email"},qa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ba={endpoint:"setAccountInfo",T:["idToken"],B:ya,R:!0},Ka={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(ya(t),!t.password)throw new Vr("weak-password")},J:ma,R:!0},Ha={endpoint:"signupNewUser",J:ma,R:!0},za={endpoint:"verifyAssertion",B:ba,Oa:wa,J:_a,R:!0},Qa={endpoint:"verifyAssertion",B:ba,Oa:wa,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Vr("user-not-found");if(t.errorMessage)throw ts(t.errorMessage);if(!t[ia])throw new Vr("internal-error")},R:!0},Wa={endpoint:"verifyAssertion",B:function(t){if(ba(t),!t.idToken)throw new Vr("internal-error")},Oa:wa,J:_a,R:!0},Ga={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new Vr("invalid-custom-token")},J:ma,R:!0},Ya={endpoint:"verifyPassword",B:function(t){if(da(t),!t.password)throw new Vr("wrong-password")},J:ma,R:!0},Xa={endpoint:"verifyPhoneNumber",B:ga,J:ma},Za={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new Vr("internal-error");ga(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",ro(t);ma(t)}},Ja={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ga,J:ma};function $a(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.T))return St(new Vr("internal-error"));var r,i=e.Ib||"POST";return _t(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=Ge(t.g+e);Qe(a,"key",t.b),o&&Qe(a,"cb",v().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Qe(a,u,r[u]);return new dt(function(e,o){ha(t,a.toString(),function(t){t?t.error?o(es(t,i||{})):e(t):o(new Vr("network-request-failed"))},n,s?void 0:Ln(dr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Xb,e.ub||!1)}).then(function(t){return r=t,e.Oa?e.Oa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Vr("internal-error");return r[e.da]})}function ts(t){return es({error:{errors:[{message:t}],code:400,message:t}})}function es(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Vr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ut(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Vr(r[i],e);return!e&&t&&(e=pr(t)),new Vr("internal-error",e)}function ns(t){this.b=t,this.a=null,this.fb=function(t){return(as||(as=new dt(function(t,e){function r(){vr(),sr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vr(),e(Error("Network Error"))},timeout:is.get()})}if(sr("gapi.iframes.Iframe"))t();else if(sr("gapi.load"))r();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[i]=function(){sr("gapi.load")?r():e(Error("Network Error"))},_t(Yo(i=bn(rs,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw as=null,t}))).then(function(){return new dt(function(e,n){sr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},os.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var rs=mn("https://apis.google.com/js/api.js?onload=%{onload}"),is=new br(3e4,6e4),os=new br(5e3,15e3),as=null;function ss(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Ye(this.i,"/__/auth/iframe"),Qe(this.a,"apiKey",this.g),Qe(this.a,"appName",this.h),this.b=null,this.c=[]}function us(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function cs(t){try{return Rp.a.app(t).auth().ya()}catch(e){return[]}}function ls(t,e,n,r,i){this.m=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.l=this.a=null}function hs(t){var e=Bn();return function(t){return $a(t,Ua,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ge(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Ge(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Wn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new eo(Bn())})}function fs(t){return t.l?t.l:(t.l=Yn().then(function(){if(!t.u){var e=t.c,n=t.h,r=cs(t.b),i=new ss(t.m,t.f,t.b);i.f=e,i.b=n,i.c=j(r||[]),t.u=i.toString()}t.i=new ns(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Zi(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",_t(n)}return n.status="ERROR",_t(n)})}(t)}),t.l)}function ps(t){return t.o||(t.v=t.c?or(t.c,cs(t.b)):null,t.o=new na(t.f,ui(t.h),t.v)),t.o}function ds(t,e,n,r,i,o,a,s,u,c){return(t=new us(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=it(u||null),t.f=c,t.toString()}function ys(t){if(this.a=t||Rp.a.INTERNAL.reactNative&&Rp.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Vr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ms(t){this.b=t,this.a={},this.c=m(this.f,this)}ss.prototype.toString=function(){return this.f?Qe(this.a,"v",this.f):un(this.a.a,"v"),this.b?Qe(this.a,"eid",this.b):un(this.a.a,"eid"),this.c.length?Qe(this.a,"fw",this.c.join(",")):un(this.a.a,"fw"),this.a.toString()},us.prototype.toString=function(){var t=Ye(this.o,"/__/auth/handler");if(Qe(t,"apiKey",this.m),Qe(t,"appName",this.c),Qe(t,"authType",this.l),this.a.isOAuthProvider){var e=this.a;try{var n=Rp.a.app(this.c).auth().ea()}catch(s){n=null}for(var r in e.$a=n,Qe(t,"providerId",this.a.providerId),n=dr((e=this.a).yb))n[r]=n[r].toString();r=e.Dc,n=it(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),rt(n)||Qe(t,"customParameters",pr(n))}if("function"==typeof this.a.Eb&&(e=this.a.Eb()).length&&Qe(t,"scopes",e.join(",")),this.i?Qe(t,"redirectUrl",this.i):un(t.a,"redirectUrl"),this.g?Qe(t,"eventId",this.g):un(t.a,"eventId"),this.h?Qe(t,"v",this.h):un(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!We(t,a)&&Qe(t,a,this.b[a]);return this.f?Qe(t,"eid",this.f):un(t.a,"eid"),(a=cs(this.c)).length&&Qe(t,"fw",a.join(",")),t.toString()},(t=ls.prototype).Ea=function(t,e,n){var r=new Vr("popup-closed-by-user"),i=new Vr("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return fs(t).then(function(){return function(t,e){return t.fb.then(function(){return new dt(function(n){t.a.send(e.type,e,n,sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&zn(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new dt(function(e){return function n(){Me(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Me(n).then(function(){e(r)})})},t.Mb=function(){var t=ar();return!fr(t)&&!gr(t)},t.Hb=function(){return!1},t.Cb=function(t,e,n,r,i,o,a){if(!t)return St(new Vr("popup-blocked"));if(a&&!fr())return this.ga().s(function(e){zn(t),i(e)}),r(),_t();this.a||(this.a=hs(ps(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw zn(t),i(e),e});return r(),e}).then(function(){Yi(n),a||Kn(ds(s.m,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=hs(ps(this)));var r=this;return this.a.then(function(){Yi(e),Kn(ds(r.m,r.f,r.b,t,e,Bn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ga=function(){var t=this;return fs(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Vr("network-request-failed")})},t.Qb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ka=function(t){F(this.g,function(e){return e==t})},(t=ys.prototype).get=function(t){return _t(this.a.getItem(t)).then(function(t){return t&&yr(t)})},t.set=function(t,e){return _t(this.a.setItem(t,pr(e)))},t.P=function(t){return _t(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var gs,vs=[];function bs(t){this.a=t}function ws(t){this.c=t,this.b=!1,this.a=[]}function _s(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return St(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new dt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ss(t,c),e}).s(function(e){throw Ss(t,c),e})}function Ss(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),F(t.a,function(t){return t==e})}}function Es(){if(!Cs())throw new Vr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=n.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.u=!1,this.h=null;var t=this;Jn()&&self?(this.l=function(){var t=Jn()?self:null;if(O(vs,function(n){n.b==t&&(e=n)}),!e){var e=new ms(t);vs.push(e)}return e}(),this.l.subscribe("keyChanged",function(e,n){return Ns(t).then(function(e){return 0<e.length&&O(t.a,function(t){t(e)}),{keyProcessed:M(e,n.key)}})}),this.l.subscribe("ping",function(){return _t(["keyChanged"])})):function(){var t=n.navigator;return t&&t.serviceWorker?_t().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):_t(null)}().then(function(e){(t.h=e)&&(t.g=new ws(new bs(e)),_s(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&M(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function Ts(t){return t.o||(t.o=function t(e){return new dt(function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new dt(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){r(t)})}})}(t)),t.o}function Cs(){try{return!!n.indexedDB}catch(qt){return!1}}function Is(t){return t.objectStore("firebaseLocalStorage")}function As(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ks(t){return new dt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function xs(t,e){return t.g&&t.h&&function(){var t=n.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?_s(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):_t()}function Ns(t){return Ts(t).then(function(t){var e=Is(As(t,!1));return e.getAll?ks(e.getAll()):new dt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function Ds(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Os(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_t().then(function(){if(Cs()){var t=mr(),r="__sak"+t;return gs||(gs=new Es),(n=gs).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){O(e.a,function(e){e(t)})}),t})}function Ps(){this.a={},this.type="inMemory"}function Rs(){if(!function(){var t="Node"==$n();if(!(t=Ms()||t&&Rp.a.INTERNAL.node&&Rp.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==$n())throw new Vr("internal-error","The LocalStorage compatibility library was not found.");throw new Vr("web-storage-unsupported")}this.a=Ms()||Rp.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ms(){try{var t=n.localStorage,e=mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(r){return null}}function Ls(){this.type="nullStorage"}function Fs(){if(!function(){var t="Node"==$n();if(!(t=Us()||t&&Rp.a.INTERNAL.node&&Rp.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==$n())throw new Vr("internal-error","The SessionStorage compatibility library was not found.");throw new Vr("web-storage-unsupported")}this.a=Us()||Rp.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Us(){try{var t=n.sessionStorage,e=mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(r){return null}}function js(){var t={};t.Browser=Bs,t.Node=Ks,t.ReactNative=Hs,t.Worker=zs,this.a=t[$n()]}ms.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];O(r,function(e){i.push(_t().then(function(){return e(t.origin,t.data.data)}))}),Tt(i).then(function(r){var i=[];O(r,function(t){i.push({fulfilled:t.Db,value:t.value,reason:t.reason?t.reason.message:void 0})}),O(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},ms.prototype.subscribe=function(t,e){rt(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},ms.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(F(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],rt(this.a)&&this.b.removeEventListener("message",this.c)},bs.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},ws.prototype.close=function(){for(;0<this.a.length;)Ss(this,this.a[0]);this.b=!0},(t=Es.prototype).set=function(t,e){var n,r=!1,i=this;return Ts(this).then(function(e){return ks((e=Is(As(n=e,!0))).get(t))}).then(function(o){var a=Is(As(n,!0));return o?(o.value=e,ks(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,ks(a.add(o)))}).then(function(){return i.c[t]=e,xs(i,t)}).ia(function(){r&&i.b--})},t.get=function(t){return Ts(this).then(function(e){return ks(Is(As(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return Ts(this).then(function(r){return e=!0,n.b++,ks(Is(As(r,!0)).delete(t))}).then(function(){return delete n.c[t],xs(n,t)}).ia(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){Ds(t),function e(){t.f=setTimeout(function(){t.i=Ns(t).then(function(e){0<e.length&&O(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){F(this.a,function(e){return e==t}),0==this.a.length&&Ds(this)},(t=Os.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){F(this.a,function(e){return e==t})},(t=Ps.prototype).get=function(t){return _t(this.a[t])},t.set=function(t,e){return this.a[t]=e,_t()},t.P=function(t){return delete this.a[t],_t()},t.Y=function(){},t.ca=function(){},(t=Rs.prototype).get=function(t){var e=this;return _t().then(function(){return yr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return _t().then(function(){var r=pr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return _t().then(function(){e.a.removeItem(t)})},t.Y=function(t){n.window&&ve(n.window,"storage",t)},t.ca=function(t){n.window&&_e(n.window,"storage",t)},(t=Ls.prototype).get=function(){return _t(null)},t.set=function(){return _t()},t.P=function(){return _t()},t.Y=function(){},t.ca=function(){},(t=Fs.prototype).get=function(t){var e=this;return _t().then(function(){return yr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return _t().then(function(){var r=pr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return _t().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var Vs,qs,Bs={A:Rs,Ra:Fs},Ks={A:Rs,Ra:Fs},Hs={A:ys,Ra:Ls},zs={A:Rs,Ra:Ls},Qs={Zc:"local",NONE:"none",ad:"session"};function Ws(){var t=!(gr(ar())||!Zn()),e=fr(),r=ur();this.o=t,this.h=e,this.l=r,this.a={},Vs||(Vs=new js),t=Vs;try{this.g=!qn()&&Sr()||!n.indexedDB?new t.a.A:new Os(Jn()?new Ps:new t.a.A)}catch(i){this.g=new Ps,this.h=!0}try{this.i=new t.a.Ra}catch(i){this.i=new Ps}this.m=new Ps,this.f=m(this.Pb,this),this.b={}}function Gs(){return qs||(qs=new Ws),qs}function Ys(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Xs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Zs(t,e,n){return n=Xs(e,n),"local"==e.A&&(t.b[n]=null),Ys(t,e.A).P(n)}function Js(t){t.c&&(clearInterval(t.c),t.c=null)}function $s(t){this.a=t,this.b=Gs()}(t=Ws.prototype).get=function(t,e){return Ys(this,t.A).get(Xs(t,e))},t.set=function(t,e,n){var r=Xs(t,n),i=this,o=Ys(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},t.addListener=function(t,e,r){t=Xs(t,e),this.l&&(this.b[t]=n.localStorage.getItem(t)),rt(this.a)&&(Ys(this,"local").Y(this.f),this.h||(qn()||!Sr())&&n.indexedDB||!this.l||function(t){Js(t),t.c=setInterval(function(){for(var e in t.a){var r=n.localStorage.getItem(e),i=t.b[e];r!=i&&(t.b[e]=r,r=new se({type:"storage",key:e,target:window,oldValue:i,newValue:r,a:!0}),t.Pb(r))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(r)},t.removeListener=function(t,e,n){t=Xs(t,e),this.a[t]&&(F(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),rt(this.a)&&(Ys(this,"local").ca(this.f),Js(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var r in this.a){var i=this.b[r];void 0===i&&(i=null);var o=n.localStorage.getItem(r);o!==i&&(this.b[r]=o,this.Xa(r))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ys(this,"local").ca(this.f):Js(this),this.o)if(r=n.localStorage.getItem(e),(i=t.a.newValue)!==r)null!==i?n.localStorage.setItem(e,i):n.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var a=this;r=function(){void 0===t.a.a&&a.b[e]===n.localStorage.getItem(e)||(a.b[e]=n.localStorage.getItem(e),a.Xa(e))},Kt&&Jt&&10==Jt&&n.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(r,10):r()}}else O(t,m(this.Xa,this))},t.Xa=function(t){this.a[t]&&O(this.a[t],function(t){t()})};var tu,eu={name:"authEvent",A:"local"};function nu(){this.a=Gs()}function ru(t,e){this.b=iu,this.f=n.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=n.Int32Array?new Int32Array(64):Array(64),void 0!==tu||(tu=n.Int32Array?new Int32Array(hu):hu),this.reset()}b(ru,function(){this.b=-1});for(var iu=64,ou=iu-1,au=[],su=0;su<ou;su++)au[su]=0;var uu=U(128,au);function cu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|tu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function lu(t,e,n){void 0===n&&(n=e.length);var i=0,o=t.c;if(r(e))for(;i<n;)t.f[o++]=e.charCodeAt(i++),o==t.b&&(cu(t),o=0);else{if(!c(e))throw Error("message must be string or array");for(;i<n;){var a=e[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(cu(t),o=0)}}t.c=o,t.g+=n}ru.prototype.reset=function(){this.g=this.c=0,this.a=n.Int32Array?new Int32Array(this.h):j(this.h)};var hu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fu(){ru.call(this,8,pu)}b(fu,ru);var pu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function du(t,e,n,r,i){this.m=t,this.i=e,this.l=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new nu,this.g=new $s(this.h),this.f=null,this.b=[],this.a=this.c=null}function yu(t){return new Vr("invalid-cordova-configuration",t)}function mu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function gu(t){return t.f||(t.f=t.ga().then(function(){return new dt(function(e){t.wa(function n(r){return e(r),t.Ka(n),!1}),function(t){function e(e){i=!0,o&&o.cancel(),vu(t).then(function(n){var i=r;if(n&&e&&e.url){var o=null;-1!=(i=Ei(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=yr(We(o=Ge(i),"firebaseError")||null))?qr(o):null)?new Xi(n.b,n.c,null,null,o):new Xi(n.b,n.c,i,n.g)),i=o||r}mu(t,i)})}var r=new Xi("unknown",null,null,null,new Vr("no-auth-event")),i=!1,o=Me(500).then(function(){return vu(t).then(function(){i||mu(t,r)})}),a=n.handleOpenURL;n.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(sr("BuildInfo.packageName",n).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(r){console.error(r)}},to||(to=new Ji),to.subscribe(e)}(t)})})),t.f}function vu(t){var e=null;return function(t){return t.b.get(eu,t.a).then(function(t){return Zi(t)})}(t.g).then(function(n){return e=n,Zs((n=t.g).b,eu,n.a)}).then(function(){return e})}function bu(t){this.a=t,this.b=Gs()}(t=du.prototype).ga=function(){return this.za?this.za:this.za=(Xn(void 0)?Yn().then(function(){return new dt(function(t,e){var r=n.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);r.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):St(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof sr("universalLinks.subscribe",n))throw yu("cordova-universal-links-plugin-fix is not installed");if(void 0===sr("BuildInfo.packageName",n))throw yu("cordova-plugin-buildinfo is not installed");if("function"!=typeof sr("cordova.plugins.browsertab.openUrl",n))throw yu("cordova-plugin-browsertab is not installed");if("function"!=typeof sr("cordova.InAppBrowser.open",n))throw yu("cordova-plugin-inappbrowser is not installed")},function(){throw new Vr("cordova-not-ready")})},t.Ea=function(t,e){return e(new Vr("operation-not-supported-in-this-environment")),_t()},t.Cb=function(){return St(new Vr("operation-not-supported-in-this-environment"))},t.Qb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,r){if(this.c)return St(new Vr("redirect-operation-pending"));var i=this,o=n.document,a=null,s=null,u=null,c=null;return this.c=_t().then(function(){return Yi(e),gu(i)}).then(function(){return function(t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Xi(e,i,null,o,new Vr("no-auth-event")),s=sr("BuildInfo.packageName",n);if("string"!=typeof s)throw new Vr("invalid-cordova-configuration");var u=sr("BuildInfo.displayName",n),c={};if(ar().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ar().toLowerCase().match(/android/))return St(new Vr("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=function(t){var e=new fu;lu(e,t),t=[];var n=8*e.g;lu(e,uu,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(cu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return P(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),c.sessionId=o;var l=ds(t.m,t.i,t.l,e,r,null,i,t.o,c,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(eu,a.C(),e)}).then(function(){var e=sr("cordova.plugins.browsertab.isAvailable",n);if("function"!=typeof e)throw new Vr("invalid-cordova-configuration");var r=null;e(function(e){if(e){if("function"!=typeof(r=sr("cordova.plugins.browsertab.openUrl",n)))throw new Vr("invalid-cordova-configuration");r(l)}else{if("function"!=typeof(r=sr("cordova.InAppBrowser.open",n)))throw new Vr("invalid-cordova-configuration");e=!(!(e=ar()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=r(l,e?"_blank":"_system","location=yes")}})})}(i,t,e,r)}).then(function(){return new dt(function(t,e){s=function(){var e=sr("cordova.plugins.browsertab.close",n);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),c=function(){wr()&&u()},o.addEventListener("resume",u=function(){a||(a=Me(2e3).then(function(){e(new Vr("redirect-cancelled-by-user"))}))},!1),ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return vu(i).then(function(){throw t})})}).ia(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ka(s),i.c=null})},t.wa=function(t){this.b.push(t),gu(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Xi("unknown",null,null,null,new Vr("no-auth-event")),t(e))})},t.Ka=function(t){F(this.b,function(e){return e==t})};var wu={name:"pendingRedirect",A:"session"};function _u(t){return Zs(t.b,wu,t.a)}function Su(t,e,n){this.u=t,this.l=e,this.m=n,this.h=[],this.f=!1,this.i=m(this.bb,this),this.b=new Ou,this.o=new Lu,this.g=new bu(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=Eu(this.u,this.l,this.m,ai)}function Eu(t,e,n,r){var i=Rp.a.SDK_VERSION||null;return Xn()?new du(t,e,n,i,r):new ls(t,e,n,i,r)}function Tu(t){t.f||(t.f=!0,t.a.wa(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function Cu(t){t.a.Mb()&&Tu(t).s(function(e){var n=new Xi("unknown",null,null,null,new Vr("operation-not-supported-in-this-environment"));xu(e)&&t.bb(n)}),t.a.Hb()||Pu(t.b)}(t=Su.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=Eu(this.u,this.l,this.m)},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(M(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(wu,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?_u(e.g).then(function(){Tu(e).s(function(t){var n=new Xi("unknown",null,null,null,new Vr("operation-not-supported-in-this-environment"));xu(t)&&e.bb(n)})}):Cu(e)}).s(function(){Cu(e)})}},t.unsubscribe=function(t){F(this.h,function(e){return e==t})},t.bb=function(t){if(!t)throw new Vr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.vb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,r),e=!0;break}}return Pu(this.b),e};var Iu=new br(2e3,1e4),Au=new br(3e4,6e4);function ku(t,e,n,r,i,o){return t.a.Cb(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},i,o)}function xu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Su.prototype.fa=function(){return this.b.fa()},Su.prototype.Ca=function(t,e,n){var r,i=this;return function(t){return t.b.set(wu,"pending",t.a)}(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(xu(t))throw new Vr("operation-not-supported-in-this-environment");return r=t,_u(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new dt(function(){}):_u(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},Su.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},Iu.get())};var Nu={};function Du(t,e,n){var r=e+":"+n;return Nu[r]||(Nu[r]=new Su(t,e,n)),Nu[r]}function Ou(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Pu(t){t.g||(t.g=!0,Mu(t,!1,null,null))}function Ru(t,e){if(t.b=function(){return _t(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Mu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return St(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Ru(t,n):Ru(t,{user:null}),t.f=[],t.c=[]}function Lu(){}function Fu(){this.sb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.sb},set:function(t){this.sb=t},enumerable:!1})}function Uu(t,e){this.a=e,Ar(this,"verificationId",t)}function ju(t,e,n,r){return new Qi(t).Ua(e,n).then(function(t){return new Uu(t,r)})}function Vu(t){var e=oi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Vr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");kr(this,{token:t,expirationTime:_r(1e3*e.exp),authTime:_r(1e3*e.auth_time),issuedAtTime:_r(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function qu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Bu(t){this.f=t,this.b=this.a=null,this.c=0}function Ku(t,e){var n=e[ia],r=e.refreshToken;e=Hu(e.expiresIn),t.b=n,t.c=e,t.a=r}function Hu(t){return v()+1e3*parseInt(t,10)}function zu(t,e){this.a=t||null,this.b=e||null,kr(this,{lastSignInTime:_r(e||null),creationTime:_r(t||null)})}function Qu(t,e,n,r,i,o){kr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Wu(t,e){for(var n in ae.call(this,t),e)this[n]=e[n]}function Gu(t,e,n){this.G=[],this.m=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=Rp.a.SDK_VERSION?or(Rp.a.SDK_VERSION):null,this.b=new na(this.m,ui(ai),t),this.h=new Bu(this.b),ec(this,e[ia]),Ku(this.h,e),Ar(this,"refreshToken",this.h.a),ic(this,n||{}),Ne.call(this),this.I=!1,this.u&&cr()&&(this.a=Du(this.u,this.m,this.o)),this.N=[],this.i=null,this.w=function(t){return new qu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-v()-3e5;return 0<e?e:0})}(this),this.V=m(this.Ha,this);var r=this;this.ka=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){Xu(r,t.c)},this.W=null}function Yu(t,e){t.X&&_e(t.X,"languageCodeChanged",t.ta),(t.X=e)&&ve(e,"languageCodeChanged",t.ta)}function Xu(t,e){t.O=e,la(t.b,Rp.a.SDK_VERSION?or(Rp.a.SDK_VERSION,t.O):null)}function Zu(t,e){t.W&&_e(t.W,"frameworkChanged",t.sa),(t.W=e)&&ve(e,"frameworkChanged",t.sa)}function Ju(t){try{return Rp.a.app(t.o).auth()}catch(e){throw new Vr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function $u(t){t.D||t.w.b||(t.w.start(),_e(t,"tokenChanged",t.V),ve(t,"tokenChanged",t.V))}function tc(t){_e(t,"tokenChanged",t.V),t.w.stop()}function ec(t,e){t.ra=e,Ar(t,"_lat",e)}function nc(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return Tt(e).then(function(){return t})}function rc(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function ic(t,e){kr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new zu(e.createdAt,e.lastLoginAt),providerData:[]})}function oc(){}function ac(t){return _t().then(function(){if(t.D)throw new Vr("app-deleted")})}function sc(t){return P(t.providerData,function(t){return t.providerId})}function uc(t,e){e&&(cc(t,e.providerId),t.providerData.push(e))}function cc(t,e){F(t.providerData,function(t){return t.providerId==e})}function lc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ar(t,e,n)}function hc(t,e){t!=e&&(kr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Ar(t,"metadata",e.metadata?function(t){return new zu(t.a,t.b)}(e.metadata):new zu),O(e.providerData,function(e){uc(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Ar(t,"refreshToken",t.h.a))}function fc(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return $a(t.b,Ra,{idToken:e}).then(m(t.xc,t))}(t,e).then(function(){return n||lc(t,"isAnonymous",!1),e})})}function pc(t,e){e[ia]&&t.ra!=e[ia]&&(Ku(t.h,e),t.dispatchEvent(new Wu("tokenChanged")),ec(t,e[ia]),lc(t,"refreshToken",t.h.a))}function dc(t,e){return fc(t).then(function(){if(M(sc(t),e))return nc(t).then(function(){throw new Vr("provider-already-linked")})})}function yc(t,e,n){return xr({user:t,credential:Gi(e),additionalUserInfo:e=pi(e),operationType:n})}function mc(t,e){return pc(t,e),t.reload().then(function(){return t})}function gc(t,e,n,r,i){if(!cr())return St(new Vr("operation-not-supported-in-this-environment"));if(t.i&&!i)return St(t.i);var o=fi(n.providerId),a=mr(t.uid+":::"),s=null;(!fr()||Zn())&&t.u&&n.isOAuthProvider&&(s=ds(t.u,t.m,t.o,e,n,null,a,Rp.a.SDK_VERSION||null));var u=Qn(s,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(bc(t),!i)return t.F().then(function(){})}).then(function(){return ku(t.a,u,e,n,a,!!s)}).then(function(){return new dt(function(n,r){t.ha(e,null,new Vr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=a,t.c=t.a.Ea(t,e,u,a)})}).then(function(t){return u&&zn(u),t?xr(t):null}).s(function(t){throw u&&zn(u),t}),wc(t,r,i)}function vc(t,e,n,r,i){if(!cr())return St(new Vr("operation-not-supported-in-this-environment"));if(t.i&&!i)return St(t.i);var o=null,a=mr(t.uid+":::");return r=r().then(function(){if(bc(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,nc(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Ec,t.C(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Tc(t.ba);throw o}).then(function(){if(o)throw o}),wc(t,r,i)}function bc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Vr("internal-error");throw new Vr("auth-domain-config-required")}}function wc(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),St(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new Wu("userInvalidated")),t.i=e),e})}(t,e,n);return t.G.push(r),r.ia(function(){L(t.G,r)}),r}function _c(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ia]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-v())/1e3;var r=new Gu(e,n,t);return t.providerData&&O(t.providerData,function(t){t&&uc(r,xr(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function Sc(t){this.a=t,this.b=Gs()}Ou.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ou.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Mu(this,!0,null,t.a),_t()):e.xa(n,r)?function(t,e,n){n=n.xa(e.b,e.c);var r=e.f,i=e.g,o=e.h,a=!!e.b.match(/Redirect$/);n(r,i,o).then(function(e){Mu(t,a,e,null)}).s(function(e){Mu(t,a,null,e)})}(this,t,e):St(new Vr("invalid-auth-event")):(Mu(this,!1,null,null),_t())}else St(new Vr("invalid-auth-event"))},Ou.prototype.Ya=function(){this.g&&!this.i&&Mu(this,!1,null,null)},Ou.prototype.fa=function(){var t=this;return new dt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Vr("timeout");t.a&&t.a.cancel(),t.a=Me(Au.get()).then(function(){t.b||(t.g=!0,Mu(t,!0,null,e))})}(t))})},Lu.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),_t()):e.xa(n,r)?function(t,e){var n=t.c,r=t.b;e.xa(r,n)(t.f,t.g,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}(t,e):St(new Vr("invalid-auth-event"))}else St(new Vr("invalid-auth-event"))},Uu.prototype.confirm=function(t){return t=Wi(this.verificationId,t),this.a(t)},qu.prototype.start=function(){this.a=this.c,function t(e,r){e.stop(),e.b=Me(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,r)).then(function(){return t=n.document,e=null,wr()||!t?_t():new dt(function(n){e=function(){wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},qu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Bu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Bu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?St(new Vr("user-token-expired")):t||!this.b||v()>this.c-3e4?this.a?function(t,e){return function(t,e){return new dt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ha(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(es(t)):t.access_token&&t.refresh_token?n(t):r(new Vr("internal-error")):r(new Vr("network-request-failed"))},"POST",sn(e).toString(),t.f,t.l.get()):r(new Vr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Hu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):_t(null):_t({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},zu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(Wu,ae),b(Gu,Ne),Gu.prototype.pa=function(t){this.ka=t,ca(this.b,t)},Gu.prototype.ea=function(){return this.ka},Gu.prototype.ya=function(){return j(this.O)},Gu.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Ar(Gu.prototype,"providerId","firebase"),(t=Gu.prototype).reload=function(){var t=this;return wc(this,ac(this).then(function(){return fc(t).then(function(){return nc(t)}).then(oc)}))},t.dc=function(t){return this.F(t).then(function(t){return new Vu(t)})},t.F=function(t){var e=this;return wc(this,ac(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Vr("internal-error");return t.accessToken!=e.ra&&(ec(e,t.accessToken),e.dispatchEvent(new Wu("tokenChanged"))),lc(e,"refreshToken",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Vr("internal-error");ic(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?P(t,function(t){return new Qu(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)uc(this,e[n]);lc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.gb=function(t){var e=this,n=null;return wc(this,t.f(this.b,this.uid).then(function(t){return pc(e,t),n=yc(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.yc=function(t){return Cr("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.gb(t).then(function(){})},t.eb=function(t){var e=this,n=null;return wc(this,dc(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.b,n)}).then(function(t){return n=yc(e,t,"link"),mc(e,t)}).then(function(){return n}))},t.pc=function(t){return Cr("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.eb(t).then(function(t){return t.user})},t.qc=function(t,e){var n=this;return wc(this,dc(this,"phone").then(function(){return ju(Ju(n),t,e,m(n.eb,n))}))},t.zc=function(t,e){var n=this;return wc(this,_t().then(function(){return ju(Ju(n),t,e,m(n.gb,n))}),!0)},t.pb=function(t){var e=this;return wc(this,this.F().then(function(n){return e.b.pb(n,t)}).then(function(t){return pc(e,t),e.reload()}))},t.Rc=function(t){var e=this;return wc(this,this.F().then(function(n){return t.b(e.b,n)}).then(function(t){return pc(e,t),e.reload()}))},t.qb=function(t){var e=this;return wc(this,this.F().then(function(n){return e.b.qb(n,t)}).then(function(t){return pc(e,t),e.reload()}))},t.rb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return ac(this);var e=this;return wc(this,this.F().then(function(n){return e.b.rb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return pc(e,t),lc(e,"displayName",t.displayName||null),lc(e,"photoURL",t.photoUrl||null),O(e.providerData,function(t){"password"===t.providerId&&(Ar(t,"displayName",e.displayName),Ar(t,"photoURL",e.photoURL))}),nc(e)}).then(oc))},t.Pc=function(t){var e=this;return wc(this,fc(this).then(function(n){return M(sc(e),t)?function(t,e,n){return $a(t,Da,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return O(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),O(sc(e),function(t){n[t]||cc(e,t)}),n[Qi.PROVIDER_ID]||Ar(e,"phoneNumber",null),nc(e)}):nc(e).then(function(){throw new Vr("no-such-provider")})}))},t.delete=function(){var t=this;return wc(this,this.F().then(function(e){return $a(t.b,Na,{idToken:e})}).then(function(){t.dispatchEvent(new Wu("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Yu(t,null),Zu(t,null),t.G=[],t.D=!0,tc(t),Ar(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.vb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Ab,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Bb,this):"linkViaRedirect"==t&&(this.aa||null)==e?m(this.Ab,this):"reauthViaRedirect"==t&&(this.aa||null)==e?m(this.Bb,this):null},t.rc=function(t){var e=this;return gc(this,"linkViaPopup",t,function(){return dc(e,t.providerId).then(function(){return nc(e)})},!1)},t.Ac=function(t){return gc(this,"reauthViaPopup",t,function(){return _t()},!0)},t.sc=function(t){var e=this;return vc(this,"linkViaRedirect",t,function(){return dc(e,t.providerId)},!1)},t.Bc=function(t){return vc(this,"reauthViaRedirect",t,function(){return _t()},!0)},t.Ab=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return wc(this,this.F().then(function(i){return Ea(r.b,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=yc(r,t,"link"),mc(r,t)}).then(function(){return i}))},t.Bb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return wc(this,_t().then(function(){return Ti(Ta(r.b,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=yc(r,t,"reauthenticate"),pc(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},t.jb=function(t){var e=this,n=null;return wc(this,this.F().then(function(e){return n=e,void 0===t||rt(t)?{}:ti(new Hr(t))}).then(function(t){return e.b.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&ut(t,this.metadata.C()),O(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Ec={name:"redirectUser",A:"session"};function Tc(t){return Zs(t.b,Ec,t.a)}function Cc(t){this.a=t,this.b=Gs(),this.c=null,this.f=function(t){var e=kc("local"),r=kc("session"),i=kc("none");return function(t,e,r){var i=Xs(e,r),o=Ys(t,e.A);return t.get(e,r).then(function(a){var s=null;try{s=yr(n.localStorage.getItem(i))}catch(u){}if(s&&!a)return n.localStorage.removeItem(i),t.set(e,s,r);s&&a&&"localStorage"!=o.type&&n.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(r,t.a)}).then(function(n){return n?r:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ac,t.a).then(function(t){return t?kc(t):e})})})}).then(function(e){return t.c=e,Ic(t,e.A)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(kc("local"),this.a,m(this.g,this))}function Ic(t,e){var n,r=[];for(n in Qs)Qs[n]!==e&&r.push(Zs(t.b,kc(Qs[n]),t.a));return r.push(Zs(t.b,Ac,t.a)),function(t){return new dt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Et(t[s],g(o,s),a);else e(i)})}(r)}Cc.prototype.g=function(){var t=this,e=kc("local");Oc(this,function(){return _t().then(function(){return t.c&&"local"!=t.c.A?t.b.get(e,t.a):null}).then(function(n){if(n)return Ic(t,"local").then(function(){t.c=e})})})};var Ac={name:"persistence",A:"session"};function kc(t){return{name:"authUser",A:t}}function xc(t,e){return Oc(t,function(){return t.b.set(t.c,e.C(),t.a)})}function Nc(t){return Oc(t,function(){return Zs(t.b,t.c,t.a)})}function Dc(t,e){return Oc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),_c(t||{})})})}function Oc(t,e){return t.f=t.f.then(e,e),t.f}function Pc(t){if(this.m=!1,Ar(this,"settings",new Fu),Ar(this,"app",t),!Vc(this).options||!Vc(this).options.apiKey)throw new Vr("invalid-api-key");t=Rp.a.SDK_VERSION?or(Rp.a.SDK_VERSION):null,this.b=new na(Vc(this).options&&Vc(this).options.apiKey,ui(ai),t),this.N=[],this.o=[],this.I=[],this.Tb=Rp.a.INTERNAL.createSubscribe(m(this.mc,this)),this.O=void 0,this.Ub=Rp.a.INTERNAL.createSubscribe(m(this.nc,this)),Uc(this,null),this.h=new Cc(Vc(this).options.apiKey+":"+Vc(this).name),this.w=new Sc(Vc(this).options.apiKey+":"+Vc(this).name),this.V=Hc(this,function(t){var e=Vc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ec,t.a).then(function(t){return t&&e&&(t.authDomain=e),_c(t||{})})}(t.w,Vc(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.w),Tc(t.w)});return Hc(t,e)}(t).then(function(){return Dc(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return xc(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Nc(t.h)})):null}).then(function(e){Uc(t,e||null)});return Hc(t,n)}(this)),this.i=Hc(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.m)return t.ka()}).s(function(){}).then(function(){if(!t.m){t.X=!0;var e=t.h;e.b.addListener(kc("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=m(this.Mc,this),this.Ha=m(this.Z,this),this.ra=m(this.bc,this),this.sa=m(this.jc,this),this.ta=m(this.kc,this),function(t){var e=Vc(t).options.authDomain,n=Vc(t).options.apiKey;e&&cr()&&(t.Sb=t.V.then(function(){if(!t.m){if(t.a=Du(e,n,Vc(t).name),t.a.subscribe(t),qc(t)&&rc(qc(t)),t.D){rc(t.D);var r=t.D;r.pa(t.ea()),Yu(r,t),Xu(r=t.D,t.G),Zu(r,t),t.D=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.tc,this),this.u=0,Ne.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function Rc(t){ae.call(this,"languageCodeChanged"),this.g=t}function Mc(t){ae.call(this,"frameworkChanged"),this.c=t}function Lc(t){return t.Sb||St(new Vr("auth-domain-config-required"))}function Fc(t,e){var n={};return n.apiKey=Vc(t).options.apiKey,n.authDomain=Vc(t).options.authDomain,n.appName=Vc(t).name,t.V.then(function(){return function(t,e,n,r){var i=new Gu(t,e);return n&&(i.ba=n),r&&Xu(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.ya())}).then(function(e){return qc(t)&&e.uid==qc(t).uid?(hc(qc(t),e),t.Z(e)):(Uc(t,e),rc(e),t.Z(e))}).then(function(){Kc(t)})}function Uc(t,e){qc(t)&&(function(t,e){F(t.N,function(t){return t==e})}(qc(t),t.Ha),_e(qc(t),"tokenChanged",t.ra),_e(qc(t),"userDeleted",t.sa),_e(qc(t),"userInvalidated",t.ta),tc(qc(t))),e&&(e.N.push(t.Ha),ve(e,"tokenChanged",t.ra),ve(e,"userDeleted",t.sa),ve(e,"userInvalidated",t.ta),0<t.u&&$u(e)),Ar(t,"currentUser",e),e&&(e.pa(t.ea()),Yu(e,t),Xu(e,t.G),Zu(e,t))}function jc(t,e){var n=null,r=null;return Hc(t,e.then(function(e){return n=Gi(e),r=pi(e),Fc(t,e)}).then(function(){return xr({user:qc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Vc(t){return t.app}function qc(t){return t.currentUser}function Bc(t){return qc(t)&&qc(t)._lat||null}function Kc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Bc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Bc(t))}}function Hc(t,e){return t.N.push(e),e.ia(function(){L(t.N,e)}),e}function zc(){}function Qc(){this.a={},this.b=1e12}Cc.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Vr("invalid-persistence-type"),n=new Vr("unsupported-persistence-type");t:{for(r in Qs)if(Qs[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch($n()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ur()&&"none"!==t)throw n}}(t),Oc(this,function(){return t!=n.c.A?n.b.get(n.c,n.a).then(function(r){return e=r,Ic(n,t)}).then(function(){if(n.c=kc(t),e)return n.b.set(n.c,e,n.a)}):_t()})},b(Pc,Ne),b(Rc,ae),b(Mc,ae),(t=Pc.prototype).mb=function(t){return Hc(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.m||(this.W=t,ca(this.b,this.W),this.dispatchEvent(new Rc(this.ea())))},t.ea=function(){return this.W},t.Sc=function(){var t=n.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),la(this.b,Rp.a.SDK_VERSION?or(Rp.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Mc(this.G))},t.ya=function(){return j(this.G)},t.toJSON=function(){return{apiKey:Vc(this).options.apiKey,authDomain:Vc(this).options.authDomain,appName:Vc(this).name,currentUser:qc(this)&&qc(this).C()}},t.vb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ac,this):null},t.ac=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Sa(r.b,t).then(function(t){return i=Gi(t),o=pi(t),t});return Hc(this,t=r.V.then(function(){return a}).then(function(t){return Fc(r,t)}).then(function(){return xr({user:qc(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Kc=function(t){if(!cr())return St(new Vr("operation-not-supported-in-this-environment"));var e=this,n=fi(t.providerId),r=mr(),i=null;(!fr()||Zn())&&Vc(this).options.authDomain&&t.isOAuthProvider&&(i=ds(Vc(this).options.authDomain,Vc(this).options.apiKey,Vc(this).name,"signInViaPopup",t,null,r,Rp.a.SDK_VERSION||null));var o=Qn(i,n&&n.Ba,n&&n.Aa);return Hc(this,n=Lc(this).then(function(e){return ku(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new dt(function(t,n){e.ha("signInViaPopup",null,new Vr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=e.a.Ea(e,"signInViaPopup",o,r)})}).then(function(t){return o&&zn(o),t?xr(t):null}).s(function(t){throw o&&zn(o),t}))},t.Lc=function(t){if(!cr())return St(new Vr("operation-not-supported-in-this-environment"));var e=this;return Hc(this,Lc(this).then(function(){return Oc(t=e.h,function(){return t.b.set(Ac,t.c.A,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!cr())return St(new Vr("operation-not-supported-in-this-environment"));var t=this;return Hc(this,Lc(this).then(function(){return t.a.fa()}).then(function(t){return t?xr(t):null}))},t.Qc=function(t){if(!t)return St(new Vr("null-user"));var e=this,n={};n.apiKey=Vc(this).options.apiKey,n.authDomain=Vc(this).options.authDomain,n.appName=Vc(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.m,authDomain:t.u,appName:t.o};var i=t.h,o={};return o[ia]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-v())/1e3,e=new Gu(e,o),n&&(e.ba=n),r&&Xu(e,r),hc(e,t),e}(t,n,e.w,e.ya());return Hc(this,this.i.then(function(){if(Vc(e).options.apiKey!=t.m)return r.reload()}).then(function(){return qc(e)&&t.uid==qc(e).uid?(hc(qc(e),t),e.Z(t)):(Uc(e,r),rc(r),e.Z(r))}).then(function(){Kc(e)}))},t.nb=function(){var t=this;return Hc(this,this.i.then(function(){return qc(t)?(Uc(t,null),Nc(t.h).then(function(){Kc(t)})):_t()}))},t.Mc=function(){var t=this;return Dc(this.h,Vc(this).options.authDomain).then(function(e){if(!t.m){var n;if(n=qc(t)&&e){n=qc(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return hc(qc(t),e),qc(t).F();(qc(t)||e)&&(Uc(t,e),e&&(rc(e),e.ba=t.w),t.a&&t.a.subscribe(t),Kc(t))}})},t.Z=function(t){return xc(this.h,t)},t.bc=function(){Kc(this),this.Z(qc(this))},t.jc=function(){this.nb()},t.kc=function(){this.nb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(qc(e))})},t.nc=function(t){var e=this;!function(t,e){t.I.push(e),Hc(t,t.i.then(function(){!t.m&&M(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Bc(t)))}))}(this,function(){t.next(qc(e))})},t.vc=function(t,e,n){var r=this;return this.X&&Rp.a.Promise.resolve().then(function(){l(t)?t(qc(r)):l(t.next)&&t.next(qc(r))}),this.Tb(t,e,n)},t.uc=function(t,e,n){var r=this;return this.X&&Rp.a.Promise.resolve().then(function(){r.O=r.getUid(),l(t)?t(qc(r)):l(t.next)&&t.next(qc(r))}),this.Ub(t,e,n)},t.cc=function(t){var e=this;return Hc(this,this.i.then(function(){return qc(e)?qc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Nb=function(t){var e=this;return this.i.then(function(){return jc(e,$a(e.b,Ga,{token:t}))}).then(function(t){var n=t.user;return lc(n,"isAnonymous",!1),e.Z(n),t})},t.Ec=function(t){return Cr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},t.Fc=function(t,e){return Cr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},t.Ob=function(t,e){var n=this;return this.i.then(function(){return jc(n,$a(n.b,Ya,{email:t,password:e}))})},t.xb=function(t,e){var n=this;return this.i.then(function(){return jc(n,$a(n.b,ka,{email:t,password:e}))})},t.Wb=function(t,e){return Cr("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.xb(t,e)},t.Hc=function(t){return Cr("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Pa(t).then(function(t){return t.user})},t.Pa=function(t){var e=this;return this.i.then(function(){return jc(e,t.la(e.b))})},t.Qa=function(){var t=this;return this.i.then(function(){var e=qc(t);if(e&&e.isAnonymous){var n=xr({providerId:null,isNewUser:!1});return xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return jc(t,t.b.Qa()).then(function(e){var n=e.user;return lc(n,"isAnonymous",!0),t.Z(n),e})})},t.Gc=function(){return Cr("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Qa()},t.getUid=function(){return qc(this)&&qc(this).uid||null},t.Vb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&qc(this)&&$u(qc(this))},t.Cc=function(t){var e=this;O(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&qc(this)&&tc(qc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Hc(this,this.i.then(function(){e.m||M(e.o,t)&&t(Bc(e))}))},t.removeAuthTokenListener=function(t){F(this.o,function(e){return e==t})},t.delete=function(){this.m=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(kc("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Rp.a.Promise.resolve()},t.Zb=function(t){return Cr("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Hc(this,function(t,e){return $a(t,xa,{identifier:e,continueUri:lr()?Bn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.$b=function(t){return Hc(this,function(t,e){return $a(t,xa,{identifier:e,continueUri:lr()?Bn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.oc=function(t){return!!Ki(t)},t.lb=function(t,e){var n=this;return Hc(this,_t().then(function(){var t=new Hr(e);if(!t.c)throw new Vr("argument-error",Wr+" must be true when sending sign in link to email");return ti(t)}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},t.Tc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.Za=function(t,e){return Hc(this,this.b.Za(t,e).then(function(){}))},t.Ja=function(t){return Hc(this,this.b.Ja(t).then(function(t){return new Dr(t)}))},t.Wa=function(t){return Hc(this,this.b.Wa(t).then(function(){}))},t.kb=function(t,e){var n=this;return Hc(this,_t().then(function(){return void 0===e||rt(e)?{}:ti(new Hr(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},t.Jc=function(t,e){return Hc(this,ju(this,t,e,m(this.Pa,this)))},t.Ic=function(t,e){var n=this;return Hc(this,_t().then(function(){var r=Bi(t,e||Bn());return n.Pa(r)}))},zc.prototype.render=function(){},zc.prototype.reset=function(){},zc.prototype.getResponse=function(){},zc.prototype.execute=function(){};var Wc=null;function Gc(t,e){return(e=Yc(e))&&t.a[e]||null}function Yc(t){return(t=void 0===t?1e12:t)?t.toString():null}function Xc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=On(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ve(this.f,"click",this.i)}function Zc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Jc(){}Qc.prototype.render=function(t,e){return this.a[this.b.toString()]=new Xc(t,e),this.b++},Qc.prototype.reset=function(t){var e=Gc(this,t);t=Yc(t),e&&t&&(e.delete(),delete this.a[t])},Qc.prototype.getResponse=function(t){return(t=Gc(this,t))?t.getResponse():null},Qc.prototype.execute=function(t){(t=Gc(this,t))&&t.execute()},Xc.prototype.getResponse=function(){return Zc(this),this.b},Xc.prototype.execute=function(){Zc(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},Xc.prototype.delete=function(){Zc(this),this.g=!0,clearTimeout(this.a),this.a=null,_e(this.f,"click",this.i)},Jc.prototype.g=function(){return Wc||(Wc=new Qc),_t(Wc)},Jc.prototype.c=function(){};var $c=null;function tl(){this.b=n.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var el=mn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),nl=new br(3e4,6e4);tl.prototype.g=function(t){var e=this;return new dt(function(r,i){var o=setTimeout(function(){i(new Vr("network-request-failed"))},nl.get());!n.grecaptcha||t!==e.f&&!e.b?(n[e.a]=function(){if(n.grecaptcha){e.f=t;var a=n.grecaptcha.render;n.grecaptcha.render=function(t,n){return t=a(t,n),e.b++,t},clearTimeout(o),r(n.grecaptcha)}else clearTimeout(o),i(new Vr("internal-error"));delete n[e.a]},_t(Yo(bn(el,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(o),i(new Vr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(o),r(n.grecaptcha))})},tl.prototype.c=function(){this.b--};var rl=null;function il(t,e,r,i,o,a,s){if(Ar(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.m=e,this.g=null,s?($c||($c=new Jc),s=$c):(rl||(rl=new tl),s=rl),this.o=s,this.a=r||{theme:"light",type:"image"},this.h=[],this.a[sl])throw new Vr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ul],!n.document)throw new Vr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!On(e)||!this.i&&On(e).hasChildNodes())throw new Vr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new na(t,a||null,o||null),this.v=i||function(){return null};var u=this;this.l=[];var c=this.a[ol];this.a[ol]=function(t){if(cl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=sr(c,n);"function"==typeof e&&e(t)}};var l=this.a[al];this.a[al]=function(){if(cl(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=sr(l,n);"function"==typeof t&&t()}}}var ol="callback",al="expired-callback",sl="sitekey",ul="size";function cl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function ll(t,e){return t.h.push(e),e.ia(function(){L(t.h,e)}),e}function hl(t){if(t.D)throw new Vr("internal-error","RecaptchaVerifier instance has been destroyed.")}function fl(t,e,n){var r=!1;try{this.b=n||Rp.a.app()}catch(a){throw new Vr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Vr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=Rp.a.SDK_VERSION?or(Rp.a.SDK_VERSION,o):null,il.call(this,n,t,e,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,ui(ai),r)}function pl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Vr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=dl.length)throw new Vr("internal-error","Argument validator received an unsupported number of arguments.");n=dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Vr("argument-error",t+" failed: "+r)}(t=il.prototype).za=function(){var t=this;return this.f?this.f:this.f=ll(this,_t().then(function(){if(lr()&&!Jn())return Yn();throw new Vr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,$a(t.u,ja,{})}).then(function(e){t.a[sl]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){hl(this);var t=this;return ll(this,this.za().then(function(){if(null===t.c){var e=t.m;if(!t.i){var n=On(e);e=function(t,e,n){var i=arguments,o=document,a=String(i[0]),s=i[1];if(!fn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',B(s.name),'"'),s.type){a.push(' type="',B(s.type),'"');var l={};ut(l,s),delete l.type,s=l}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(r(s)?a.className=s:u(s)?a.className=s.join(" "):Pn(a,s)),2<i.length&&function(t,e,n){function i(n){n&&e.appendChild(r(n)?t.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!c(a)||h(a)&&0<a.nodeType?i(a):O(Mn(a)?j(a):a,i)}}(o,a,i),a}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){hl(this);var t=this;return ll(this,this.render().then(function(e){return new dt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){F(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){hl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){hl(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=On(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},b(fl,il);var dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function yl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:r}}function ml(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:i}}function gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:h}}function vl(t,e){return{name:t||"",K:"a function",optional:!!e,M:l}}function bl(t,e){return{name:t||"",K:"null",optional:!!e,M:s}}function wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.la||t&&e.providerId!==t)}}}function _l(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&r(t.type)&&l(t.verify))}}}function Sl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function El(t,e){for(var n in e){var r=e[n].name;t[r]=Il(r,t[n],e[n].j)}}function Tl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:g(function(t){return this[t]},n),set:g(function(t,e,n,r){pl(t,[n],[r],!0),this[e]=r},r,n,e[n].tb),enumerable:!0})}}function Cl(t,e,n,r){t[e]=Il(e,n,r)}function Il(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return pl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}El(Pc.prototype,{Wa:{name:"applyActionCode",j:[yl("code")]},Ja:{name:"checkActionCode",j:[yl("code")]},Za:{name:"confirmPasswordReset",j:[yl("code"),yl("newPassword")]},xb:{name:"createUserWithEmailAndPassword",j:[yl("email"),yl("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[yl("email"),yl("password")]},Zb:{name:"fetchProvidersForEmail",j:[yl("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[yl("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[yl("emailLink")]},uc:{name:"onAuthStateChanged",j:[Sl(gl(),vl(),"nextOrObserver"),vl("opt_error",!0),vl("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[Sl(gl(),vl(),"nextOrObserver"),vl("opt_error",!0),vl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[yl("email"),Sl(gl("opt_actionCodeSettings",!0),bl(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[yl("email"),gl("actionCodeSettings")]},mb:{name:"setPersistence",j:[yl("persistence")]},Pa:{name:"signInAndRetrieveDataWithCredential",j:[wl()]},Qa:{name:"signInAnonymously",j:[]},Gc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Hc:{name:"signInWithCredential",j:[wl()]},Nb:{name:"signInWithCustomToken",j:[yl("token")]},Ec:{name:"signInAndRetrieveDataWithCustomToken",j:[yl("token")]},Ob:{name:"signInWithEmailAndPassword",j:[yl("email"),yl("password")]},Ic:{name:"signInWithEmailLink",j:[yl("email"),yl("emailLink",!0)]},Fc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[yl("email"),yl("password")]},Jc:{name:"signInWithPhoneNumber",j:[yl("phoneNumber"),_l()]},Kc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Qc:{name:"updateCurrentUser",j:[Sl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Gu)}},bl(),"user")]},nb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[yl(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[yl("code")]}}),Tl(Pc.prototype,{lc:{name:"languageCode",tb:Sl(yl(),bl(),"languageCode")}}),(Pc.Persistence=Qs).LOCAL="local",Pc.Persistence.SESSION="session",Pc.Persistence.NONE="none",El(Gu.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[ml("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[ml("opt_forceRefresh",!0)]},eb:{name:"linkAndRetrieveDataWithCredential",j:[wl()]},pc:{name:"linkWithCredential",j:[wl()]},qc:{name:"linkWithPhoneNumber",j:[yl("phoneNumber"),_l()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},gb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[wl()]},yc:{name:"reauthenticateWithCredential",j:[wl()]},zc:{name:"reauthenticateWithPhoneNumber",j:[yl("phoneNumber"),_l()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[Sl(gl("opt_actionCodeSettings",!0),bl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[yl(null,!0)]},Pc:{name:"unlink",j:[yl("provider")]},pb:{name:"updateEmail",j:[yl("email")]},qb:{name:"updatePassword",j:[yl("password")]},Rc:{name:"updatePhoneNumber",j:[wl("phone")]},rb:{name:"updateProfile",j:[gl("profile")]}}),El(Qc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),El(zc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),El(dt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Tl(Fu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",tb:ml("appVerificationDisabledForTesting")}}),El(Uu.prototype,{confirm:{name:"confirm",j:[yl("verificationCode")]}}),Cl(qi,"credential",function(t,e){return new Vi(t,e)},[yl("email"),yl("password")]),El(Oi.prototype,{ua:{name:"addScope",j:[yl("scope")]},Da:{name:"setCustomParameters",j:[gl("customOAuthParameters")]}}),Cl(Oi,"credential",Pi,[Sl(yl(),gl(),"token")]),Cl(qi,"credentialWithLink",Bi,[yl("email"),yl("emailLink")]),El(Ri.prototype,{ua:{name:"addScope",j:[yl("scope")]},Da:{name:"setCustomParameters",j:[gl("customOAuthParameters")]}}),Cl(Ri,"credential",Mi,[Sl(yl(),gl(),"token")]),El(Li.prototype,{ua:{name:"addScope",j:[yl("scope")]},Da:{name:"setCustomParameters",j:[gl("customOAuthParameters")]}}),Cl(Li,"credential",Fi,[Sl(yl(),Sl(gl(),bl()),"idToken"),Sl(yl(),bl(),"accessToken",!0)]),El(Ui.prototype,{Da:{name:"setCustomParameters",j:[gl("customOAuthParameters")]}}),Cl(Ui,"credential",ji,[Sl(yl(),gl(),"token"),yl("secret",!0)]),El(Di.prototype,{ua:{name:"addScope",j:[yl("scope")]},credential:{name:"credential",j:[Sl(yl(),bl(),"idToken",!0),Sl(yl(),bl(),"accessToken",!0),Sl(yl(),bl(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[gl("customOAuthParameters")]}}),Cl(Qi,"credential",Wi,[yl("verificationId"),yl("verificationCode")]),El(Qi.prototype,{Ua:{name:"verifyPhoneNumber",j:[yl("phoneNumber"),_l()]}}),El(Vr.prototype,{toJSON:{name:"toJSON",j:[yl(null,!0)]}}),El(no.prototype,{toJSON:{name:"toJSON",j:[yl(null,!0)]}}),El(eo.prototype,{toJSON:{name:"toJSON",j:[yl(null,!0)]}}),El(fl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===Rp.a||!Rp.a.INTERNAL||!Rp.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Pc,Error:Vr};Cl(t,"EmailAuthProvider",qi,[]),Cl(t,"FacebookAuthProvider",Oi,[]),Cl(t,"GithubAuthProvider",Ri,[]),Cl(t,"GoogleAuthProvider",Li,[]),Cl(t,"TwitterAuthProvider",Ui,[]),Cl(t,"OAuthProvider",Di,[yl("providerId")]),Cl(t,"SAMLAuthProvider",Ni,[yl("providerId")]),Cl(t,"PhoneAuthProvider",Qi,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Pc)}}]),Cl(t,"RecaptchaVerifier",fl,[Sl(yl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Rp.a.app.App)}}]),Rp.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:m((t=new Pc(t)).getUid,t),getToken:m(t.cc,t),addAuthTokenListener:m(t.Vb,t),removeAuthTokenListener:m(t.Cc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),Rp.a.INTERNAL.extendNamespace({User:Gu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Mp=function(){return function(){}}(),Lp=function(){function t(t){this.afAuth=t,this.User=new Cu("hello")}return t.prototype.doGoogleLogin=function(){var t=this;return console.log("loging in.."),new Promise(function(e,n){var r=new Cp.auth.GoogleAuthProvider;r.addScope("profile"),r.addScope("email"),t.afAuth.auth.signInWithPopup(r).then(function(n){return t.User.next(n),e(n),n})})},t.ngInjectableDef=St({factory:function(){return new t(Jt(Op))},token:t,providedIn:"root"}),t}(),Fp=function(){function t(t,e){var n=this;this.toastr=t,this.data=e,this.data.User.subscribe(function(t){return n.user=t})}return t.prototype.ngOnInit=function(){this.toastr.customToastr('<div style="\n      @import url(\'https://fonts.googleapis.com/css?family=Pacifico\');\n      color: green; font-size: 15px; text-align: center;\n      font-family: \'Pacifico\', cursive;">\n      <img src="https://lh5.googleusercontent.com/-iaceJJKo_7M/AAAAAAAAAAI/AAAAAAAAGFQ/FRyLMVvT5uI/photo.jpg"\n      style="border-radius:20px;\n      position: fixed;\n      top: 10px;\n      left: 0px;\n      width:20%;\n      height:60%;\n      alt="image">\n      Welcome Mbonea Mjema!\n      <hr\n      width=50%;\n      >\n      </div>',null,{enableHTML:!0})},t}(),Up=function(){return function(){}}(),jp=function(){return function(){}}(),Vp="*";function qp(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function Bp(t){return{type:6,styles:t,offset:null}}function Kp(t){Promise.resolve(null).then(t)}var Hp=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;Kp(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),zp=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,i=0,o=this.players.length;0==o?Kp(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++r==o&&e._onDestroy()}),t.onStart(function(){++i==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Qp="!",Wp=function(){return function(){this.position="top-right",this.maxShown=5,this.newestOnTop=!1,this.animate="slideFromLeft",this.toastTimeout=5e3,this.enableHTML=!1,this.dismiss="auto",this.messageClass="toastr-message",this.titleClass="toastr-title",this.showCloseButton=!1}}(),Gp=function(){function t(t,e,n,r){this.type=t,this.message=e,this.title=n,this.data=r,this.config={position:"",animate:"slideFromLeft",dismiss:"auto",enableHTML:!1,titleClass:"",messageClass:"",toastTimeout:3e3,showCloseButton:!1}}return t.prototype.dismiss=function(){this.toastrManager.dismissToastr(this)},t}(),Yp=function(){function t(t,e,n,r){this.sanitizer=t,this.cdr=e,this._zone=n,this.toastrs=[],this._fresh=!0,this._onEnter=new j,this._onExit=new j,Object.assign(this,r)}return t.prototype.onEnter=function(){return this._onEnter.asObservable()},t.prototype.onExit=function(){return this._onExit.asObservable()},t.prototype.addToastr=function(t){if(this.position.indexOf("top")>0){if(this.newestOnTop?this.toastrs.unshift(t):this.toastrs.push(t),this.toastrs.length>this.maxShown){var e=this.toastrs.length-this.maxShown;this.newestOnTop?this.toastrs.splice(this.maxShown):this.toastrs.splice(0,e)}}else this.toastrs.unshift(t),this.toastrs.length>this.maxShown&&this.toastrs.splice(this.maxShown);null===this.animate&&this._fresh&&(this._fresh=!1,this._onEnter.next(),this._onEnter.complete()),this.cdr.detectChanges()},t.prototype.removeToastr=function(t){t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=null),this.toastrs=this.toastrs.filter(function(e){return e.id!==t.id})},t.prototype.removeAllToasts=function(){this.toastrs.forEach(function(t){clearTimeout(t.timeoutId),t.timeoutId=null}),this.toastrs=[]},t.prototype.clicked=function(t){this.onToastClicked&&this.onToastClicked(t)},t.prototype.anyToast=function(){return this.toastrs.length>0},t.prototype.findToast=function(t){try{for(var e=u(this.toastrs),n=e.next();!n.done;n=e.next()){var r=n.value;if(r.id===t)return r}}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}}return null;var i,o},t.prototype.onAnimationEnd=function(t){var e=this;"void"!==t.toState||this.anyToast()?this._fresh&&"void"===t.fromState&&(this._fresh=!1,this._zone.run(function(){e._onEnter.next(),e._onEnter.complete()})):this._ngExit()},t.prototype._ngExit=function(){var t=this;this._zone.onMicrotaskEmpty.subscribe(function(){t._onExit.next(),t._onExit.complete()})},t.prototype.ngOnDestroy=function(){this._ngExit()},t}(),Xp=function(){function t(t,e,n,r,i){this._applicationRef=t,this._componentFactoryResolver=e,this._injector=n,this.ngZone=r,this.options=i,this.toastrContainers=[],this.index=0,this.toastClicked=new j}return t.prototype.createToastrComponent=function(t,e){void 0===e&&(e=[]);var n=this._componentFactoryResolver.resolveComponentFactory(t),r=rr.resolve(e),i=rr.fromResolvedProviders(r,this._injector),o=document.createElement("div");o.id="toastr-node-"+Math.floor(200*Math.random()),document.querySelector("body").appendChild(o);var a=n.create(i,[],o);return this.attachToApplication(a),a},t.prototype.attachToApplication=function(t){this._applicationRef.attachView(t.hostView)},t.prototype.detachFromApplication=function(t){this._applicationRef.detachView(t.hostView)},t.prototype.isToastrContainerExist=function(t){return this.toastrContainers.length>0&&this.toastrContainers.findIndex(function(e){return e.position===t})>-1},t.prototype.getToastrComponentRef=function(t){if(this.toastrContainers.length>0){var e=this.toastrContainers.find(function(e){return e.position===t});return e?e.ref:null}return null},t.prototype.createTimeout=function(t){var e,n=this;return this.ngZone.runOutsideAngular(function(){e=setTimeout(function(){return n.ngZone.run(function(){return n.clearToast(t)})},t.config.toastTimeout)}),e.toString()},t.prototype.setupToast=function(t,e){t.id=++this.index,e&&e.hasOwnProperty("toastTimeout")&&(e.dismiss="auto");var n=Object.assign({},this.options,e||{});Object.keys(t.config).forEach(function(e){n.hasOwnProperty(e)&&(t.config[e]=n[e])}),"auto"===t.config.dismiss&&(t.timeoutId=this.createTimeout(t)),t.toastrManager=this;var r=t.config.position;return this.isToastrContainerExist(r)&&this.getToastrComponentRef(r).instance.addToastr(t),t},t.prototype.clearToast=function(t){var e=t.config.position;this.isToastrContainerExist(e)&&this.getToastrComponentRef(e).instance.removeToastr(t)},t.prototype.clearAllToasts=function(){var t=this;this.toastrContainers.length>0&&this.toastrContainers.forEach(function(e){console.log(e);var n=e.ref;e.ref.instance.removeAllToasts(),t.dispose(n)})},t.prototype.dispose=function(t){if(t){var e=this.toastrContainers.findIndex(function(e){return e.position===t.instance.position});e>-1&&this.toastrContainers.splice(e,1),this.detachFromApplication(t)}},t.prototype._onToastClicked=function(t){this.toastClicked.next(t),"controlled"!==t.config.dismiss&&this.clearToast(t)},t.prototype.dismissToastr=function(t){this.clearToast(t)},t.prototype.dismissAllToastr=function(){this.clearAllToasts()},t.prototype.onClickToast=function(){return this.toastClicked.asObservable()},t.prototype.showToastr=function(t,e){var n=this,r=Object.assign({},this.options,e);return new Promise(function(i,o){if(!n.isToastrContainerExist(r.position)){var a=n.createToastrComponent(Yp,[{provide:Wp,useValue:r}]);a.instance.onToastClicked=function(t){n._onToastClicked(t)},a.instance.onExit().subscribe(function(){n.dispose(a)}),n.toastrContainers.push({position:r.position,ref:a})}i(n.setupToast(t,e))})},t.prototype.errorToastr=function(t,e,n){var r=new Gp("error",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r},t.prototype.infoToastr=function(t,e,n){var r=new Gp("info",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r},t.prototype.successToastr=function(t,e,n){var r=new Gp("success",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r},t.prototype.warningToastr=function(t,e,n){var r=new Gp("warning",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r},t.prototype.customToastr=function(t,e,n){var r=new Gp("custom",t,e,n&&n.data?n.data:null);return this.showToastr(r,n),r},t}(),Zp=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[Xp,Wp]}},t}(),Jp=Wi({encapsulation:0,styles:[["@import url(https://fonts.googleapis.com/css?family=Pacifico);"]],data:{}});function $p(t){return Ma(0,[(t()(),To(0,0,null,null,32,"div",[["class","container flex-sm-wrap flex-md-wrap"],["data-aos","slide-up"],["data-aos-duration","950"],["data-aos-once","true"],["style","background-color:#fffcfc;color:rgb(255,252,252);width:auto;margin-top:44px;"]],null,null,null,null,null)),(t()(),To(1,0,null,null,18,"div",[["class","card-group align-items-sm-center"],["data-aos","fade-down"],["data-aos-once","true"],["style","margin:0px;"]],null,null,null,null,null)),(t()(),To(2,0,null,null,5,"div",[["class","card"],["data-aos","slide-up"],["data-aos-delay","150"],["data-aos-duration","950"],["style","margin:20px;background-color:rgb(232,111,72);border-radius:40px;font-family:'Autour One', cursive;"]],null,null,null,null,null)),(t()(),To(3,0,null,null,4,"div",[["class","card-body"],["style","width:268px;min-width:268px;"]],null,null,null,null,null)),(t()(),To(4,0,null,null,0,"i",[["class","fa fa-balance-scale"],["style","width:31px;font-size:34px;"]],null,null,null,null,null)),(t()(),To(5,0,null,null,1,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Balance"])),(t()(),To(7,0,null,null,0,"p",[["class","card-text"]],null,null,null,null,null)),(t()(),To(8,0,null,null,5,"div",[["class","card"],["data-aos","slide-up"],["data-aos-delay","50"],["data-aos-duration","950"],["style","margin:20px;background-color:rgb(232,111,72);border-radius:40px;font-family:'Autour One', cursive;"]],null,null,null,null,null)),(t()(),To(9,0,null,null,4,"div",[["class","card-body"],["style","width:268px;min-width:268px;"]],null,null,null,null,null)),(t()(),To(10,0,null,null,0,"i",[["class","icon ion-android-sunny"],["style","width:31px;font-size:27px;"]],null,null,null,null,null)),(t()(),To(11,0,null,null,1,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Daily\xa0"])),(t()(),To(13,0,null,null,0,"p",[["class","card-text"]],null,null,null,null,null)),(t()(),To(14,0,null,null,5,"div",[["class","card"],["data-aos","fade"],["style","margin:20px;background-color:rgb(232,111,72);border-radius:40px;font-family:'Autour One', cursive;"]],null,null,null,null,null)),(t()(),To(15,0,null,null,4,"div",[["class","card-body"],["style","width:268px;min-width:268px;max-width:268px;"]],null,null,null,null,null)),(t()(),To(16,0,null,null,0,"i",[["class","fa fa-calendar"],["style","width:31px;font-size:28px;"]],null,null,null,null,null)),(t()(),To(17,0,null,null,1,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Monthly"])),(t()(),To(19,0,null,null,0,"p",[["class","card-text"]],null,null,null,null,null)),(t()(),To(20,0,null,null,12,"div",[["class","card-group align-items-sm-center"],["data-aos","fade-down"],["data-aos-once","true"],["style","margin:0px;"]],null,null,null,null,null)),(t()(),To(21,0,null,null,5,"div",[["class","card"],["data-aos","slide-up"],["data-aos-delay","200"],["data-aos-duration","1000"],["style","margin:20px;background-color:rgb(232,111,72);border-radius:40px;font-family:'Autour One', cursive;height:304px;"]],null,null,null,null,null)),(t()(),To(22,0,null,null,4,"div",[["class","card-body"],["style","width:268px;min-width:268px;"]],null,null,null,null,null)),(t()(),To(23,0,null,null,0,"i",[["class","icon-graph"],["style","width:31px;font-size:34px;"]],null,null,null,null,null)),(t()(),To(24,0,null,null,1,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Pattern"])),(t()(),To(26,0,null,null,0,"p",[["class","card-text"]],null,null,null,null,null)),(t()(),To(27,0,null,null,5,"div",[["class","card"],["data-aos","slide-up"],["data-aos-delay","300"],["data-aos-duration","950"],["style","margin:20px;background-color:rgb(232,111,72);border-radius:40px;font-family:'Autour One', cursive;height:304px;"]],null,null,null,null,null)),(t()(),To(28,0,null,null,4,"div",[["class","card-body"],["style","width:268px;min-width:268px;max-width:268px;"]],null,null,null,null,null)),(t()(),To(29,0,null,null,0,"i",[["class","fa fa-pie-chart"],["style","width:31px;font-size:28px;"]],null,null,null,null,null)),(t()(),To(30,0,null,null,1,"h5",[["class","card-title"],["style","font-size:30px;"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Distribution"])),(t()(),To(32,0,null,null,0,"p",[["class","card-text"]],null,null,null,null,null))],null,null)}function td(t){return Ma(0,[(t()(),To(0,0,null,null,1,"app-dashboard",[],null,null,null,$p,Jp)),fa(1,114688,null,0,Fp,[Xp,Lp],null,null)],function(t,e){t(e,1,0)},null)}var ed=Bo("app-dashboard",Fp,td,{},{},[]),nd=function(){function t(t,e){this.auth=t,this.routing=e}return t.prototype.ngOnInit=function(){},t.prototype.login=function(){var t=this;console.log("clicked"),this.auth.doGoogleLogin().then(function(e){NaN!=e&&t.routing.navigate(["/Dashboard"])})},t}(),rd=Wi({encapsulation:0,styles:[["@import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css);@import url(http://fonts.googleapis.com/css?family=Titillium+Web&subset=latin,latin-ext);hr[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]{text-align:center}body[_ngcontent-%COMP%]{font-family:'Titillium Web',sans-serif}a[_ngcontent-%COMP%]{color:#ff5400}a[_ngcontent-%COMP%]:hover{opacity:.8;color:#ff5400;text-decoration:none}.kpx_login[_ngcontent-%COMP%]   .kpx_authTitle[_ngcontent-%COMP%]{text-align:center;line-height:300%}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;opacity:.9}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-facebook[_ngcontent-%COMP%]{background:#3b5998;transition:all .5s ease-in-out}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-facebook[_ngcontent-%COMP%]:hover{background:#172d5e}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-facebook[_ngcontent-%COMP%]:focus{background:#fff;color:#3b5998;border-color:#3b5998}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-google-plus[_ngcontent-%COMP%]{background:#c32f10;transition:all .5s ease-in-out}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-google-plus[_ngcontent-%COMP%]:hover{background:#6b1301}.kpx_login[_ngcontent-%COMP%]   .kpx_socialButtons[_ngcontent-%COMP%]   .kpx_btn-google-plus[_ngcontent-%COMP%]:focus{background:#fff;color:#c32f10;border-color:#c32f10}.kpx_login[_ngcontent-%COMP%]   .kpx_loginOr[_ngcontent-%COMP%]{position:relative;font-size:1.5em;color:#aaa;margin-top:1em;margin-bottom:1em;padding-top:.5em;padding-bottom:.5em}.kpx_login[_ngcontent-%COMP%]   .kpx_loginOr[_ngcontent-%COMP%]   .kpx_hrOr[_ngcontent-%COMP%]{background-color:#cdcdcd;height:1px;margin-top:0!important;margin-bottom:0!important}.kpx_login[_ngcontent-%COMP%]   .kpx_loginOr[_ngcontent-%COMP%]   .kpx_spanOr[_ngcontent-%COMP%]{display:block;position:absolute;left:50%;top:-.6em;margin-left:-1.5em;background-color:#fff;width:3em;text-align:center}.kpx_login[_ngcontent-%COMP%]   .kpx_loginForm[_ngcontent-%COMP%]   .input-group.i[_ngcontent-%COMP%]{width:2em}.kpx_login[_ngcontent-%COMP%]   .kpx_loginForm[_ngcontent-%COMP%]   .help-block[_ngcontent-%COMP%]{color:red}@media (min-width:768px){.kpx_row-sm-offset-3[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child[class*=col-]{margin-left:25%}.kpx_login[_ngcontent-%COMP%]   .kpx_forgotPwd[_ngcontent-%COMP%]{text-align:right;margin-top:10px}}.kpx_login[_ngcontent-%COMP%]{width:40%;height:100%;background-color:#d9dbe0;border-radius:90px;margin-top:80px;margin-left:30%}"]],data:{}});function id(t){return Ma(0,[(t()(),To(0,0,null,null,20,"div",[["class","login-clean"],["style","background-color:rgb(6,6,6);"]],null,null,null,null,null)),(t()(),To(1,0,null,null,19,"form",[["data-aos","slide-up"],["data-aos-duration","700"],["method","post"],["style","width:361px;height:438px;"]],null,null,null,null,null)),(t()(),To(2,0,null,null,1,"h2",[["class","sr-only"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Login Form"])),(t()(),To(4,0,null,null,7,"div",[["class","d-inline-flex align-items-stretch align-content-stretch illustration"],["style","background-color:rgb(252,249,249);width:240px;height:155px;"]],null,null,null,null,null)),(t()(),To(5,0,null,null,3,"div",[["class","align-items-lg-center"],["style","width:128px;height:137px;padding:0px;padding-top:-5px;"]],null,null,null,null,null)),(t()(),To(6,0,null,null,2,"button",[["class","btn btn-primary d-inline-flex"],["style","background-color:#dd4b39;padding:32px;"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r},null,null)),(t()(),Oa(-1,null,["\xa0"])),(t()(),To(8,0,null,null,0,"i",[["class","fa fa-google align-self-center order-1"]],null,null,null,null,null)),(t()(),To(9,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),To(10,0,null,null,1,"button",[["class","btn btn-primary"],["style","background-color:#3b5998;padding:31px;width:87px;height:84px;"],["type","button"]],null,null,null,null,null)),(t()(),To(11,0,null,null,0,"i",[["class","icon-social-facebook"]],null,null,null,null,null)),(t()(),To(12,0,null,null,1,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),To(13,0,null,null,0,"input",[["class","form-control"],["name","email"],["placeholder","Email"],["type","email"]],null,null,null,null,null)),(t()(),To(14,0,null,null,1,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),To(15,0,null,null,0,"input",[["class","form-control"],["name","password"],["placeholder","Password"],["type","password"]],null,null,null,null,null)),(t()(),To(16,0,null,null,2,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),To(17,0,null,null,1,"button",[["class","btn btn-primary btn-block"],["style","background-color:rgb(232,111,72);"],["type","submit"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Log In"])),(t()(),To(19,0,null,null,1,"a",[["class","forgot"],["href","#"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r},null,null)),(t()(),Oa(-1,null,["Forgot your email or password?"]))],null,null)}function od(t){return Ma(0,[(t()(),To(0,0,null,null,1,"app-login-component",[],null,null,null,id,rd)),fa(1,114688,null,0,nd,[Lp,Bf],null,null)],function(t,e){t(e,1,0)},null)}var ad=Bo("app-login-component",nd,od,{},{},[]),sd=Wi({encapsulation:0,styles:[".to-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message[_ngcontent-%COMP%]{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .to-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toastr-close-button[_ngcontent-%COMP%]{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button[_ngcontent-%COMP%]:focus, .toastr-close-button[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-left[_ngcontent-%COMP%]{top:12px;left:12px}.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}#toastr-container[_ngcontent-%COMP%]{position:fixed;z-index:99999}#toastr-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]{padding:15px;color:#030303}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{color:#999!important}#toastr-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container[_ngcontent-%COMP%] > .toastr-info[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-error[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-success[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:300px;margin:10px auto}#toastr-container.bottom-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:96%;margin:10px auto}.toastr[_ngcontent-%COMP%]{background-color:#fff}.toastr-success[_ngcontent-%COMP%]{background-color:#51a351}.toastr-error[_ngcontent-%COMP%]{background-color:#d9534f}.toastr-info[_ngcontent-%COMP%]{background-color:#7460ee}.toastr-warning[_ngcontent-%COMP%]{background-color:#f89406}.toastr-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}"],data:{animation:[{type:7,name:"inOut",definitions:[{type:0,name:"fade",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => fade",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:null,timings:"0.4s ease-in"}],options:null},{type:1,expr:"fade => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.4s 0.1s ease-out"}],options:null},{type:0,name:"slideFromLeft",styles:{type:6,styles:{opacity:1,transform:"translateX(0)"},offset:null},options:void 0},{type:1,expr:"void => slideFromLeft",animation:[{type:6,styles:{opacity:0,transform:"translateX(-100%)"},offset:null},{type:4,styles:null,timings:"0.4s ease-in"}],options:null},{type:1,expr:"slideFromLeft => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"translateX(100%)"},offset:null},timings:"0.4s 0.1s ease-out"}],options:null},{type:0,name:"slideFromRight",styles:{type:6,styles:{opacity:1,transform:"translateX(0)"},offset:null},options:void 0},{type:1,expr:"void => slideFromRight",animation:[{type:6,styles:{opacity:0,transform:"translateX(100%)"},offset:null},{type:4,styles:null,timings:"0.4s ease-in"}],options:null},{type:1,expr:"slideFromRight => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"translateX(-100%)"},offset:null},timings:"0.4s 0.1s ease-out"}],options:null},{type:0,name:"slideFromTop",styles:{type:6,styles:{opacity:1,transform:"translateY(0)"},offset:null},options:void 0},{type:1,expr:"void => slideFromTop",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"0.4s ease-in"}],options:null},{type:1,expr:"slideFromTop => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"translateY(100%)"},offset:null},timings:"0.4s 0.1s ease-out"}],options:null},{type:0,name:"slideFromBottom",styles:{type:6,styles:{opacity:1,transform:"translateY(0)"},offset:null},options:void 0},{type:1,expr:"void => slideFromBottom",animation:[{type:6,styles:{opacity:0,transform:"translateY(100%)"},offset:null},{type:4,styles:null,timings:"0.4s ease-in"}],options:null},{type:1,expr:"slideFromBottom => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},timings:"0.4s 0.1s ease-out"}],options:null}],options:{}}]}});function ud(t){return Ma(0,[(t()(),To(0,0,null,null,1,"div",[["class","toastr-close-button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.removeToastr(t.parent.context.$implicit)&&r),r},null,null)),(t()(),Oa(-1,null,["\xd7 "]))],null,null)}function cd(t){return Ma(0,[(t()(),To(0,0,null,null,1,"div",[],[[8,"className",0]],null,null,null,null)),(t()(),Oa(1,null,["",""]))],null,function(t,e){t(e,0,0,_o(1,"to-title ",e.parent.context.$implicit.config.titleClass||e.component.titleClass,"")),t(e,1,0,e.parent.context.$implicit.title)})}function ld(t){return Ma(0,[(t()(),To(0,0,null,null,0,"span",[],[[8,"className",0],[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,0,0,_o(1,"to-message ",e.parent.context.$implicit.config.messageClass||n.messageClass,""),n.sanitizer.bypassSecurityTrustHtml(e.parent.context.$implicit.message))})}function hd(t){return Ma(0,[(t()(),To(0,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(t()(),Oa(1,null,["",""]))],null,function(t,e){t(e,0,0,_o(1,"to-message ",e.parent.context.$implicit.config.messageClass||e.component.messageClass,"")),t(e,1,0,e.parent.context.$implicit.message)})}function fd(t){return Ma(0,[(t()(),To(0,0,null,null,10,"div",[],[[24,"@inOut",0],[8,"className",0]],[[null,"@inOut.done"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"@inOut.done"===e&&(r=!1!==i.onAnimationEnd(n)&&r),"click"===e&&(r=!1!==i.clicked(t.context.$implicit)&&r),r},null,null)),(t()(),Eo(16777216,null,null,1,null,ud)),fa(2,16384,null,0,su,[ti,vn],{ngIf:[0,"ngIf"]},null),(t()(),Eo(16777216,null,null,1,null,cd)),fa(4,16384,null,0,su,[ti,vn],{ngIf:[0,"ngIf"]},null),(t()(),To(5,0,null,null,5,"div",[],null,null,null,null,null)),fa(6,16384,null,0,hu,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Eo(16777216,null,null,1,null,ld)),fa(8,278528,null,0,fu,[ti,vn,hu],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Eo(16777216,null,null,1,null,hd)),fa(10,16384,null,0,pu,[ti,vn,hu],null,null)],function(t,e){t(e,2,0,e.context.$implicit.config.showCloseButton),t(e,4,0,e.context.$implicit.title),t(e,6,0,e.context.$implicit.config.enableHTML),t(e,8,0,!0)},function(t,e){t(e,0,0,e.context.$implicit.config.animate||e.component.animate,_o(1,"toastr toastr-",e.context.$implicit.type,""))})}function pd(t){return Ma(0,[(t()(),To(0,0,[["toastrContainer",1]],null,2,"div",[["id","toastr-container"]],[[8,"className",0]],null,null,null,null)),(t()(),Eo(16777216,null,null,1,null,fd)),fa(2,278528,null,0,ou,[ti,vn,wi],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.toastrs)},function(t,e){t(e,0,0,_o(1,"",e.component.position,""))})}function dd(t){return Ma(0,[(t()(),To(0,0,null,null,1,"app-toastr",[],null,null,null,pd,sd)),fa(1,180224,null,0,Yp,[fl,ni,Nr,Wp],null,null)],null,null)}var yd=Bo("app-toastr",Yp,dd,{},{},[]),md=Wi({encapsulation:0,styles:[[".navigation-clean-button.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-radius:20px;color:#000}"]],data:{}});function gd(t){return Ma(0,[(t()(),To(0,0,null,null,31,"div",[],null,null,null,null,null)),(t()(),To(1,0,null,null,30,"nav",[["class","navbar navbar-light navbar-expand-md navigation-clean-button"],["style","height:107px;"]],null,null,null,null,null)),(t()(),To(2,0,null,null,29,"div",[["class","container"]],null,null,null,null,null)),(t()(),To(3,0,null,null,2,"a",[["class","navbar-brand"],["routerLink","/Dashboard"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==$o(t,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),fa(4,671744,null,0,Kf,[Bf,Dh,Qs],{routerLink:[0,"routerLink"]},null),(t()(),To(5,0,null,null,0,"img",[["class","img-thumbnail"],["data-bs-hover-animate","jello"],["height","100px"],["src","assets/img/Personal_Finance.jpg"],["width","100px"]],null,null,null,null,null)),(t()(),To(6,0,null,null,3,"button",[["class","navbar-toggler"],["data-target","#navcol-1"],["data-toggle","collapse"]],null,null,null,null,null)),(t()(),To(7,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Toggle navigation"])),(t()(),To(9,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),To(10,0,null,null,21,"div",[["class","collapse navbar-collapse"],["id","navcol-1"],["style","font-family:'Autour One', cursive;"]],null,null,null,null,null)),(t()(),To(11,0,null,null,14,"ul",[["class","nav navbar-nav mr-auto"]],null,null,null,null,null)),(t()(),To(12,0,null,null,6,"li",[["class","nav-item"],["role","presentation"]],null,null,null,null,null)),(t()(),To(13,0,null,null,5,"a",[["class","nav-link"],["routerLink","/Dashboard"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==$o(t,14).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),fa(14,671744,[[2,4]],0,Kf,[Bf,Dh,Qs],{routerLink:[0,"routerLink"]},null),fa(15,1720320,null,2,zf,[Bf,Fe,Be,ni],{routerLinkActive:[0,"routerLinkActive"]},null),Ia(603979776,1,{links:1}),Ia(603979776,2,{linksWithHrefs:1}),(t()(),Oa(-1,null,["Dashboard"])),(t()(),To(19,0,null,null,6,"li",[["class","nav-item"],["role","presentation"]],null,null,null,null,null)),(t()(),To(20,0,null,null,5,"a",[["class","nav-link"],["routerLink","/Trends"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==$o(t,21).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),fa(21,671744,[[4,4]],0,Kf,[Bf,Dh,Qs],{routerLink:[0,"routerLink"]},null),fa(22,1720320,null,2,zf,[Bf,Fe,Be,ni],{routerLinkActive:[0,"routerLinkActive"]},null),Ia(603979776,3,{links:1}),Ia(603979776,4,{linksWithHrefs:1}),(t()(),Oa(-1,null,["Trends"])),(t()(),To(26,0,null,null,5,"span",[["class","navbar-text actions"]],null,null,null,null,null)),(t()(),To(27,0,null,null,2,"a",[["class","login"],["data-bs-hover-animate","jello"],["routerLink","/login"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==$o(t,28).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),fa(28,671744,null,0,Kf,[Bf,Dh,Qs],{routerLink:[0,"routerLink"]},null),(t()(),Oa(-1,null,["Log In"])),(t()(),To(30,0,null,null,1,"a",[["class","btn btn-light action-button"],["data-bs-hover-animate","bounce"],["href","/login"],["role","button"],["style","background-color:rgb(232,111,72);"]],null,null,null,null,null)),(t()(),Oa(-1,null,["Sign Up"])),(t()(),To(32,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),fa(33,212992,null,0,Gf,[Wf,ti,Oe,[8,null],ni],null,null)],function(t,e){t(e,4,0,"/Dashboard"),t(e,14,0,"/Dashboard"),t(e,15,0,"active"),t(e,21,0,"/Trends"),t(e,22,0,"active"),t(e,28,0,"/login"),t(e,33,0)},function(t,e){t(e,3,0,$o(e,4).target,$o(e,4).href),t(e,13,0,$o(e,14).target,$o(e,14).href),t(e,20,0,$o(e,21).target,$o(e,21).href),t(e,27,0,$o(e,28).target,$o(e,28).href)})}function vd(t){return Ma(0,[(t()(),To(0,0,null,null,1,"app-root",[],null,null,null,gd,md)),fa(1,49152,null,0,Ks,[],null,null)],null,null)}var bd=Bo("app-root",Ks,vd,{},{},[]);function wd(){return"undefined"!=typeof process}function _d(t){switch(t.length){case 0:return new Hp;case 1:return t[0];default:return new zp(t)}}function Sd(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o={});var a=[],s=[],u=-1,c=null;if(r.forEach(function(t){var n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case Qp:s=i[n];break;case Vp:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}l[r]=s}),r||s.push(l),c=l,u=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function Ed(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&Td(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&Td(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&Td(n,"destroy",t))})}}function Td(t,e,n){var r=n.totalTime,i=Cd(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Cd(t,e,n,r,i,o,a){return void 0===i&&(i=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function Id(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function Ad(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var kd=function(t,e){return!1},xd=function(t,e){return!1},Nd=function(t,e,n){return[]},Dd=wd();if(Dd||"undefined"!=typeof Element){if(kd=function(t,e){return t.contains(e)},Dd||Element.prototype.matches)xd=function(t,e){return t.matches(e)};else{var Od=Element.prototype,Pd=Od.matchesSelector||Od.mozMatchesSelector||Od.msMatchesSelector||Od.oMatchesSelector||Od.webkitMatchesSelector;Pd&&(xd=function(t,e){return Pd.apply(t,[e])})}Nd=function(t,e,n){var r=[];if(n)r.push.apply(r,l(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r}}var Rd=null,Md=!1;function Ld(t){Rd||(Rd=("undefined"!=typeof document?document.body:null)||{},Md=!!Rd.style&&"WebkitAppearance"in Rd.style);var e=!0;return Rd.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in Rd.style)&&Md&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Rd.style),e}var Fd=xd,Ud=kd,jd=Nd;function Vd(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var qd=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return Ld(t)},t.prototype.matchesElement=function(t,e){return Fd(t,e)},t.prototype.containsElement=function(t,e){return Ud(t,e)},t.prototype.query=function(t,e,n){return jd(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,r,i,o,a){return void 0===o&&(o=[]),new Hp(n,r)},t}(),Bd=function(){function t(){}return t.NOOP=new qd,t}(),Kd=1e3;function Hd(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:zd(parseFloat(e[1]),e[2])}function zd(t,e){switch(e){case"s":return t*Kd;default:return t}}function Qd(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=zd(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=zd(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var c=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(l,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:o}}(t,e,n)}function Wd(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Gd(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else Wd(t,n);return n}function Yd(t,e,n){return n?e+":"+n+";":""}function Xd(t){for(var e="",n=0;n<t.style.length;n++)e+=Yd(0,r=t.style.item(n),t.style.getPropertyValue(r));for(var r in t.style)t.style.hasOwnProperty(r)&&!r.startsWith("_")&&(e+=Yd(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r]));t.setAttribute("style",e)}function Zd(t,e){t.style&&(Object.keys(e).forEach(function(n){var r=oy(n);t.style[r]=e[n]}),wd()&&Xd(t))}function Jd(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=oy(e);t.style[n]=""}),wd()&&Xd(t))}function $d(t){return Array.isArray(t)?1==t.length?t[0]:qp(t):t}var ty=new RegExp("{{\\s*(.+?)\\s*}}","g");function ey(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=ty.exec(n);)e.push(r[1]);ty.lastIndex=0}return e}function ny(t,e,n){var r=t.toString(),i=r.replace(ty,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function ry(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var iy=/-+([a-z0-9])/g;function oy(t){return t.replace(iy,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function ay(t,e){return 0===t||0===e}function sy(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=cy(t,e)})},s=1;s<e.length;s++)a()}return e}function uy(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function cy(t,e){return window.getComputedStyle(t)[e]}var ly="*",hy=new Set(["true","1"]),fy=new Set(["false","0"]);function py(t,e){var n=hy.has(t)||fy.has(t),r=hy.has(e)||fy.has(e);return function(i,o){var a=t==ly||t==i,s=e==ly||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?hy.has(t):fy.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?hy.has(e):fy.has(e)),a&&s}}var dy=new RegExp("s*:selfs*,?","g");function yy(t,e,n){return new my(t).build(e,n)}var my=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new gy(e);return this._resetContextStyleTimingState(n),uy(this,$d(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var c=n.visitTransition(t,e);r+=c.queryCount,i+=c.depCount,a.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(vy(t)){var e=t;Object.keys(e).forEach(function(t){ey(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=ry(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=uy(this,$d(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=i[1],a=i[2],s=i[3];e.push(py(o,s)),"<"!=a[0]||o==ly&&s==ly||e.push(py(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:by(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return uy(n,t,e)}),options:by(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=uy(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:by(t.options)}},t.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return wy(Qd(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=wy(0,0,"");return i.dynamic=!0,i.strValue=r,i}return wy((n=n||Qd(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Bp({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=Bp(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==Vp?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(vy(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,c=e.collectedStyles[e.currentQuerySelector],l=c[r],h=!0;l&&(o!=i&&o>=l.startTime&&i<=l.endTime&&(e.errors.push('The CSS property "'+r+'" that exists between the times of "'+l.startTime+'ms" and "'+l.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),h=!1),o=l.startTime),h&&(c[r]={startTime:o,endTime:i}),e.options&&(a=e.errors,s=e.options.params||{},(u=ey(t[r])).length&&u.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,c=t.steps.map(function(t){var r=n._makeStyleAst(t,e),c=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(vy(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(vy(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,a=a||l<u,u=l,o.push(l),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var l=t.steps.length,h=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,p=e.currentTime,d=e.currentAnimateTimings,y=d.duration;return c.forEach(function(t,i){var a=h>0?i==f?1:h*i:o[i],s=a*y;e.currentTime=p+d.delay+s,d.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r},t.prototype.visitReference=function(t,e){return{type:8,animation:uy(this,$d(t.animation),e),options:by(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:by(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:by(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=c(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(dy,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,Id(e.collectedStyles,e.currentQuerySelector,{});var s=uy(this,$d(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:by(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Qd(t.timings,e.errors,!0);return{type:12,animation:uy(this,$d(t.animation),e),timings:n,options:null}},t}(),gy=function(){return function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function vy(t){return!Array.isArray(t)&&"object"==typeof t}function by(t){var e;return t?(t=Wd(t)).params&&(t.params=(e=t.params)?Wd(e):null):t={},t}function wy(t,e,n){return{duration:t,delay:e,easing:n}}function _y(t,e,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var Sy=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,l(e))},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),Ey=new RegExp(":enter","g"),Ty=new RegExp(":leave","g");function Cy(t,e,n,r,i,o,a,s,u,c){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===c&&(c=[]),(new Iy).buildKeyframes(t,e,n,r,i,o,a,s,u,c)}var Iy=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,r,i,o,a,s,u,c){void 0===c&&(c=[]),u=u||new Sy;var l=new ky(t,e,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([o],null,l.errors,s),uy(this,n,l);var h=l.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,l.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[_y(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Hd(n.duration):null,o=null!=n.delay?Hd(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),uy(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ay);var a=Hd(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return uy(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Hd(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),uy(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return Qd(e.params?ny(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Hd(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ay);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),uy(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;uy(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)},t}(),Ay={},ky=function(){function t(t,e,n,r,i,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ay,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new xy(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Hd(r.duration)),null!=r.delay&&(i.delay=Hd(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=ny(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,r){void 0===e&&(e=null);var i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=Ay,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Ny(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Ey,"."+this._enterClassName)).replace(Ty,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,l(s))}return i||0!=a.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),a},t}(),xy=function(){function t(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||Vp,e._currentKeyframe[t]=Vp}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=Vp}):Gd(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=ny(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:Vp),i._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=Gd(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==Qp?e.add(t):r==Vp&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?ry(e.values()):[],a=n.size?ry(n.values()):[];if(r){var s=i[0],u=Wd(s);s.offset=0,u.offset=1,i=[s,u]}return _y(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)},t}(),Ny=function(t){function e(e,n,r,i,o,a,s){void 0===s&&(s=!1);var u=t.call(this,e,n,a.delay)||this;return u.element=n,u.keyframes=r,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return i(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Gd(t[0],!1);u.offset=0,o.push(u);var c=Gd(t[0],!1);c.offset=Dy(s),o.push(c);for(var l=t.length-1,h=1;h<=l;h++){var f=Gd(t[h],!1);f.offset=Dy((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",t=o}return _y(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},e}(xy);function Dy(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var Oy=function(){return function(){}}(),Py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.normalizePropertyName=function(t,e){return oy(t)},e.prototype.normalizeStyleValue=function(t,e,n,r){var i="",o=n.toString().trim();if(Ry[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return o+i},e}(Oy),Ry=My("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function My(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function Ly(t,e,n,r,i,o,a,s,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var Fy={},Uy=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)},t.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o},t.prototype.build=function(t,e,n,r,i,a,s,u,c,l){var h=[],f=this.ast.options&&this.ast.options.params||Fy,p=this.buildStyles(n,s&&s.params||Fy,h),d=u&&u.params||Fy,y=this.buildStyles(r,d,h),m=new Set,g=new Map,v=new Map,b="void"===r,w={params:o({},f,d)},_=l?[]:Cy(t,e,this.ast.animation,i,a,p,y,w,c,h),S=0;if(_.forEach(function(t){S=Math.max(t.duration+t.delay,S)}),h.length)return Ly(e,this._triggerName,n,r,b,p,y,[],[],g,v,S,h);_.forEach(function(t){var n=t.element,r=Id(g,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=Id(v,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&m.add(n)});var E=ry(m.values());return Ly(e,this._triggerName,n,r,b,p,y,_,E,g,v,S)},t}(),jy=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},r=Wd(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=ny(o,r,e)),n[t]=o})}}),n},t}(),Vy=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new jy(t.style,t.options&&t.options.params||{})}),qy(this.states,"true","1"),qy(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new Uy(t,e,n.states))}),this.fallbackTransition=new Uy(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function qy(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var By=new Sy,Ky=function(){function t(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],r=yy(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},t.prototype._buildPlayer=function(t,e,n){var r=t.element,i=Sd(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)},t.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,o=[],a=this._animations[t],s=new Map;if(a?(i=Cy(this._driver,e,a,"ng-enter","ng-leave",{},{},n,By,o)).forEach(function(t){var e=Id(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),i=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,Vp)})});var u=_d(i.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,r){var i=Cd(e,"","","");return Ed(this._getPlayer(t),n,i,r),function(){}},t.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])},t}(),Hy=[],zy={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Qy={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wy="__ng_removed",Gy=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var r=Wd(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),Yy=new Gy("void"),Xy=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,im(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=Id(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=Id(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(im(t,"ng-trigger"),im(t,"ng-trigger-"+e),u[e]=Yy),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(e),a=new Jy(this.id,e,t),s=this._engine.statesByElement.get(t);s||(im(t,"ng-trigger"),im(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],c=new Gy(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[e]=c,u||(u=Yy),"void"===c.value||u.value!==c.value){var l=Id(this._engine.playersByElement,t,[]);l.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,c.value,t,c.params),f=!1;if(!h){if(!r)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:c,player:a,isFallbackTransition:f}),f||(im(t,"ng-animate-queued"),a.onStart(function(){om(t,"ng-animate-queued")})),a.onDone(function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),l.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,c.params)){var p=[],d=o.matchStyles(u.value,u.params,p),y=o.matchStyles(c.value,c.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(function(){Jd(t,d),Zd(t,y)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[Wy]){var n=r._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):r.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&_d(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Yy,s=new Gy("void"),u=new Jy(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){im(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=Cd(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,Ed(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),Zy=function(){function t(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new Xy(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,r){if($y(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1},t.prototype.insertNode=function(t,e,n,r){if($y(e)){var i=e[Wy];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),im(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),om(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if($y(e)){var r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[Wy]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,r,i){return $y(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},t.prototype._buildInstruction=function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return _d(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[Wy];if(n&&n.setForRemoval){if(t[Wy]=zy,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(t){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)im(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?_d(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,r=new Sy,i=[],a=new Map,s=[],u=new Map,c=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(function(t){f.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)f.add(e[r])});var p=this.bodyNode,d=Array.from(this.statesByElement.keys()),y=nm(d,this.collectedEnterElements),m=new Map,g=0;y.forEach(function(t,e){var n="ng-enter"+g++;m.set(e,n),t.forEach(function(t){return im(t,n)})});for(var v=[],b=new Set,w=new Set,_=0;_<this.collectedLeaveElements.length;_++)(U=(F=this.collectedLeaveElements[_])[Wy])&&U.setForRemoval&&(v.push(F),b.add(F),U.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(function(t){return b.add(t)}):w.add(F));var S=new Map,E=nm(d,Array.from(b));E.forEach(function(t,e){var n="ng-leave"+g++;S.set(e,n),t.forEach(function(t){return im(t,n)})}),t.push(function(){y.forEach(function(t,e){var n=m.get(e);t.forEach(function(t){return om(t,n)})}),E.forEach(function(t,e){var n=S.get(e);t.forEach(function(t){return om(t,n)})}),v.forEach(function(t){n.processLeaveNode(t)})});for(var T=[],C=[],I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(e).forEach(function(t){var e=t.player,o=t.element;if(T.push(e),n.collectedEnterElements.length){var a=o[Wy];if(a&&a.setForMove)return void e.destroy()}var l=!p||!n.driver.containsElement(p,o),f=S.get(o),d=m.get(o),y=n._buildInstruction(t,r,d,f,l);if(y.errors&&y.errors.length)C.push(y);else{if(l)return e.onStart(function(){return Jd(o,y.fromStyles)}),e.onDestroy(function(){return Zd(o,y.toStyles)}),void i.push(e);if(t.isFallbackTransition)return e.onStart(function(){return Jd(o,y.fromStyles)}),e.onDestroy(function(){return Zd(o,y.toStyles)}),void i.push(e);y.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,y.timelines),s.push({instruction:y,player:e,element:o}),y.queriedElements.forEach(function(t){return Id(u,t,[]).push(e)}),y.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=c.get(e);r||c.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),y.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=h.get(e);r||h.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(C.length){var A=[];C.forEach(function(t){A.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return A.push("- "+t+"\n")})}),T.forEach(function(t){return t.destroy()}),this.reportError(A)}var k=new Map,x=new Map;s.forEach(function(t){var e=t.element;r.has(e)&&(x.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,k))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){Id(k,e,[]).push(t),t.destroy()})});var N=v.filter(function(t){return sm(t,c,h)}),D=new Map;em(D,this.driver,w,h,Vp).forEach(function(t){sm(t,c,h)&&N.push(t)});var O=new Map;y.forEach(function(t,e){em(O,n.driver,new Set(t),c,Qp)}),N.forEach(function(t){var e=D.get(t),n=O.get(t);D.set(t,o({},e,n))});var P=[],R=[],M={};s.forEach(function(t){var e=t.element,o=t.player,s=t.instruction;if(r.has(e)){if(f.has(e))return o.onDestroy(function(){return Zd(e,s.toStyles)}),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);var u=M;if(x.size>1){for(var c=e,l=[];c=c.parentNode;){var h=x.get(c);if(h){u=h;break}l.push(c)}l.forEach(function(t){return x.set(t,u)})}var p=n._buildAnimation(o.namespaceId,s,k,a,O,D);if(o.setRealPlayer(p),u===M)P.push(o);else{var d=n.playersByElement.get(u);d&&d.length&&(o.parentPlayer=_d(d)),i.push(o)}}else Jd(e,s.fromStyles),o.onDestroy(function(){return Zd(e,s.toStyles)}),R.push(o),f.has(e)&&i.push(o)}),R.forEach(function(t){var e=a.get(t.element);if(e&&e.length){var n=_d(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var L=0;L<v.length;L++){var F,U=(F=v[L])[Wy];if(om(F,"ng-leave"),!U||!U.hasAnimation){var j=[];if(u.size){var V=u.get(F);V&&V.length&&j.push.apply(j,l(V));for(var q=this.driver.query(F,".ng-animating",!0),B=0;B<q.length;B++){var K=u.get(q[B]);K&&K.length&&j.push.apply(j,l(K))}}var H=j.filter(function(t){return!t.destroyed});H.length?am(this,F,H):this.processLeaveNode(F)}}return v.length=0,P.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),P},t.prototype.elementContainsData=function(t,e){var n=!1,r=e[Wy];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){var r,i,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,c=function(t){var r=t.element,i=r!==o,u=Id(n,r,[]);l._getPreviousPlayers(r,i,a,s,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})},l=this;try{for(var h=u(e.timelines),f=h.next();!f.done;f=h.next())c(f.value)}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}Jd(o,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,c=[],l=new Set,h=new Set,f=e.timelines.map(function(e){var f=e.element;l.add(f);var p=f[Wy];if(p&&p.removedBeforeQueried)return new Hp(e.duration,e.delay);var d,y,m=f!==u,g=(d=(n.get(f)||Hy).map(function(t){return t.getRealPlayer()}),y=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof zp?t(i.players,n):n.push(i)}}(d,y),y).filter(function(t){return!!t.element&&t.element===f}),v=i.get(f),b=o.get(f),w=Sd(0,a._normalizer,0,e.keyframes,v,b),_=a._buildPlayer(e,w,g);if(e.subTimeline&&r&&h.add(f),m){var S=new Jy(t,s,f);S.setRealPlayer(_),c.push(S)}return _});c.forEach(function(t){Id(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(a.playersByQueriedElement,t.element,t)})}),l.forEach(function(t){return im(t,"ng-animating")});var p=_d(f);return p.onDestroy(function(){l.forEach(function(t){return om(t,"ng-animating")}),Zd(u,e.toStyles)}),h.forEach(function(t){Id(r,t,[]).push(p)}),p},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Hp(t.duration,t.delay)},t}(),Jy=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Hp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return Ed(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.overrideTotalTime=function(t){this.totalTime=t},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){Id(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function $y(t){return t&&1===t.nodeType}function tm(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function em(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(tm(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Wy]=Qy,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return tm(t,o[s++])}),a}function nm(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var rm="$$classes";function im(t,e){if(t.classList)t.classList.add(e);else{var n=t[rm];n||(n=t[rm]={}),n[e]=!0}}function om(t,e){if(t.classList)t.classList.remove(e);else{var n=t[rm];n&&delete n[e]}}function am(t,e,n){_d(n).onDone(function(){return t.processLeaveNode(e)})}function sm(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var um=function(){function t(t,e,n){var r=this;this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Zy(t,e,n),this._timelineEngine=new Ky(t,e,n),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=yy(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new Vy(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=c(Ad(n),2);this._timelineEngine.command(i[0],e,i[1],r)}else this._transitionEngine.trigger(t,e,n,r)},t.prototype.listen=function(t,e,n,r,i){if("@"==n.charAt(0)){var o=c(Ad(n),2);return this._timelineEngine.listen(o[0],e,o[1],i)}return this._transitionEngine.listen(t,e,n,r,i)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),cm="animation",lm="animationend",hm=function(){function t(t,e,n,r,i,o,a){var s=this;this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return s._handleCallback(t)}}return t.prototype.apply=function(){var t,e,n;e=this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name,(n=gm(t=this._element,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)","===t.charAt(n)&&0}(n),e=n+", "+e),mm(t,"",e),ym(this._element,this._eventFn,!1),this._startTime=Date.now()},t.prototype.pause=function(){fm(this._element,this._name,"paused")},t.prototype.resume=function(){fm(this._element,this._name,"running")},t.prototype.setPosition=function(t){var e=pm(this._element,this._name);this._position=t*this._duration,mm(this._element,"Delay","-"+this._position+"ms",e)},t.prototype.getPosition=function(){return this._position},t.prototype._handleCallback=function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},t.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),ym(this._element,this._eventFn,!0))},t.prototype.destroy=function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._name,(r=dm(n=gm(t=this._element,"").split(","),e))>=0&&(n.splice(r,1),mm(t,"",n.join(","))))},t}();function fm(t,e,n){mm(t,"PlayState",n,pm(t,e))}function pm(t,e){var n=gm(t,"");return n.indexOf(",")>0?dm(n.split(","),e):dm([n],e)}function dm(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ym(t,e,n){n?t.removeEventListener(lm,e):t.addEventListener(lm,e)}function mm(t,e,n,r){var i=cm+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function gm(t,e){return t.style[cm+e]}var vm="linear",bm=function(){function t(t,e,n,r,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||vm,this.totalTime=r+i,this._buildStyler()}return t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.destroy=function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},t.prototype._flushStartFns=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.finish=function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._flushDoneFns())},t.prototype.setPosition=function(t){this._styler.setPosition(t)},t.prototype.getPosition=function(){return this._styler.getPosition()},t.prototype.hasStarted=function(){return this._state>=2},t.prototype.init=function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())},t.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2),this._styler.resume()},t.prototype.pause=function(){this.init(),this._styler.pause()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},t.prototype._buildStyler=function(){var t=this;this._styler=new hm(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t.prototype.beforeDestroy=function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:cy(t.element,r))})}this.currentSnapshot=e},t}(),wm=function(t){function e(e,n){var r=t.call(this)||this;return r.element=e,r._startingStyles={},r.__initialized=!1,r._styles=Vd(n),r}return i(e,t),e.prototype.init=function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),t.prototype.init.call(this))},e.prototype.play=function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),t.prototype.play.call(this))},e.prototype.destroy=function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,t.prototype.destroy.call(this))},e}(Hp),_m=function(){function t(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return t.prototype.validateStyleProperty=function(t){return Ld(t)},t.prototype.matchesElement=function(t,e){return Fd(t,e)},t.prototype.containsElement=function(t,e){return Ud(t,e)},t.prototype.query=function(t,e,n){return jd(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.buildKeyframeElement=function(t,e,n){n=n.map(function(t){return Vd(t)});var r="@keyframes "+e+" {\n",i="";n.forEach(function(t){i=" ";var e=parseFloat(t.offset);r+=""+i+100*e+"% {\n",i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=i+"animation-timing-function: "+n+";\n"));default:return void(r+=""+i+e+": "+n+";\n")}}),r+=i+"}\n"}),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o},t.prototype.animate=function(t,e,n,r,i,o,a){void 0===o&&(o=[]),a&&this._notifyFaultyScrubber();var s=o.filter(function(t){return t instanceof bm}),u={};ay(n,r)&&s.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var c=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=sy(t,e,u));if(0==n)return new wm(t,c);var l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);var f=new bm(t,e,l,n,r,i,c);return f.onDestroy(function(){var t;(t=h).parentNode.removeChild(t)}),f},t.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},t}(),Sm=function(){function t(t,e,n){this.element=t,this.keyframes=e,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:cy(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Em=function(){function t(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Tm().toString()),this._cssKeyframesDriver=new _m}return t.prototype.validateStyleProperty=function(t){return Ld(t)},t.prototype.matchesElement=function(t,e){return Fd(t,e)},t.prototype.containsElement=function(t,e){return Ud(t,e)},t.prototype.query=function(t,e,n){return jd(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.overrideWebAnimationsSupport=function(t){this._isNativeImpl=t},t.prototype.animate=function(t,e,n,r,i,o,a){if(void 0===o&&(o=[]),!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=o.filter(function(t){return t instanceof Sm});return ay(n,r)&&c.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})}),e=sy(t,e=e.map(function(t){return Gd(t,!1)}),u),new Sm(t,e,s)},t}();function Tm(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var Cm=function(t){function e(e,n){var r=t.call(this)||this;return r._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ht.None,styles:[],data:{animation:[]}}),r}return i(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?qp(t):t;return km(this._renderer,null,e,"register",[n]),new Im(e,this._renderer)},e}(Up),Im=function(t){function e(e,n){var r=t.call(this)||this;return r._id=e,r._renderer=n,r}return i(e,t),e.prototype.create=function(t,e){return new Am(this._id,t,e||{},this._renderer)},e}(jp),Am=function(){function t(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return km(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function km(t,e,n,r,i){return t.setProperty(e,"@@"+n+":"+r,i)}var xm=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new Nm("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new Dm(this,a,r,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;this.promise.then(function(){t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(t){var e=c(t,2);(0,e[0])(e[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),Nm=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t,e){return this.delegate.selectRootElement(t,e)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),Dm=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.factory=e,o.namespaceId=n,o}return i(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var r,i,o,a=this;if("@"==e.charAt(0)){var s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),l="";return"@"!=u.charAt(0)&&(u=(r=c((i=u,o=i.indexOf("."),[i.substring(0,o),i.substr(o+1)]),2))[0],l=r[1]),this.engine.listen(this.namespaceId,s,u,l,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(Nm),Om=function(t){function e(e,n,r){return t.call(this,e.body,n,r)||this}return i(e,t),e}(um);function Pm(){return"function"==typeof Tm()?new Em:new _m}function Rm(){return new Py}function Mm(t,e,n){return new xm(t,e,n)}var Lm=new Tt("AnimationModuleType"),Fm=function(){return function(){}}();function Um(t){return function(t){return new P(function(e){return{unsubscribe:t.onSnapshot(e)}})}(t).pipe(gt())}function jm(t){return Um(t).pipe(tt(function(t){return{payload:t,type:"query"}}))}function Vm(t){return jm(t).pipe(tt(function(t){return t.payload.docChanges().map(function(t){return{type:t.type,payload:t}})}))}var qm=function(){function t(t,e,n){this.ref=t,this.query=e,this.afs=n}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Vm(this.query))).pipe(tt(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),Pu(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Vm(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(uc(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),n=function(t,e){return jm(t).pipe(tt(function(t){return t.payload.docChanges()}),uc(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":null!=t[e.oldIndex]&&t[e.oldIndex].doc.id!=e.doc.id||(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.id==e.doc.id&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]),tt(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(){var t=jm(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(tt(function(t){return t.payload.docs.map(function(t){return t.data()})}))},t.prototype.get=function(t){return it(this.query.get(t)).pipe(Tp(this.afs.scheduler.zone))},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new Bm(this.ref.doc(t),this.afs)},t}(),Bm=function(){function t(t,e){this.ref=t,this.afs=e}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=Wm(this.ref.collection(t),e);return new qm(n.ref,n.query,this.afs)},t.prototype.snapshotChanges=function(){var t=Um(this.ref).pipe(tt(function(t){return{payload:t,type:"value"}})),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)},t.prototype.valueChanges=function(){return this.snapshotChanges().pipe(tt(function(t){return t.payload.data()}))},t.prototype.get=function(t){return it(this.ref.get(t)).pipe(Tp(this.afs.scheduler.zone))},t}(),Km=new Tt("angularfire2.enableFirestorePersistence"),Hm=new Tt("angularfire2.firestore.persistenceSettings"),zm=new Tt("angularfire2.firestore.settings"),Qm={timestampsInSnapshots:!0};function Wm(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var Gm=function(){function t(t,e,n,r,i,o,a){var s=this;this.scheduler=new Ep(o,i),this.firestore=o.runOutsideAngular(function(){var n=Np(t,e).firestore();return n.settings(r||Qm),n}),this.persistenceEnabled$=n&&function(t){return t===mu}(i)?o.runOutsideAngular(function(){try{return it(s.firestore.enablePersistence(a||void 0).then(function(){return!0},function(){return!1}))}catch(t){return Tu(!1)}}):Tu(!1)}return t.prototype.collection=function(t,e){var n=Wm("string"==typeof t?this.firestore.collection(t):t,e);return new qm(n.ref,n.query,this)},t.prototype.doc=function(t){var e;return e="string"==typeof t?this.firestore.doc(t):t,new Bm(e,this)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},t}(),Ym=(n("6Joi"),function(){function t(){}var e;return e=t,t.enablePersistence=function(t){return{ngModule:e,providers:[{provide:Km,useValue:!0},{provide:Hm,useValue:t}]}},t}()),Xm=function(){return function(){}}(),Zm=Vs(Bs,[Ks],function(t){return function(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===Ie&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Hi(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([Po(512,Oe,Pe,[[8,[bp,ed,ad,yd,bd]],[3,Oe],Me]),Po(5120,Ii,xi,[[3,Ii]]),Po(4608,nu,ru,[Ii,[2,eu]]),Po(5120,cr,lr,[]),Po(5120,wi,Ai,[]),Po(5120,_i,ki,[]),Po(4608,fl,pl,[yu]),Po(6144,ze,null,[fl]),Po(4608,ol,sl,[]),Po(5120,Oc,function(t,e,n,r,i,o,a,s){return[new rl(t,e,n),new hl(r),new ul(i,o,a,s)]},[yu,Nr,pr,yu,yu,ol,yr,[2,al]]),Po(4608,Pc,Pc,[Oc,Nr]),Po(135680,Lc,Lc,[yu]),Po(4608,Kc,Kc,[Pc,Lc]),Po(5120,Bd,Pm,[]),Po(5120,Oy,Rm,[]),Po(4608,um,Om,[yu,Bd,Oy]),Po(5120,Ve,Mm,[Kc,um,Nr]),Po(6144,Mc,null,[Lc]),Po(4608,Ur,Ur,[Nr]),Po(5120,Dh,hp,[Bf]),Po(4608,Jf,Jf,[]),Po(6144,Xf,null,[Jf]),Po(135680,$f,$f,[Bf,Sn,Er,fe,Xf]),Po(4608,Zf,Zf,[]),Po(5120,tp,ap,[Bf,bu,ep]),Po(5120,yp,dp,[fp]),Po(5120,dr,function(t){return[t]},[yp]),Po(5120,xp,Np,[Ap,[2,kp]]),Po(4608,Gm,Gm,[Ap,[2,kp],[2,Km],[2,zm],pr,Nr,[2,Hm]]),Po(4608,Up,Cm,[Ve,Ec]),Po(4608,Op,Op,[Ap,[2,kp],pr,Nr]),Po(4608,Wp,Wp,[]),Po(4608,Xp,Xp,[Wr,Oe,fe,Nr,Wp]),Po(1073742336,du,du,[]),Po(1024,jn,_l,[]),Po(1024,Br,function(){return[ip()]},[]),Po(512,fp,fp,[fe]),Po(1024,sr,function(t,e){return[(n=t,xc("probe",Dc),xc("coreTokens",o({},Nc,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Dc}),pp(e)];var n},[[2,Br],fp]),Po(512,ur,ur,[[2,sr]]),Po(131584,Wr,Wr,[Nr,yr,fe,jn,Oe,ur]),Po(1073742336,Ni,Ni,[Wr]),Po(1073742336,Sl,Sl,[[3,Sl]]),Po(1024,np,up,[[3,Bf]]),Po(512,ch,lh,[]),Po(512,Wf,Wf,[]),Po(256,ep,{},[]),Po(1024,Qs,sp,[Hs,[2,Ws],ep]),Po(512,Gs,Gs,[Qs]),Po(512,Er,Er,[]),Po(512,Sn,Jr,[Er,[2,Xr]]),Po(1024,Mf,function(){return[[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"Dashboard",component:Fp},{path:"login",component:nd}]]},[]),Po(1024,Bf,lp,[Wr,ch,Wf,Gs,fe,Sn,Er,Mf,ep,[2,Ff],[2,Pf]]),Po(1073742336,op,op,[[2,np],[2,Bf]]),Po(1073742336,Xm,Xm,[]),Po(1073742336,Dp,Dp,[]),Po(1073742336,Ym,Ym,[]),Po(1073742336,Fm,Fm,[]),Po(1073742336,Zp,Zp,[]),Po(1073742336,Mp,Mp,[]),Po(1073742336,Bs,Bs,[]),Po(256,Ie,!0,[]),Po(256,Ap,{apiKey:"AIzaSyATxycokw3Y76SwojYV-OQumMHPx4R1XIM",authDomain:"graphic-mission-175719.firebaseapp.com",databaseURL:"https://graphic-mission-175719.firebaseio.com",projectId:"graphic-mission-175719",storageBucket:"graphic-mission-175719.appspot.com",messagingSenderId:"539430506883"},[]),Po(256,kp,void 0,[]),Po(256,Lm,"BrowserAnimations",[])])});(function(){if(Ge)throw new Error("Cannot enable prod mode after platform setup.");We=!1})(),wl().bootstrapModuleFactory(Zm).catch(function(t){return console.error(t)})},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+7AZ"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),f=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p=Error.captureStackTrace,d=function(){return function(t,e){if(this.code=t,this.message=e,p)p(this,y.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FirebaseError";var y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var o=new d(i,n=this.serviceName+": "+n+" ("+i+").");for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}();function m(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},v=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return v(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},_=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){return function(){this.blockSize=-1}}()),S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function E(){}function T(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.assert=o,e.assertionError=a,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=f,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=y,e.FirebaseError=d,e.patchCapture=function(t){var e=p;return p=t,e},e.jsonEval=m,e.stringify=function(t){return JSON.stringify(t)},e.decode=g,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=g(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=v,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return v(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=_,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.errorPrefix=T,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(T(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(T(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(T(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}}},[[0,0]]]);